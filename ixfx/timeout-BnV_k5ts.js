import{h as e}from"./src-DdJCbM4z.js";import{_ as t,a as n,x as r,y as i}from"./numbers-BlBexQl9.js";const a=(a,o)=>{if(a===void 0)throw Error(`callback parameter is undefined`);i(n(e(o),`aboveZero`,`interval`));let s,c=0,l=0,u=0,d=`idle`,f=()=>{c=0,globalThis.clearTimeout(s),d=`idle`},p=async(i=o,p)=>new Promise((o,h)=>{c=performance.now();let g=e(i),_=n(g,`aboveZero`,`altTimeoutMs`);if(t(_)){h(r(_));return}switch(d){case`scheduled`:m();break;case`running`:break}d=`scheduled`,s=globalThis.setTimeout(async()=>{if(d!==`scheduled`){console.warn(`Timeout skipping execution since state is not 'scheduled'`),f();return}let e=p??[];l++,u++,d=`running`,await a(performance.now()-c,...e),d=`idle`,f(),o()},g)}),m=()=>{d!==`idle`&&f()};return{start:p,cancel:m,get runState(){return d},get startCount(){return l},get startCountTotal(){return u}}};export{a as t};