import{n as e}from"./chunk-CVLEGGlw.js";import{h as t,l as n}from"./src-DdJCbM4z.js";import{a as r,u as i,y as a}from"./numbers-BlBexQl9.js";import{t as o}from"./function-CIywXZEl.js";import{t as s}from"./string-CraS4SMa.js";import{t as c}from"./simple-event-emitter-DdjYDCSw.js";import{t as l}from"./clamp-dSm2UU4N.js";import{t as u}from"./wrap-BvLZW4rK.js";import{n as d,t as f}from"./interpolate-Dc-oL9YV.js";import{t as p}from"./scale-DsFpif2S.js";import{E as ee,F as te,J as m,M as ne,O as re,S as h,X as g,Z as _,_ as v,d as ie,f as ae,g as y,h as b,i as oe,m as se,p as x,v as S,w as ce}from"./conversions-CmWd4trl.js";import{i as le,r as ue}from"./from-top-left-blmXPyyI.js";import{n as de}from"./state-machine-C0DUbIyp.js";import{a as fe,d as pe,n as me,o as he,r as C,s as ge,t as w,u as _e}from"./timer-DaWe-yIt.js";import{a as T,i as E,n as ve,r as ye}from"./bezier-DLbj6e9n.js";import{i as be,r as xe}from"./float-source-Ce2Ezdc_.js";function Se(e,t={}){a(r(e,`aboveZero`,`totalTicks`));let n=t.exclusiveStart??!1,i=t.exclusiveEnd??!1,o=t.cycleLimit??2**53-1,s=n?1:0,c=i?e-1:e,l=0,u=t.startAt??s;if(t.startAtRelative){let r=e;n&&r--,i&&r--,u=Math.round(t.startAtRelative*r)}return t=>{if(t&&(t.resetAt!==void 0&&(u=t.resetAt),t.resetAtRelative!==void 0&&(u=Math.floor(t.resetAtRelative*e))),l>=o)return 1;let n=u/e;return u++,u>c&&(l++,u=s),n}}function D(e,n={}){let r=n.cycleLimit??2**53-1,o=n.startAt??performance.now(),s=0,c=t(e,1e3);return n.startAtRelative&&(a(i(n.startAtRelative,`percentage`,`startAtRelative`)),o=performance.now()-c*n.startAtRelative),e=>{if(e&&(e.resetAt!==void 0&&(o=e.resetAt,o===0&&(o=performance.now())),e.resetAtRelative!==void 0&&(a(i(e.resetAtRelative,`percentage`,`resetAtRelative`)),o=performance.now()-c*e.resetAtRelative)),s>=r)return 1;let t=performance.now(),n=t-o;return n>=c&&(s+=Math.floor(n/c),o=t,s>=r)?1:n%c/c}}function Ce(e,t={}){return D(60*1e3/e,t)}function O(e,t={}){return D(1e3/e,t)}const k=(e,t={})=>{let n=e/1e3,r=t.min??-(2**53-1),i=t.max??2**53-1,a=t.clamp??!1;if(a&&t.max)throw Error(`Use either 'max' or 'clamp', not both.`);a&&(i=e);let o=performance.now();return()=>{let e=performance.now(),t=e-o;o=e;let a=n*t;return a>i?i:a<r?r:a}},we=(e,t={})=>k(e/60,t);var Te=e({bpm:()=>Ce,elapsed:()=>D,hertz:()=>O,perMinute:()=>we,perSecond:()=>k,ticks:()=>Se}),Ee=e({saw:()=>Ae,sine:()=>De,sineBipolar:()=>Oe,square:()=>je,triangle:()=>ke});const A=Math.PI*2;function*De(e){if(e===void 0)throw TypeError(`Parameter 'timerOrFreq' is undefined`);for(typeof e==`number`&&(e=C(e));;)yield(Math.sin(e.elapsed*A)+1)/2}function*Oe(e){if(e===void 0)throw TypeError(`Parameter 'timerOrFreq' is undefined`);for(typeof e==`number`&&(e=C(e));;)yield Math.sin(e.elapsed*A)}function*ke(e){for(typeof e==`number`&&(e=C(e));;){let t=e.elapsed;t<.5?t*=2:t=2-t*2,yield t}}function*Ae(e){if(e===void 0)throw TypeError(`Parameter 'timerOrFreq' is undefined`);for(typeof e==`number`&&(e=C(e));;)yield e.elapsed}function*je(e){for(typeof e==`number`&&(e=C(e));;)yield e.elapsed<.5?0:1}const Me=Math.pow,Ne=1/Math.sqrt(2*Math.PI),j=(e=.4)=>t=>{let n=Ne/e,r=-2.5,i=(t-.5)/e;i*=i,r*=i;let a=n*Me(Math.E,r);return a>1?1:a<0?0:a};var Pe=e({arch:()=>Re,backIn:()=>rt,backInOut:()=>ot,backOut:()=>it,bell:()=>ut,bounceIn:()=>lt,bounceInOut:()=>ft,bounceOut:()=>I,circIn:()=>tt,circInOut:()=>at,circOut:()=>nt,cubicIn:()=>qe,cubicOut:()=>Je,elasticIn:()=>st,elasticInOut:()=>dt,elasticOut:()=>ct,expoIn:()=>Ze,expoInOut:()=>et,expoOut:()=>Qe,quadIn:()=>Ue,quadInOut:()=>Ke,quadOut:()=>We,quartIn:()=>Ye,quartOut:()=>Xe,quintIn:()=>Ie,quintInOut:()=>$e,quintOut:()=>Le,sineIn:()=>Ve,sineInOut:()=>Ge,sineOut:()=>He,smootherstep:()=>Be,smoothstep:()=>ze});const M=Math.sqrt,N=Math.pow,Fe=Math.cos,P=Math.PI,F=Math.sin,I=e=>{let t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},Ie=e=>e*e*e*e*e,Le=e=>1-N(1-e,5),Re=e=>e*(1-e)*4,ze=e=>e*e*(3-2*e),Be=e=>(e*(e*6-15)+10)*e*e*e,Ve=e=>1-Fe(e*P/2),He=e=>F(e*P/2),Ue=e=>e*e,We=e=>1-(1-e)*(1-e),Ge=e=>-(Fe(P*e)-1)/2,Ke=e=>e<.5?2*e*e:1-N(-2*e+2,2)/2,qe=e=>e*e*e,Je=e=>1-N(1-e,3),Ye=e=>e*e*e*e,Xe=e=>1-N(1-e,4),Ze=e=>e===0?0:N(2,10*e-10),Qe=e=>e===1?1:1-N(2,-10*e),$e=e=>e<.5?16*e*e*e*e*e:1-N(-2*e+2,5)/2,et=e=>e===0?0:e===1?1:e<.5?N(2,20*e-10)/2:(2-N(2,-20*e+10))/2,tt=e=>1-M(1-N(e,2)),nt=e=>M(1-N(e-1,2)),rt=e=>{let t=1.70158;return(t+1)*e*e*e-t*e*e},it=e=>{let t=1.70158;return 1+(t+1)*N(e-1,3)+t*N(e-1,2)},at=e=>e<.5?(1-M(1-N(2*e,2)))/2:(M(1-N(-2*e+2,2))+1)/2,ot=e=>{let t=1.70158*1.525;return e<.5?N(2*e,2)*((t+1)*2*e-t)/2:(N(2*e-2,2)*((t+1)*(e*2-2)+t)+2)/2},st=e=>{let t=2*P/3;return e===0?0:e===1?1:-N(2,10*e-10)*F((e*10-10.75)*t)},ct=e=>{let t=2*P/3;return e===0?0:e===1?1:N(2,-10*e)*F((e*10-.75)*t)+1},lt=e=>1-I(1-e),ut=j(),dt=e=>{let t=2*P/4.5;return e===0?0:e===1?1:e<.5?-(N(2,20*e-10)*F((20*e-11.125)*t))/2:N(2,-20*e+10)*F((20*e-11.125)*t)/2+1},ft=e=>e<.5?(1-I(1-2*e))/2:(1+I(2*e-1))/2,pt=(e=0,t=0)=>{let n={x:p(e,-1,1,0,1),y:p(e,-1,1,1,0)},r=S(Math.abs(e),h,n);e!==0&&t>0&&(r=e>0?S(t,r,{x:0,y:n.x*2}):S(t,r,{x:n.y*2,y:0}));let i=ye(ve(h,ce,r,n));return e=>i(e)},L=(e,t)=>{a(o(e,`fn`));let n;return()=>(n===void 0&&(n=fe(t,{clampValue:!0})),e(n()))},R=(e,n)=>{a(o(e,`fn`));let r=w(),i=t(n);if(i===void 0)throw Error(`Param 'duration' not provided`);return _e(e,ge(i,{timer:r,clampValue:!0}))},z=(e,t)=>{a(o(e,`fn`));let n;return()=>(n===void 0&&(n=he(t,{clampValue:!0})),e(n()))},B=(e,t)=>(a(o(e,`fn`)),_e(e,ge(t,{timer:me(),clampValue:!0})));var mt=e({Named:()=>Pe,create:()=>ht,get:()=>G,getEasingNames:()=>yt,line:()=>pt,tickEasing:()=>_t,ticks:()=>H,time:()=>V,timeEasing:()=>gt});const ht=e=>{let t=U(e.name??`quintIn`)??e.fn;if(t===void 0)throw Error(`Either 'name' or 'fn' must be set`);if(`duration`in e)return V(t,e.duration);if(`ticks`in e)return H(t,e.ticks);throw Error(`Expected 'duration' or 'ticks' in options`)},gt=(e,t)=>R(U(e),t),V=(e,t)=>L(U(e),t),H=(e,t)=>z(U(e),t),_t=(e,t)=>B(U(e),t),U=e=>{let t=typeof e==`function`?e:G(e);if(t===void 0)throw typeof e==`string`?Error(`Easing function not found: '${e}'`):Error(`Easing function not found`);return t};let W;const G=function(e){a(s(e,`non-empty`,`easingName`));let t=vt().get(e.toLowerCase());if(t===void 0)throw Error(`Easing not found: '${e}'`);return t};function vt(){if(W===void 0){W=new Map;for(let[e,t]of Object.entries(Pe))W.set(e.toLowerCase(),t);return W}else return W}function*yt(){yield*vt().keys()}const bt=Object.freeze({attack:[`decay`,`release`],decay:[`sustain`,`release`],sustain:[`release`],release:[`complete`],complete:null}),K={attackDuration:600,decayDuration:200,releaseDuration:800,shouldLoop:!1};var xt=class extends c{#e;#t;#n;#r;#i;#a=!1;#o=!1;attackDuration;decayDuration;releaseDuration;decayDurationTotal;shouldLoop;constructor(e={}){super(),this.attackDuration=e.attackDuration??K.attackDuration,this.decayDuration=e.decayDuration??K.decayDuration,this.releaseDuration=e.releaseDuration??K.releaseDuration,this.shouldLoop=e.shouldLoop??K.shouldLoop,this.#e=new de(bt,{initial:`attack`}),this.#e.addEventListener(`change`,e=>{e.newState===`release`&&this.#i&&this.#n?.reset(),super.fireEvent(`change`,e)}),this.#e.addEventListener(`stop`,e=>{super.fireEvent(`complete`,e)}),this.#t=()=>w(),this.#r=this.#i=!1,this.decayDurationTotal=this.attackDuration+this.decayDuration}dispose(){this.#a||this.#e.dispose()}get isDisposed(){return this.#a}switchStateIfNeeded(e){if(this.#n===void 0)return!1;let t=this.#n.elapsed,n=this.#i&&!this.#r,r=!1,i=this.#e.state;do switch(r=!1,i=this.#e.state,i){case`attack`:(t>this.attackDuration||n)&&(this.#e.next(),r=!0);break;case`decay`:(t>this.decayDurationTotal||n)&&(this.#e.next(),r=!0);break;case`sustain`:(!this.#r||n)&&(t=0,this.#e.next(),this.#n.reset(),r=!0);break;case`release`:t>this.releaseDuration&&(this.#e.next(),r=!0);break;case`complete`:this.shouldLoop&&e&&this.trigger(this.#i)}while(r&&i!==`complete`);return r}computeRaw(e=!0,t=!0){if(this.#n===void 0)return[void 0,0,this.#e.state];e&&this.switchStateIfNeeded(t);let n=this.#e.state,r=this.#n.elapsed,i=0,a=this.#e.state;switch(a){case`attack`:i=r/this.attackDuration;break;case`decay`:i=(r-this.attackDuration)/this.decayDuration;break;case`sustain`:i=1;break;case`release`:i=Math.min(r/this.releaseDuration,1);break;case`complete`:return[`complete`,1,n];default:throw Error(`State machine in unknown state: ${a}`)}return[a,i,n]}get isDone(){return this.#e.isDone}onTrigger(){}trigger(e=!1){this.onTrigger(),this.#o=!0,this.#e.reset(),this.#n=this.#t(),this.#r=e,this.#i=e}get hasTriggered(){return this.#o}compute(){}release(){this.isDone||!this.#i||(this.#r=!1,this.compute())}};const q={attackBend:-1,decayBend:-.3,releaseBend:-.3,peakLevel:1,initialLevel:0,sustainLevel:.6,releaseLevel:0,retrigger:!1};var St=class{constructor(e){this.adsr=e}next(...e){this.adsr.hasTriggered||this.adsr.trigger();let t=this.adsr.compute();return{value:t[1],done:t[0]===`complete`}}[Symbol.toStringTag]=`Generator`},J=class extends xt{attackPath;decayPath;releasePath;initialLevel;peakLevel;releaseLevel;sustainLevel;attackBend;decayBend;releaseBend;initialLevelOverride;retrigger;releasedAt;constructor(e={}){super(e),this.retrigger=e.retrigger??q.retrigger,this.initialLevel=e.initialLevel??q.initialLevel,this.peakLevel=e.peakLevel??q.peakLevel,this.releaseLevel=e.releaseLevel??q.releaseLevel,this.sustainLevel=e.sustainLevel??q.sustainLevel,this.attackBend=e.attackBend??q.attackBend,this.releaseBend=e.releaseBend??q.releaseBend,this.decayBend=e.decayBend??q.decayBend,this.attackPath=T(E({x:0,y:this.initialLevel},{x:1,y:this.peakLevel},-this.attackBend)),this.decayPath=T(E({x:0,y:this.peakLevel},{x:1,y:this.sustainLevel},-this.decayBend)),this.releasePath=T(E({x:0,y:this.sustainLevel},{x:1,y:this.releaseLevel},-this.releaseBend))}onTrigger(){if(this.initialLevelOverride=void 0,!this.retrigger){let[e,t,n]=this.compute(!0,!1);!Number.isNaN(t)&&t>0&&(this.initialLevelOverride=t)}}[Symbol.iterator](){return new St(this)}get value(){return this.compute(!0)[1]}compute(e=!0,t=!0){let[n,r]=super.computeRaw(e,t);if(n===void 0)return[void 0,NaN,NaN];let i;switch(n){case`attack`:i=this.attackPath.interpolate(r).y,this.initialLevelOverride!==void 0&&(i=p(i,0,1,this.initialLevelOverride,1)),this.releasedAt=i;break;case`decay`:i=this.decayPath.interpolate(r).y,this.releasedAt=i;break;case`sustain`:i=this.sustainLevel,this.releasedAt=i;break;case`release`:i=this.releasePath.interpolate(r).y,this.releasedAt!==void 0&&(i=p(i,0,this.sustainLevel,0,this.releasedAt));break;case`complete`:i=this.releaseLevel,this.releasedAt=void 0;break;default:throw Error(`Unknown state: ${n}`)}return[n,i,r]}},Ct=e({Adsr:()=>J,AdsrBase:()=>xt,AdsrIterator:()=>St,adsr:()=>wt,adsrIterable:()=>Tt,adsrStateTransitions:()=>bt,defaultAdsrOpts:()=>q,defaultAdsrTimingOpts:()=>K});const wt=(e={})=>{let t=new J(e),r=t.releaseLevel,i=t[Symbol.iterator]();return()=>n(i,{overrideWithLast:!0,value:r})};async function*Tt(e){let t=new J(e.env),n=e.sampleRateMs??100;t.trigger();let r=pe(()=>t.value,{while:()=>!t.isDone,delay:n,signal:e.signal});for await(let e of r)yield e}var Et=e({accelerationForce:()=>Nt,angleFromAccelerationForce:()=>Rt,angleFromVelocityForce:()=>zt,angularForce:()=>Lt,apply:()=>Mt,attractionForce:()=>kt,computeAccelerationToTarget:()=>Ht,computeAttractionForce:()=>At,computePositionFromAngle:()=>Ut,computePositionFromVelocity:()=>Z,computeVelocity:()=>X,constrainBounce:()=>Ot,guard:()=>Dt,magnitudeForce:()=>Pt,nullForce:()=>Ft,orientationForce:()=>Kt,pendulumForce:()=>Vt,springForce:()=>Bt,targetForce:()=>jt,velocityForce:()=>It});const Dt=(e,t=`t`)=>{if(e===void 0)throw Error(`Parameter ${t} is undefined. Expected ForceAffected`);if(e===null)throw Error(`Parameter ${t} is null. Expected ForceAffected`);if(typeof e!=`object`)throw TypeError(`Parameter ${t} is type ${typeof e}. Expected object of shape ForceAffected`)},Ot=(e,t=1)=>{e||={width:1,height:1};let n=ue(e,`left`),r=ue(e,`right`),i=le(e,`top`),a=le(e,`bottom`);return e=>{let o=Z(e.position??h,e.velocity??h),s=e.velocity??h,{x:c,y:l}=o;return c>r?(c=r,s=v(y(s,t),`x`)):c<n&&(c=n,s=v(y(s,t),`x`)),l>a?(l=a,s=y(v(s,`y`),t)):o.y<i&&(l=i,s=v(y(s,t),`y`)),Object.freeze({...e,position:{x:c,y:l},velocity:s})}},kt=(e,t,n={})=>r=>{let i=r.acceleration??h;for(let a of e){if(a===r)continue;let e=At(a,r,t,n);i=_(i,e)}return{...r,acceleration:i}},At=(e,t,n,r={})=>{if(e.position===void 0)throw Error(`attractor.position not set`);if(t.position===void 0)throw Error(`attractee.position not set`);let i=r.min??.01,a=r.max??.7,o=x(g(e.position,t.position)),s=l(m(o),i,a);return y(o,n*(e.mass??1)*(t.mass??1)/(s*s))},jt=(e,t={})=>n=>{let r=Ht(e,n.position??{x:.5,y:.5},t);return{...n,acceleration:_(n.acceleration??h,r)}},Mt=(e,...t)=>{if(e===void 0)throw Error(`t parameter is undefined`);for(let n of t)n!=null&&(e=typeof n==`function`?n(e):{...e,acceleration:_(e.acceleration??h,n)});let n=X(e.acceleration??h,e.velocity??h),r=Z(e.position??h,n);return{...e,position:r,velocity:n,acceleration:h}},Nt=(e,t=`ignored`)=>n=>Object.freeze({...n,acceleration:Y(e,n,t)}),Y=(e,t,n=`ignored`)=>{let r;switch(n){case`dampen`:r=t=>ee(e,t,t);break;case`multiply`:r=t=>b(e,t,t);break;case`ignored`:r=t=>e;break;default:throw Error(`Unknown 'mass' parameter '${n}. Expected 'dampen', 'multiply' or 'ignored'`)}return _(t.acceleration??h,r(t.mass??1))},Pt=(e,t=`ignored`)=>n=>{if(n.velocity===void 0)return n;let r=m(x(n.velocity)),i=e*r*r,a=y(v(n.velocity),i);return Object.freeze({...n,acceleration:Y(a,n,t)})},Ft=e=>e,It=(e,t)=>{let n=ie(v,t=>y(t,e));return e=>{if(e.velocity===void 0)return e;let r=n(e.velocity);return Object.freeze({...e,acceleration:Y(r,e,t)})}},Lt=()=>e=>{let t=e.angularAcceleration??0,n=e.angularVelocity??0,r=e.angle??0,i=n+t,a=r+i;return Object.freeze({...e,angle:a,angularVelocity:i,angularAcceleration:0})},Rt=(e=20)=>t=>{let n=t.acceleration??h;return Object.freeze({...t,angularAcceleration:n.x*e})},zt=(e=1)=>t=>{let n=ne(t.velocity??h);return Object.freeze({...t,angle:e<1?d(e,t.angle??0,n):n})},Bt=(e,t=.5,n=2e-4,r=.999)=>i=>{let a=g(i.position??h,e),o=m(a),s=Math.abs(t-o),c=b(X(Y(ae(a,x,e=>y(e,-n*s)),i,`dampen`)??h,i.velocity??h),r,r);return{...i,velocity:c,acceleration:h}},Vt=(e,t={})=>n=>{e||={x:0,y:0};let r=t.length??m(e,n.position??h),i=t.speed??.001,a=t.damping??.995,o=n.angle;o===void 0&&(o=n.position?ne(e,n.position)-Math.PI/2:0);let s=-1*i/r*Math.sin(o),c=(n.angularVelocity??0)+s;return o+=c,Object.freeze({angularVelocity:c*a,angle:o,position:Ut(r,o+Math.PI/2,e)})},X=(e,t,n)=>{let r=_(t,e);return n===void 0?r:se(r,n)},Ht=(e,t,n={})=>{let r=n.diminishBy??.001,i=g(e,t);return n.range&&re(te(i),n.range)===-2?h:y(i,r)},Z=(e,t)=>_(e,t),Ut=(e,t,n)=>oe(e,t,n),Wt=Lt(),Gt=Rt(),Kt=(e=.5)=>{let t=zt(e);return e=>(e=Wt(e),e=Gt(e),e=t(e),e)},qt=(e,t)=>n=>{let r=1-n,i=r*r,a=n*n,o=a*n;return 3*e*i*n+3*t*r*a+o},Jt=e=>{let t=performance.now();return{update:(n=1)=>{let r=e*(performance.now()-t)%1;return t=performance.now(),(n+r)%1},reset:()=>{t=performance.now()}}},Yt=Math.PI*2;function Q(e,t,n,r){let o,s=`clamp`,c=e=>(o&&(e=o(e)),s===void 0||s===`clamp`?e=l(e):s===`wrap`&&(e>1?e%=1:e<0&&(e=1+e%1)),e),u=(e,t,n)=>(a(i(t,``,`a`),i(n,``,`b`),i(e,``,`amount`)),e=c(e),(1-e)*t+e*n),d=(e={})=>{if(e.easing){let t=G(e.easing);if(!t)throw Error(`Easing function '${e.easing}' not found`);o=t}else if(e.transform){if(typeof e.transform!=`function`)throw Error(`Param 'transform' is expected to be a function. Got: ${typeof e.transform}`);o=e.transform}s=e.limits??`clamp`},f=(e,t,n)=>(1-e)*t+e*n;if(typeof e!=`number`)throw TypeError(`First param is expected to be a number. Got: ${typeof e}`);if(typeof t==`number`){let i,a;if(n===void 0||typeof n==`object`)return i=e,a=t,d(n),e=>u(e,i,a);if(typeof n==`number`)return i=t,a=n,d(r),u(e,i,a);throw Error(`Values for 'a' and 'b' not defined`)}else if(t===void 0||typeof t==`object`){let n=c(e);return d(t),a(i(n,``,`amount`)),(e,t)=>f(n,e,t)}}const Xt=(e,t=0,n=1,r=0,i)=>{let a=r;return(r,o)=>{if(r!==void 0&&(n=r),o!==void 0&&(t=o),a>=1)return n;let s=Q(a,t,n,i);return a+=e,s}},Zt=(e,t,n,r)=>{let i=u(n-t,0,Yt);return Q(e,t,t+(i>Math.PI?i-Yt:i),r)},Qt=(e,t=0,n=1,r)=>{let i=fe(e,{clampValue:!0});return(e,a)=>{let o=i();return e!==void 0&&(n=e),a!==void 0&&(t=a),o>=1?n:Q(o,t,n,r)}},$t=e=>{let{relative:t,absolute:n}=e,r=e.clamped??!1,i=e.source??Math.random;if(n!==void 0)return e=>{let t=e+(i()*n*2-n);return r?l(t,0,e):t};if(t!==void 0)return e=>{let n=e*t,a=e+(i()*n*2-n);return r?l(a,0,e):a};throw Error(`Either absolute or relative fields expected`)},en=(e={})=>{let t=e.clamped??!0,n=e=>0;if(e.absolute!==void 0){a(i(e.absolute,t?`percentage`:`bipolar`,`opts.absolute`));let r=be({min:-e.absolute,max:e.absolute,source:e.source});n=e=>e+r()}else if(e.relative===void 0)throw TypeError(`Either absolute or relative jitter amount is required.`);else{let r=e.relative??.1;a(i(r,t?`percentage`:`bipolar`,`opts.relative`)),n=t=>t+xe({min:-Math.abs(r*t),max:Math.abs(r*t),source:e.source})}return e=>{a(i(e,t?`percentage`:`bipolar`,`value`));let r=n(e);return t&&(r=l(r)),r}},tn=(e,t,n)=>{let r=n*e;return(1-e)*t+t*r},$=(e,t,n)=>r=>f(e,t(r),n(r)),nn=(e,t)=>n=>$(n,e,t)(n),rn=e=>e,an=function(e=.1,t,n,r,o){return t===void 0&&(t=0),n===void 0&&(n=1),r===void 0&&(r=t),a(i(e,`bipolar`,`interval`),i(n,`bipolar`,`end`),i(r,`bipolar`,`offset`),i(t,`bipolar`,`start`)),on(e,t,n,r,o)},on=function*(e,t,n,r,i){if(t===void 0)throw Error(`Parameter 'lower' is undefined`);if(e===void 0)throw Error(`Parameter 'interval' is undefined`);if(n===void 0)throw Error(`Parameter 'upper' is undefined`);if(i===void 0&&e<=1&&e>=0?i=10/e:i===void 0&&(i=1234),Number.isNaN(e))throw Error(`interval parameter is NaN`);if(Number.isNaN(t))throw Error(`lower parameter is NaN`);if(Number.isNaN(n)||Number.isNaN(r))throw Error(`upper parameter is NaN`);if(t>=n)throw Error(`lower must be less than upper`);if(e===0)throw Error(`Interval cannot be zero`);let a=n-t;if(Math.abs(e)>=a)throw Error(`Interval should be between -${a} and ${a}`);let o=e>0;if(n=Math.floor(n*i),t=Math.floor(t*i),e=Math.floor(Math.abs(e*i)),e===0)throw Error(`Interval is zero (rounding: ${i})`);if(r=r===void 0?t:Math.floor(r*i),r>n||r<t)throw Error(`Start (${r/i}) must be within lower (${t/i}) and upper (${n/i})`);let s=r;yield s/i;let c=!0;for(;;)s+=o?e:-e,o&&s>=n?(o=!1,s=n,s===n&&c&&(s=t,o=!0)):!o&&s<=t&&(o=!0,s=t,s===t&&c&&(s=n,o=!1)),yield s/i,c=!1};function*sn(e={},t){t===void 0?t=w():typeof t==`number`&&(t=C(t));let n=ln(e),r=e.countdown??10;for(;r>0;){let e=n(t.elapsed/1e3);yield e,e===1?r--:r=100}}function cn(e={},t){let n=sn(e,t);return()=>{let e=n.next();return e.done?1:e.value}}const ln=(e={})=>{let t=e.mass??1,n=e.stiffness??100,r=e.soft??!1,i=e.damping??10,a=e.velocity??.1;if(r||1<=i/(2*Math.sqrt(n*t))){let e=-Math.sqrt(n/t),r=-e*1-a;return t=>1-(1+t*r)*Math.E**(t*e)}else{let e=Math.sqrt(4*t*n-i**2),r=(i*1-2*t*a)/e,o=.5*e/t,s=-(.5*i)/t;return e=>1-(Math.cos(e*o)*1+Math.sin(e*o)*r)*Math.E**(e*s)}},un=(e,t,n={})=>{switch(e){case`elapsed`:return()=>D(t,n);case`bpm`:return()=>Ce(t,n);case`hertz`:return()=>O(t,n);default:throw Error(`Unknown source '${e}'. Expected: 'elapsed', 'hertz' or 'bpm'`)}};function dn(e=1){e=1/e;let t=e/2;return n=>Math.abs(n%e-t)}function fn(e=1){e=1/e;let t=e/2;return n=>n%e<t?1:0}function pn(e=1){return e*=Math.PI*2,t=>(Math.sin(t*e)+1)/2}function mn(e=1){return e*=Math.PI*2,t=>Math.abs(Math.sin(t*e))}function hn(e=1){return e*=Math.PI*2,t=>Math.sin(t*e)}function gn(e){let t=e.shape??`sine`,n=e.invert??!1,i=e.period??1,o;a(r(i,`aboveZero`,`period`));let s={...e};o=e.ticks?Se(e.ticks,s):e.hertz?O(e.hertz,s):e.millis?D(e.millis,s):e.source?e.source:D((e.secs??5)*1e3,s);let c;switch(t){case`saw`:c=e=>e;break;case`sine`:c=pn(i);break;case`sine-bipolar`:c=hn(i);break;case`square`:c=fn(i);break;case`triangle`:c=dn(i);break;case`arc`:c=mn(i);break;default:throw Error(`Unknown wave shape '${t}'. Expected: sine, sine-bipolar, saw, triangle, arc or square`)}return _n(o,c,n)}function _n(e,t,n=!1){return r=>{let i=e(r?.clock);return r?.override&&(i=r.override),i=t(i),n&&(i=1-i),i}}const vn=(e,t,n)=>(e*(n-1)+t)/n,yn=(e=`quadIn`)=>bn(e)(),bn=(e=`quadIn`)=>{let t=typeof e==`string`?{easing:e}:e,n=t.source??Math.random,r=t.easing??`quadIn`,i=G(r);if(i===void 0)throw Error(`Easing function '${r}' not found.`);return()=>i(n())};export{mt as Easings,Ct as Envelopes,Et as Forces,Ee as Oscillators,Te as Sources,mn as arcShape,nn as crossfade,qt as cubicBezierShape,Jt as drift,j as gaussian,f as interpolate,Zt as interpolateAngle,Qt as interpolatorInterval,Xt as interpolatorStepped,en as jitter,$t as jitterAbsolute,tn as mix,$ as mixModulators,rn as noop,on as pingPong,an as pingPongPercent,hn as sineBipolarShape,pn as sineShape,sn as spring,ln as springShape,cn as springValue,fn as squareShape,B as tickModulator,z as ticks,L as time,R as timeModulator,un as timingSourceFactory,dn as triangleShape,gn as wave,_n as waveFromSource,yn as weighted,vn as weightedAverage,bn as weightedSource};