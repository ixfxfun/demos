{"version":3,"file":"dom.js","names":["domQueryOrEl: string | V | null | undefined","el","selectors: QueryOrElements","module","document","key","c","source","exports","pos","codePointAt","fromCodePoint","parse","key$1","token","buffer","stringify","stack","value","i","list","JSON5","v: string","options: NumberFormattingOptions","v: number","o: NumberFormattingOptions","v: any","options: FormattingOptions","JSON5","v: object","parentOrQuery: HTMLElement | string","data: Map<string, object>","resolveElement","container: HTMLDivElement | undefined","options: DataTableOpts","data: ReadonlyMap<string, object>","data","t: HTMLElement | null","t: HTMLTableElement","data: object","valueHTML: string | undefined","data?: object","opts: Partial<DataTableOpts>","t: HTMLTableElement | undefined","d: object","elemOrQuery: SVGElement | HTMLElement | string","listener: DragListener","options: Partial<DragOptions>","PointsPlaceholder","token: object | undefined","RectsPlaceholderPositioned","event: Event","offset: Point","x: number","y: number","RectsIsPlaceholder","lastMoveOffset: Point","PointsEmpty","moveEvent: PointerEvent","PointsIsPlaceholder","state: DragState","upEvent: PointerEvent","event: PointerEvent | MouseEvent | undefined","el: HTMLTextAreaElement","el","domIdOrEl: string | HTMLInputElement","onChanged?: (currentValue: boolean) => void","value: boolean","onChanged?: (currentValue: number) => void","live?: boolean","value: number","domQueryOrEl: string | HTMLButtonElement","onClickHandler?: () => void","value: string","handler?: () => void","title: string","onClick?: () => void","domQueryOrEl: string | HTMLSelectElement","onChanged?: (currentValue: string) => void","options: SelectOpts","opts: string[]","preSelect?: string","o: any","options: (string | string[])[]","context: HTMLElement | string","query: string | undefined","query","el","fallback: T","elt?: Element","cssVariable: string","fallbackValue: string","variables: T","stylesOrEl?: CSSStyleDeclaration | HTMLElement","styles: CSSStyleDeclaration","name: string","elOrQuery: SVGElement | HTMLElement | string","el","elOrQuery: HTMLElement | string","selectors: QueryOrElements","value: boolean","cssClass: string","value: string","options: Partial<DataDisplayOptions>","data: object","selectors: QueryOrElements","value?: any","property: string","elements: HTMLElement[]","v: any","selectors: QueryOrElements","value: string","value: boolean","cssClass: string","selectors: string","value: string | number","callback: () => void","interval: Interval | undefined","elOrQuery: T | string","options: ElementSizerOptions<T>","#el","#containerEl","#stretch","#onSizeChanging","#size","#sizeDebounce","#naturalRatio","#naturalSize","#viewport","#byViewport","#byContainer","reason?: string","#disposed","#resizeObservable","canvasElementOrQuery: HTMLCanvasElement | string","options: ElementSizerOptions<HTMLCanvasElement>","el","options: { zIndex?: number } & ElementSizerOptions<HTMLCanvasElement>","opts: ElementSizerOptions<HTMLCanvasElement>","svg: SVGElement","onSizeSet?: (size: Rects.Rect) => void","#onParentResize","#computeSizeBasedOnParent","#onViewportResize","size: Rect","parentSize: Rects.Rect","args: ResizeObserverEntry[]","size: Rects.Rect","b: HTMLButtonElement","ex: Error | string | Event","parentEl: Readonly<HTMLElement>","styles: string","domQueryOrElement: HTMLElement | string","opts: LogOpts","lastLog: string | undefined","el","messageOrError: string | Error","whatToLog: unknown","log","message: string | undefined","line: HTMLElement","timestamp","clear","options: InlineConsoleOptions","logElement: HTMLElement | undefined","show: boolean","message?: any","queryOrElement: string | HTMLElement | (string | HTMLElement)[] | AsyncGenerator<string | HTMLElement>","options: Partial<ElementQueryOptions>","_: HTMLElement","options: {\n  panels: Panel<TNotifyArgs>[],\n  parent: HTMLElement | string,\n  preselectId?: string,\n  onPanelChanging?: (priorPanel: Panel<TNotifyArgs> | undefined, newPanel: Panel<TNotifyArgs> | undefined) => boolean | void,\n  onPanelChange?: (priorPanel: Panel<TNotifyArgs> | undefined, newPanel: Panel<TNotifyArgs> | undefined) => void\n}","el","select","currentPanel: Panel<any> | undefined","id: string","name: string","args: TNotifyArgs","reference: PointSpaces","a: Readonly<Point | number | number[]>","b?: number","domQueryOrEl: Readonly<string | HTMLElement>","options: ElPositionOpts","el","anchor: GridCardinalDirection | `center`","target: PointSpaces","targetSpace: PointSpaces","a: Readonly<Point | number[] | number>","domQueryOrEl: string | HTMLElement","relativePos: Point","relativeTo: `window` | `screen`","el: Readonly<HTMLElement>","list: readonly string[]","sibling: Readonly<HTMLElement>","tagName: string","parent: Readonly<HTMLElement>","object: object","JSON5","parent: HTMLElement","element: HTMLElement","elAfter: HTMLElement | undefined","elBefore: HTMLElement | undefined","parentEl: HTMLElement","list: Map<string, V>","createUpdate: CreateUpdateElement<V>","prune: HTMLElement[]","id: string"],"sources":["../../dom/src/resolve-el.ts","../../../node_modules/.pnpm/json5@2.2.3/node_modules/json5/dist/index.js","../../dom/src/data-table.ts","../../geometry/dist/src/rect/cardinal.js","../../dom/src/drag-drop.ts","../../dom/src/forms.ts","../../dom/src/ts-util.ts","../../dom/src/css-variables.ts","../../dom/src/css.ts","../../dom/src/data-display.ts","../../dom/src/set-property.ts","../../dom/src/el.ts","../../dom/src/internal/debounce.ts","../../dom/src/element-sizing.ts","../../dom/src/error-handler.ts","../../dom/src/shadow-dom.ts","../../dom/src/log.ts","../../dom/src/inline-console.ts","../../dom/src/query.ts","../../dom/src/tabbed-panel.ts","../../dom/src/utility.ts"],"sourcesContent":["import { resultToError, type Result } from \"@ixfx/guards\";\n\n/**\n * Resolves either a string or HTML element to an element.\n * Useful when an argument is either an HTML element or query.\n *\n * ```js\n * resolveEl(`#someId`);\n * resolveEl(someElement);\n * ```\n * @param domQueryOrEl\n * @returns\n */\nexport const resolveEl = <V extends Element>(domQueryOrEl: string | V | null | undefined): V => {\n  const r = resolveElementTry(domQueryOrEl);\n  if (r.success) return r.value;\n  throw resultToError(r);\n}\n\n/**\n * Tries to resolve a query, returning a `Result`.\n * \n * ```js\n * const { success, value, error } = resolveElementTry(`#some-element`);\n * if (success) {\n *  // Do something with value\n * } else {\n *  console.error(error);\n * }\n * ```\n * @param domQueryOrEl \n * @returns \n */\nexport const resolveElementTry = <V extends Element>(domQueryOrEl: string | V | null | undefined): Result<V, string> => {\n  if (typeof domQueryOrEl === `string`) {\n    const d = document.querySelector(domQueryOrEl);\n    if (d === null) {\n      const error = domQueryOrEl.startsWith(`#`) ? `Query '${ domQueryOrEl }' did not match anything. Try '#id', 'div', or '.class'`\n        : `Query '${ domQueryOrEl }' did not match anything. Did you mean '#${ domQueryOrEl }?`;\n      return { success: false, error };\n\n    }\n    domQueryOrEl = d as V;\n  } else if (domQueryOrEl === null) {\n    return { success: false, error: `Param 'domQueryOrEl' is null` };\n  } else if (domQueryOrEl === undefined) {\n    return { success: false, error: `Param 'domQueryOrEl' is undefined` };\n  }\n  const el = domQueryOrEl;\n  return { success: true, value: el };\n};\n\nexport type QueryOrElements = string | Element[] | HTMLElement[] | HTMLElement | Element\n\n/**\n * Returns a set of elements.\n * \n * Returns an empty list if `selectors` is undefined or null.\n * \n * @param selectors \n * @returns \n */\nexport const resolveEls = (selectors: QueryOrElements): HTMLElement[] => {\n  if (selectors === undefined) return [];\n  if (selectors === null) return [];\n  if (Array.isArray(selectors)) return selectors as HTMLElement[];\n  if (typeof selectors === `string`) {\n    const elements = [ ...document.querySelectorAll(selectors) ]\n    return elements as HTMLElement[]\n  }\n  return [ selectors as HTMLElement ];\n}","(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.JSON5 = factory());\n}(this, (function () { 'use strict';\n\n\tfunction createCommonjsModule(fn, module) {\n\t\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n\t}\n\n\tvar _global = createCommonjsModule(function (module) {\n\t// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\n\tvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n\t  ? window : typeof self != 'undefined' && self.Math == Math ? self\n\t  // eslint-disable-next-line no-new-func\n\t  : Function('return this')();\n\tif (typeof __g == 'number') { __g = global; } // eslint-disable-line no-undef\n\t});\n\n\tvar _core = createCommonjsModule(function (module) {\n\tvar core = module.exports = { version: '2.6.5' };\n\tif (typeof __e == 'number') { __e = core; } // eslint-disable-line no-undef\n\t});\n\tvar _core_1 = _core.version;\n\n\tvar _isObject = function (it) {\n\t  return typeof it === 'object' ? it !== null : typeof it === 'function';\n\t};\n\n\tvar _anObject = function (it) {\n\t  if (!_isObject(it)) { throw TypeError(it + ' is not an object!'); }\n\t  return it;\n\t};\n\n\tvar _fails = function (exec) {\n\t  try {\n\t    return !!exec();\n\t  } catch (e) {\n\t    return true;\n\t  }\n\t};\n\n\t// Thank's IE8 for his funny defineProperty\n\tvar _descriptors = !_fails(function () {\n\t  return Object.defineProperty({}, 'a', { get: function () { return 7; } }).a != 7;\n\t});\n\n\tvar document = _global.document;\n\t// typeof document.createElement is 'object' in old IE\n\tvar is = _isObject(document) && _isObject(document.createElement);\n\tvar _domCreate = function (it) {\n\t  return is ? document.createElement(it) : {};\n\t};\n\n\tvar _ie8DomDefine = !_descriptors && !_fails(function () {\n\t  return Object.defineProperty(_domCreate('div'), 'a', { get: function () { return 7; } }).a != 7;\n\t});\n\n\t// 7.1.1 ToPrimitive(input [, PreferredType])\n\n\t// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n\t// and the second argument - flag - preferred type is a string\n\tvar _toPrimitive = function (it, S) {\n\t  if (!_isObject(it)) { return it; }\n\t  var fn, val;\n\t  if (S && typeof (fn = it.toString) == 'function' && !_isObject(val = fn.call(it))) { return val; }\n\t  if (typeof (fn = it.valueOf) == 'function' && !_isObject(val = fn.call(it))) { return val; }\n\t  if (!S && typeof (fn = it.toString) == 'function' && !_isObject(val = fn.call(it))) { return val; }\n\t  throw TypeError(\"Can't convert object to primitive value\");\n\t};\n\n\tvar dP = Object.defineProperty;\n\n\tvar f = _descriptors ? Object.defineProperty : function defineProperty(O, P, Attributes) {\n\t  _anObject(O);\n\t  P = _toPrimitive(P, true);\n\t  _anObject(Attributes);\n\t  if (_ie8DomDefine) { try {\n\t    return dP(O, P, Attributes);\n\t  } catch (e) { /* empty */ } }\n\t  if ('get' in Attributes || 'set' in Attributes) { throw TypeError('Accessors not supported!'); }\n\t  if ('value' in Attributes) { O[P] = Attributes.value; }\n\t  return O;\n\t};\n\n\tvar _objectDp = {\n\t\tf: f\n\t};\n\n\tvar _propertyDesc = function (bitmap, value) {\n\t  return {\n\t    enumerable: !(bitmap & 1),\n\t    configurable: !(bitmap & 2),\n\t    writable: !(bitmap & 4),\n\t    value: value\n\t  };\n\t};\n\n\tvar _hide = _descriptors ? function (object, key, value) {\n\t  return _objectDp.f(object, key, _propertyDesc(1, value));\n\t} : function (object, key, value) {\n\t  object[key] = value;\n\t  return object;\n\t};\n\n\tvar hasOwnProperty = {}.hasOwnProperty;\n\tvar _has = function (it, key) {\n\t  return hasOwnProperty.call(it, key);\n\t};\n\n\tvar id = 0;\n\tvar px = Math.random();\n\tvar _uid = function (key) {\n\t  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n\t};\n\n\tvar _library = false;\n\n\tvar _shared = createCommonjsModule(function (module) {\n\tvar SHARED = '__core-js_shared__';\n\tvar store = _global[SHARED] || (_global[SHARED] = {});\n\n\t(module.exports = function (key, value) {\n\t  return store[key] || (store[key] = value !== undefined ? value : {});\n\t})('versions', []).push({\n\t  version: _core.version,\n\t  mode: _library ? 'pure' : 'global',\n\t  copyright: '© 2019 Denis Pushkarev (zloirock.ru)'\n\t});\n\t});\n\n\tvar _functionToString = _shared('native-function-to-string', Function.toString);\n\n\tvar _redefine = createCommonjsModule(function (module) {\n\tvar SRC = _uid('src');\n\n\tvar TO_STRING = 'toString';\n\tvar TPL = ('' + _functionToString).split(TO_STRING);\n\n\t_core.inspectSource = function (it) {\n\t  return _functionToString.call(it);\n\t};\n\n\t(module.exports = function (O, key, val, safe) {\n\t  var isFunction = typeof val == 'function';\n\t  if (isFunction) { _has(val, 'name') || _hide(val, 'name', key); }\n\t  if (O[key] === val) { return; }\n\t  if (isFunction) { _has(val, SRC) || _hide(val, SRC, O[key] ? '' + O[key] : TPL.join(String(key))); }\n\t  if (O === _global) {\n\t    O[key] = val;\n\t  } else if (!safe) {\n\t    delete O[key];\n\t    _hide(O, key, val);\n\t  } else if (O[key]) {\n\t    O[key] = val;\n\t  } else {\n\t    _hide(O, key, val);\n\t  }\n\t// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative\n\t})(Function.prototype, TO_STRING, function toString() {\n\t  return typeof this == 'function' && this[SRC] || _functionToString.call(this);\n\t});\n\t});\n\n\tvar _aFunction = function (it) {\n\t  if (typeof it != 'function') { throw TypeError(it + ' is not a function!'); }\n\t  return it;\n\t};\n\n\t// optional / simple context binding\n\n\tvar _ctx = function (fn, that, length) {\n\t  _aFunction(fn);\n\t  if (that === undefined) { return fn; }\n\t  switch (length) {\n\t    case 1: return function (a) {\n\t      return fn.call(that, a);\n\t    };\n\t    case 2: return function (a, b) {\n\t      return fn.call(that, a, b);\n\t    };\n\t    case 3: return function (a, b, c) {\n\t      return fn.call(that, a, b, c);\n\t    };\n\t  }\n\t  return function (/* ...args */) {\n\t    return fn.apply(that, arguments);\n\t  };\n\t};\n\n\tvar PROTOTYPE = 'prototype';\n\n\tvar $export = function (type, name, source) {\n\t  var IS_FORCED = type & $export.F;\n\t  var IS_GLOBAL = type & $export.G;\n\t  var IS_STATIC = type & $export.S;\n\t  var IS_PROTO = type & $export.P;\n\t  var IS_BIND = type & $export.B;\n\t  var target = IS_GLOBAL ? _global : IS_STATIC ? _global[name] || (_global[name] = {}) : (_global[name] || {})[PROTOTYPE];\n\t  var exports = IS_GLOBAL ? _core : _core[name] || (_core[name] = {});\n\t  var expProto = exports[PROTOTYPE] || (exports[PROTOTYPE] = {});\n\t  var key, own, out, exp;\n\t  if (IS_GLOBAL) { source = name; }\n\t  for (key in source) {\n\t    // contains in native\n\t    own = !IS_FORCED && target && target[key] !== undefined;\n\t    // export native or passed\n\t    out = (own ? target : source)[key];\n\t    // bind timers to global for call from export context\n\t    exp = IS_BIND && own ? _ctx(out, _global) : IS_PROTO && typeof out == 'function' ? _ctx(Function.call, out) : out;\n\t    // extend global\n\t    if (target) { _redefine(target, key, out, type & $export.U); }\n\t    // export\n\t    if (exports[key] != out) { _hide(exports, key, exp); }\n\t    if (IS_PROTO && expProto[key] != out) { expProto[key] = out; }\n\t  }\n\t};\n\t_global.core = _core;\n\t// type bitmap\n\t$export.F = 1;   // forced\n\t$export.G = 2;   // global\n\t$export.S = 4;   // static\n\t$export.P = 8;   // proto\n\t$export.B = 16;  // bind\n\t$export.W = 32;  // wrap\n\t$export.U = 64;  // safe\n\t$export.R = 128; // real proto method for `library`\n\tvar _export = $export;\n\n\t// 7.1.4 ToInteger\n\tvar ceil = Math.ceil;\n\tvar floor = Math.floor;\n\tvar _toInteger = function (it) {\n\t  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n\t};\n\n\t// 7.2.1 RequireObjectCoercible(argument)\n\tvar _defined = function (it) {\n\t  if (it == undefined) { throw TypeError(\"Can't call method on  \" + it); }\n\t  return it;\n\t};\n\n\t// true  -> String#at\n\t// false -> String#codePointAt\n\tvar _stringAt = function (TO_STRING) {\n\t  return function (that, pos) {\n\t    var s = String(_defined(that));\n\t    var i = _toInteger(pos);\n\t    var l = s.length;\n\t    var a, b;\n\t    if (i < 0 || i >= l) { return TO_STRING ? '' : undefined; }\n\t    a = s.charCodeAt(i);\n\t    return a < 0xd800 || a > 0xdbff || i + 1 === l || (b = s.charCodeAt(i + 1)) < 0xdc00 || b > 0xdfff\n\t      ? TO_STRING ? s.charAt(i) : a\n\t      : TO_STRING ? s.slice(i, i + 2) : (a - 0xd800 << 10) + (b - 0xdc00) + 0x10000;\n\t  };\n\t};\n\n\tvar $at = _stringAt(false);\n\t_export(_export.P, 'String', {\n\t  // 21.1.3.3 String.prototype.codePointAt(pos)\n\t  codePointAt: function codePointAt(pos) {\n\t    return $at(this, pos);\n\t  }\n\t});\n\n\tvar codePointAt = _core.String.codePointAt;\n\n\tvar max = Math.max;\n\tvar min = Math.min;\n\tvar _toAbsoluteIndex = function (index, length) {\n\t  index = _toInteger(index);\n\t  return index < 0 ? max(index + length, 0) : min(index, length);\n\t};\n\n\tvar fromCharCode = String.fromCharCode;\n\tvar $fromCodePoint = String.fromCodePoint;\n\n\t// length should be 1, old FF problem\n\t_export(_export.S + _export.F * (!!$fromCodePoint && $fromCodePoint.length != 1), 'String', {\n\t  // 21.1.2.2 String.fromCodePoint(...codePoints)\n\t  fromCodePoint: function fromCodePoint(x) {\n\t    var arguments$1 = arguments;\n\t // eslint-disable-line no-unused-vars\n\t    var res = [];\n\t    var aLen = arguments.length;\n\t    var i = 0;\n\t    var code;\n\t    while (aLen > i) {\n\t      code = +arguments$1[i++];\n\t      if (_toAbsoluteIndex(code, 0x10ffff) !== code) { throw RangeError(code + ' is not a valid code point'); }\n\t      res.push(code < 0x10000\n\t        ? fromCharCode(code)\n\t        : fromCharCode(((code -= 0x10000) >> 10) + 0xd800, code % 0x400 + 0xdc00)\n\t      );\n\t    } return res.join('');\n\t  }\n\t});\n\n\tvar fromCodePoint = _core.String.fromCodePoint;\n\n\t// This is a generated file. Do not edit.\n\tvar Space_Separator = /[\\u1680\\u2000-\\u200A\\u202F\\u205F\\u3000]/;\n\tvar ID_Start = /[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u0860-\\u086A\\u08A0-\\u08B4\\u08B6-\\u08BD\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u09FC\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0AF9\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58-\\u0C5A\\u0C60\\u0C61\\u0C80\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D54-\\u0D56\\u0D5F-\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F5\\u13F8-\\u13FD\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u1884\\u1887-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1C80-\\u1C88\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312E\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FEA\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA7AE\\uA7B0-\\uA7B7\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA8FD\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB65\\uAB70-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]|\\uD800[\\uDC00-\\uDC0B\\uDC0D-\\uDC26\\uDC28-\\uDC3A\\uDC3C\\uDC3D\\uDC3F-\\uDC4D\\uDC50-\\uDC5D\\uDC80-\\uDCFA\\uDD40-\\uDD74\\uDE80-\\uDE9C\\uDEA0-\\uDED0\\uDF00-\\uDF1F\\uDF2D-\\uDF4A\\uDF50-\\uDF75\\uDF80-\\uDF9D\\uDFA0-\\uDFC3\\uDFC8-\\uDFCF\\uDFD1-\\uDFD5]|\\uD801[\\uDC00-\\uDC9D\\uDCB0-\\uDCD3\\uDCD8-\\uDCFB\\uDD00-\\uDD27\\uDD30-\\uDD63\\uDE00-\\uDF36\\uDF40-\\uDF55\\uDF60-\\uDF67]|\\uD802[\\uDC00-\\uDC05\\uDC08\\uDC0A-\\uDC35\\uDC37\\uDC38\\uDC3C\\uDC3F-\\uDC55\\uDC60-\\uDC76\\uDC80-\\uDC9E\\uDCE0-\\uDCF2\\uDCF4\\uDCF5\\uDD00-\\uDD15\\uDD20-\\uDD39\\uDD80-\\uDDB7\\uDDBE\\uDDBF\\uDE00\\uDE10-\\uDE13\\uDE15-\\uDE17\\uDE19-\\uDE33\\uDE60-\\uDE7C\\uDE80-\\uDE9C\\uDEC0-\\uDEC7\\uDEC9-\\uDEE4\\uDF00-\\uDF35\\uDF40-\\uDF55\\uDF60-\\uDF72\\uDF80-\\uDF91]|\\uD803[\\uDC00-\\uDC48\\uDC80-\\uDCB2\\uDCC0-\\uDCF2]|\\uD804[\\uDC03-\\uDC37\\uDC83-\\uDCAF\\uDCD0-\\uDCE8\\uDD03-\\uDD26\\uDD50-\\uDD72\\uDD76\\uDD83-\\uDDB2\\uDDC1-\\uDDC4\\uDDDA\\uDDDC\\uDE00-\\uDE11\\uDE13-\\uDE2B\\uDE80-\\uDE86\\uDE88\\uDE8A-\\uDE8D\\uDE8F-\\uDE9D\\uDE9F-\\uDEA8\\uDEB0-\\uDEDE\\uDF05-\\uDF0C\\uDF0F\\uDF10\\uDF13-\\uDF28\\uDF2A-\\uDF30\\uDF32\\uDF33\\uDF35-\\uDF39\\uDF3D\\uDF50\\uDF5D-\\uDF61]|\\uD805[\\uDC00-\\uDC34\\uDC47-\\uDC4A\\uDC80-\\uDCAF\\uDCC4\\uDCC5\\uDCC7\\uDD80-\\uDDAE\\uDDD8-\\uDDDB\\uDE00-\\uDE2F\\uDE44\\uDE80-\\uDEAA\\uDF00-\\uDF19]|\\uD806[\\uDCA0-\\uDCDF\\uDCFF\\uDE00\\uDE0B-\\uDE32\\uDE3A\\uDE50\\uDE5C-\\uDE83\\uDE86-\\uDE89\\uDEC0-\\uDEF8]|\\uD807[\\uDC00-\\uDC08\\uDC0A-\\uDC2E\\uDC40\\uDC72-\\uDC8F\\uDD00-\\uDD06\\uDD08\\uDD09\\uDD0B-\\uDD30\\uDD46]|\\uD808[\\uDC00-\\uDF99]|\\uD809[\\uDC00-\\uDC6E\\uDC80-\\uDD43]|[\\uD80C\\uD81C-\\uD820\\uD840-\\uD868\\uD86A-\\uD86C\\uD86F-\\uD872\\uD874-\\uD879][\\uDC00-\\uDFFF]|\\uD80D[\\uDC00-\\uDC2E]|\\uD811[\\uDC00-\\uDE46]|\\uD81A[\\uDC00-\\uDE38\\uDE40-\\uDE5E\\uDED0-\\uDEED\\uDF00-\\uDF2F\\uDF40-\\uDF43\\uDF63-\\uDF77\\uDF7D-\\uDF8F]|\\uD81B[\\uDF00-\\uDF44\\uDF50\\uDF93-\\uDF9F\\uDFE0\\uDFE1]|\\uD821[\\uDC00-\\uDFEC]|\\uD822[\\uDC00-\\uDEF2]|\\uD82C[\\uDC00-\\uDD1E\\uDD70-\\uDEFB]|\\uD82F[\\uDC00-\\uDC6A\\uDC70-\\uDC7C\\uDC80-\\uDC88\\uDC90-\\uDC99]|\\uD835[\\uDC00-\\uDC54\\uDC56-\\uDC9C\\uDC9E\\uDC9F\\uDCA2\\uDCA5\\uDCA6\\uDCA9-\\uDCAC\\uDCAE-\\uDCB9\\uDCBB\\uDCBD-\\uDCC3\\uDCC5-\\uDD05\\uDD07-\\uDD0A\\uDD0D-\\uDD14\\uDD16-\\uDD1C\\uDD1E-\\uDD39\\uDD3B-\\uDD3E\\uDD40-\\uDD44\\uDD46\\uDD4A-\\uDD50\\uDD52-\\uDEA5\\uDEA8-\\uDEC0\\uDEC2-\\uDEDA\\uDEDC-\\uDEFA\\uDEFC-\\uDF14\\uDF16-\\uDF34\\uDF36-\\uDF4E\\uDF50-\\uDF6E\\uDF70-\\uDF88\\uDF8A-\\uDFA8\\uDFAA-\\uDFC2\\uDFC4-\\uDFCB]|\\uD83A[\\uDC00-\\uDCC4\\uDD00-\\uDD43]|\\uD83B[\\uDE00-\\uDE03\\uDE05-\\uDE1F\\uDE21\\uDE22\\uDE24\\uDE27\\uDE29-\\uDE32\\uDE34-\\uDE37\\uDE39\\uDE3B\\uDE42\\uDE47\\uDE49\\uDE4B\\uDE4D-\\uDE4F\\uDE51\\uDE52\\uDE54\\uDE57\\uDE59\\uDE5B\\uDE5D\\uDE5F\\uDE61\\uDE62\\uDE64\\uDE67-\\uDE6A\\uDE6C-\\uDE72\\uDE74-\\uDE77\\uDE79-\\uDE7C\\uDE7E\\uDE80-\\uDE89\\uDE8B-\\uDE9B\\uDEA1-\\uDEA3\\uDEA5-\\uDEA9\\uDEAB-\\uDEBB]|\\uD869[\\uDC00-\\uDED6\\uDF00-\\uDFFF]|\\uD86D[\\uDC00-\\uDF34\\uDF40-\\uDFFF]|\\uD86E[\\uDC00-\\uDC1D\\uDC20-\\uDFFF]|\\uD873[\\uDC00-\\uDEA1\\uDEB0-\\uDFFF]|\\uD87A[\\uDC00-\\uDFE0]|\\uD87E[\\uDC00-\\uDE1D]/;\n\tvar ID_Continue = /[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u0860-\\u086A\\u08A0-\\u08B4\\u08B6-\\u08BD\\u08D4-\\u08E1\\u08E3-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u09FC\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0AF9-\\u0AFF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58-\\u0C5A\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C80-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D00-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D54-\\u0D57\\u0D5F-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F5\\u13F8-\\u13FD\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1C80-\\u1C88\\u1CD0-\\u1CD2\\u1CD4-\\u1CF9\\u1D00-\\u1DF9\\u1DFB-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312E\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FEA\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA7AE\\uA7B0-\\uA7B7\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C5\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA8FD\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB65\\uAB70-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2F\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]|\\uD800[\\uDC00-\\uDC0B\\uDC0D-\\uDC26\\uDC28-\\uDC3A\\uDC3C\\uDC3D\\uDC3F-\\uDC4D\\uDC50-\\uDC5D\\uDC80-\\uDCFA\\uDD40-\\uDD74\\uDDFD\\uDE80-\\uDE9C\\uDEA0-\\uDED0\\uDEE0\\uDF00-\\uDF1F\\uDF2D-\\uDF4A\\uDF50-\\uDF7A\\uDF80-\\uDF9D\\uDFA0-\\uDFC3\\uDFC8-\\uDFCF\\uDFD1-\\uDFD5]|\\uD801[\\uDC00-\\uDC9D\\uDCA0-\\uDCA9\\uDCB0-\\uDCD3\\uDCD8-\\uDCFB\\uDD00-\\uDD27\\uDD30-\\uDD63\\uDE00-\\uDF36\\uDF40-\\uDF55\\uDF60-\\uDF67]|\\uD802[\\uDC00-\\uDC05\\uDC08\\uDC0A-\\uDC35\\uDC37\\uDC38\\uDC3C\\uDC3F-\\uDC55\\uDC60-\\uDC76\\uDC80-\\uDC9E\\uDCE0-\\uDCF2\\uDCF4\\uDCF5\\uDD00-\\uDD15\\uDD20-\\uDD39\\uDD80-\\uDDB7\\uDDBE\\uDDBF\\uDE00-\\uDE03\\uDE05\\uDE06\\uDE0C-\\uDE13\\uDE15-\\uDE17\\uDE19-\\uDE33\\uDE38-\\uDE3A\\uDE3F\\uDE60-\\uDE7C\\uDE80-\\uDE9C\\uDEC0-\\uDEC7\\uDEC9-\\uDEE6\\uDF00-\\uDF35\\uDF40-\\uDF55\\uDF60-\\uDF72\\uDF80-\\uDF91]|\\uD803[\\uDC00-\\uDC48\\uDC80-\\uDCB2\\uDCC0-\\uDCF2]|\\uD804[\\uDC00-\\uDC46\\uDC66-\\uDC6F\\uDC7F-\\uDCBA\\uDCD0-\\uDCE8\\uDCF0-\\uDCF9\\uDD00-\\uDD34\\uDD36-\\uDD3F\\uDD50-\\uDD73\\uDD76\\uDD80-\\uDDC4\\uDDCA-\\uDDCC\\uDDD0-\\uDDDA\\uDDDC\\uDE00-\\uDE11\\uDE13-\\uDE37\\uDE3E\\uDE80-\\uDE86\\uDE88\\uDE8A-\\uDE8D\\uDE8F-\\uDE9D\\uDE9F-\\uDEA8\\uDEB0-\\uDEEA\\uDEF0-\\uDEF9\\uDF00-\\uDF03\\uDF05-\\uDF0C\\uDF0F\\uDF10\\uDF13-\\uDF28\\uDF2A-\\uDF30\\uDF32\\uDF33\\uDF35-\\uDF39\\uDF3C-\\uDF44\\uDF47\\uDF48\\uDF4B-\\uDF4D\\uDF50\\uDF57\\uDF5D-\\uDF63\\uDF66-\\uDF6C\\uDF70-\\uDF74]|\\uD805[\\uDC00-\\uDC4A\\uDC50-\\uDC59\\uDC80-\\uDCC5\\uDCC7\\uDCD0-\\uDCD9\\uDD80-\\uDDB5\\uDDB8-\\uDDC0\\uDDD8-\\uDDDD\\uDE00-\\uDE40\\uDE44\\uDE50-\\uDE59\\uDE80-\\uDEB7\\uDEC0-\\uDEC9\\uDF00-\\uDF19\\uDF1D-\\uDF2B\\uDF30-\\uDF39]|\\uD806[\\uDCA0-\\uDCE9\\uDCFF\\uDE00-\\uDE3E\\uDE47\\uDE50-\\uDE83\\uDE86-\\uDE99\\uDEC0-\\uDEF8]|\\uD807[\\uDC00-\\uDC08\\uDC0A-\\uDC36\\uDC38-\\uDC40\\uDC50-\\uDC59\\uDC72-\\uDC8F\\uDC92-\\uDCA7\\uDCA9-\\uDCB6\\uDD00-\\uDD06\\uDD08\\uDD09\\uDD0B-\\uDD36\\uDD3A\\uDD3C\\uDD3D\\uDD3F-\\uDD47\\uDD50-\\uDD59]|\\uD808[\\uDC00-\\uDF99]|\\uD809[\\uDC00-\\uDC6E\\uDC80-\\uDD43]|[\\uD80C\\uD81C-\\uD820\\uD840-\\uD868\\uD86A-\\uD86C\\uD86F-\\uD872\\uD874-\\uD879][\\uDC00-\\uDFFF]|\\uD80D[\\uDC00-\\uDC2E]|\\uD811[\\uDC00-\\uDE46]|\\uD81A[\\uDC00-\\uDE38\\uDE40-\\uDE5E\\uDE60-\\uDE69\\uDED0-\\uDEED\\uDEF0-\\uDEF4\\uDF00-\\uDF36\\uDF40-\\uDF43\\uDF50-\\uDF59\\uDF63-\\uDF77\\uDF7D-\\uDF8F]|\\uD81B[\\uDF00-\\uDF44\\uDF50-\\uDF7E\\uDF8F-\\uDF9F\\uDFE0\\uDFE1]|\\uD821[\\uDC00-\\uDFEC]|\\uD822[\\uDC00-\\uDEF2]|\\uD82C[\\uDC00-\\uDD1E\\uDD70-\\uDEFB]|\\uD82F[\\uDC00-\\uDC6A\\uDC70-\\uDC7C\\uDC80-\\uDC88\\uDC90-\\uDC99\\uDC9D\\uDC9E]|\\uD834[\\uDD65-\\uDD69\\uDD6D-\\uDD72\\uDD7B-\\uDD82\\uDD85-\\uDD8B\\uDDAA-\\uDDAD\\uDE42-\\uDE44]|\\uD835[\\uDC00-\\uDC54\\uDC56-\\uDC9C\\uDC9E\\uDC9F\\uDCA2\\uDCA5\\uDCA6\\uDCA9-\\uDCAC\\uDCAE-\\uDCB9\\uDCBB\\uDCBD-\\uDCC3\\uDCC5-\\uDD05\\uDD07-\\uDD0A\\uDD0D-\\uDD14\\uDD16-\\uDD1C\\uDD1E-\\uDD39\\uDD3B-\\uDD3E\\uDD40-\\uDD44\\uDD46\\uDD4A-\\uDD50\\uDD52-\\uDEA5\\uDEA8-\\uDEC0\\uDEC2-\\uDEDA\\uDEDC-\\uDEFA\\uDEFC-\\uDF14\\uDF16-\\uDF34\\uDF36-\\uDF4E\\uDF50-\\uDF6E\\uDF70-\\uDF88\\uDF8A-\\uDFA8\\uDFAA-\\uDFC2\\uDFC4-\\uDFCB\\uDFCE-\\uDFFF]|\\uD836[\\uDE00-\\uDE36\\uDE3B-\\uDE6C\\uDE75\\uDE84\\uDE9B-\\uDE9F\\uDEA1-\\uDEAF]|\\uD838[\\uDC00-\\uDC06\\uDC08-\\uDC18\\uDC1B-\\uDC21\\uDC23\\uDC24\\uDC26-\\uDC2A]|\\uD83A[\\uDC00-\\uDCC4\\uDCD0-\\uDCD6\\uDD00-\\uDD4A\\uDD50-\\uDD59]|\\uD83B[\\uDE00-\\uDE03\\uDE05-\\uDE1F\\uDE21\\uDE22\\uDE24\\uDE27\\uDE29-\\uDE32\\uDE34-\\uDE37\\uDE39\\uDE3B\\uDE42\\uDE47\\uDE49\\uDE4B\\uDE4D-\\uDE4F\\uDE51\\uDE52\\uDE54\\uDE57\\uDE59\\uDE5B\\uDE5D\\uDE5F\\uDE61\\uDE62\\uDE64\\uDE67-\\uDE6A\\uDE6C-\\uDE72\\uDE74-\\uDE77\\uDE79-\\uDE7C\\uDE7E\\uDE80-\\uDE89\\uDE8B-\\uDE9B\\uDEA1-\\uDEA3\\uDEA5-\\uDEA9\\uDEAB-\\uDEBB]|\\uD869[\\uDC00-\\uDED6\\uDF00-\\uDFFF]|\\uD86D[\\uDC00-\\uDF34\\uDF40-\\uDFFF]|\\uD86E[\\uDC00-\\uDC1D\\uDC20-\\uDFFF]|\\uD873[\\uDC00-\\uDEA1\\uDEB0-\\uDFFF]|\\uD87A[\\uDC00-\\uDFE0]|\\uD87E[\\uDC00-\\uDE1D]|\\uDB40[\\uDD00-\\uDDEF]/;\n\n\tvar unicode = {\n\t\tSpace_Separator: Space_Separator,\n\t\tID_Start: ID_Start,\n\t\tID_Continue: ID_Continue\n\t};\n\n\tvar util = {\n\t    isSpaceSeparator: function isSpaceSeparator (c) {\n\t        return typeof c === 'string' && unicode.Space_Separator.test(c)\n\t    },\n\n\t    isIdStartChar: function isIdStartChar (c) {\n\t        return typeof c === 'string' && (\n\t            (c >= 'a' && c <= 'z') ||\n\t        (c >= 'A' && c <= 'Z') ||\n\t        (c === '$') || (c === '_') ||\n\t        unicode.ID_Start.test(c)\n\t        )\n\t    },\n\n\t    isIdContinueChar: function isIdContinueChar (c) {\n\t        return typeof c === 'string' && (\n\t            (c >= 'a' && c <= 'z') ||\n\t        (c >= 'A' && c <= 'Z') ||\n\t        (c >= '0' && c <= '9') ||\n\t        (c === '$') || (c === '_') ||\n\t        (c === '\\u200C') || (c === '\\u200D') ||\n\t        unicode.ID_Continue.test(c)\n\t        )\n\t    },\n\n\t    isDigit: function isDigit (c) {\n\t        return typeof c === 'string' && /[0-9]/.test(c)\n\t    },\n\n\t    isHexDigit: function isHexDigit (c) {\n\t        return typeof c === 'string' && /[0-9A-Fa-f]/.test(c)\n\t    },\n\t};\n\n\tvar source;\n\tvar parseState;\n\tvar stack;\n\tvar pos;\n\tvar line;\n\tvar column;\n\tvar token;\n\tvar key;\n\tvar root;\n\n\tvar parse = function parse (text, reviver) {\n\t    source = String(text);\n\t    parseState = 'start';\n\t    stack = [];\n\t    pos = 0;\n\t    line = 1;\n\t    column = 0;\n\t    token = undefined;\n\t    key = undefined;\n\t    root = undefined;\n\n\t    do {\n\t        token = lex();\n\n\t        // This code is unreachable.\n\t        // if (!parseStates[parseState]) {\n\t        //     throw invalidParseState()\n\t        // }\n\n\t        parseStates[parseState]();\n\t    } while (token.type !== 'eof')\n\n\t    if (typeof reviver === 'function') {\n\t        return internalize({'': root}, '', reviver)\n\t    }\n\n\t    return root\n\t};\n\n\tfunction internalize (holder, name, reviver) {\n\t    var value = holder[name];\n\t    if (value != null && typeof value === 'object') {\n\t        if (Array.isArray(value)) {\n\t            for (var i = 0; i < value.length; i++) {\n\t                var key = String(i);\n\t                var replacement = internalize(value, key, reviver);\n\t                if (replacement === undefined) {\n\t                    delete value[key];\n\t                } else {\n\t                    Object.defineProperty(value, key, {\n\t                        value: replacement,\n\t                        writable: true,\n\t                        enumerable: true,\n\t                        configurable: true,\n\t                    });\n\t                }\n\t            }\n\t        } else {\n\t            for (var key$1 in value) {\n\t                var replacement$1 = internalize(value, key$1, reviver);\n\t                if (replacement$1 === undefined) {\n\t                    delete value[key$1];\n\t                } else {\n\t                    Object.defineProperty(value, key$1, {\n\t                        value: replacement$1,\n\t                        writable: true,\n\t                        enumerable: true,\n\t                        configurable: true,\n\t                    });\n\t                }\n\t            }\n\t        }\n\t    }\n\n\t    return reviver.call(holder, name, value)\n\t}\n\n\tvar lexState;\n\tvar buffer;\n\tvar doubleQuote;\n\tvar sign;\n\tvar c;\n\n\tfunction lex () {\n\t    lexState = 'default';\n\t    buffer = '';\n\t    doubleQuote = false;\n\t    sign = 1;\n\n\t    for (;;) {\n\t        c = peek();\n\n\t        // This code is unreachable.\n\t        // if (!lexStates[lexState]) {\n\t        //     throw invalidLexState(lexState)\n\t        // }\n\n\t        var token = lexStates[lexState]();\n\t        if (token) {\n\t            return token\n\t        }\n\t    }\n\t}\n\n\tfunction peek () {\n\t    if (source[pos]) {\n\t        return String.fromCodePoint(source.codePointAt(pos))\n\t    }\n\t}\n\n\tfunction read () {\n\t    var c = peek();\n\n\t    if (c === '\\n') {\n\t        line++;\n\t        column = 0;\n\t    } else if (c) {\n\t        column += c.length;\n\t    } else {\n\t        column++;\n\t    }\n\n\t    if (c) {\n\t        pos += c.length;\n\t    }\n\n\t    return c\n\t}\n\n\tvar lexStates = {\n\t    default: function default$1 () {\n\t        switch (c) {\n\t        case '\\t':\n\t        case '\\v':\n\t        case '\\f':\n\t        case ' ':\n\t        case '\\u00A0':\n\t        case '\\uFEFF':\n\t        case '\\n':\n\t        case '\\r':\n\t        case '\\u2028':\n\t        case '\\u2029':\n\t            read();\n\t            return\n\n\t        case '/':\n\t            read();\n\t            lexState = 'comment';\n\t            return\n\n\t        case undefined:\n\t            read();\n\t            return newToken('eof')\n\t        }\n\n\t        if (util.isSpaceSeparator(c)) {\n\t            read();\n\t            return\n\t        }\n\n\t        // This code is unreachable.\n\t        // if (!lexStates[parseState]) {\n\t        //     throw invalidLexState(parseState)\n\t        // }\n\n\t        return lexStates[parseState]()\n\t    },\n\n\t    comment: function comment () {\n\t        switch (c) {\n\t        case '*':\n\t            read();\n\t            lexState = 'multiLineComment';\n\t            return\n\n\t        case '/':\n\t            read();\n\t            lexState = 'singleLineComment';\n\t            return\n\t        }\n\n\t        throw invalidChar(read())\n\t    },\n\n\t    multiLineComment: function multiLineComment () {\n\t        switch (c) {\n\t        case '*':\n\t            read();\n\t            lexState = 'multiLineCommentAsterisk';\n\t            return\n\n\t        case undefined:\n\t            throw invalidChar(read())\n\t        }\n\n\t        read();\n\t    },\n\n\t    multiLineCommentAsterisk: function multiLineCommentAsterisk () {\n\t        switch (c) {\n\t        case '*':\n\t            read();\n\t            return\n\n\t        case '/':\n\t            read();\n\t            lexState = 'default';\n\t            return\n\n\t        case undefined:\n\t            throw invalidChar(read())\n\t        }\n\n\t        read();\n\t        lexState = 'multiLineComment';\n\t    },\n\n\t    singleLineComment: function singleLineComment () {\n\t        switch (c) {\n\t        case '\\n':\n\t        case '\\r':\n\t        case '\\u2028':\n\t        case '\\u2029':\n\t            read();\n\t            lexState = 'default';\n\t            return\n\n\t        case undefined:\n\t            read();\n\t            return newToken('eof')\n\t        }\n\n\t        read();\n\t    },\n\n\t    value: function value () {\n\t        switch (c) {\n\t        case '{':\n\t        case '[':\n\t            return newToken('punctuator', read())\n\n\t        case 'n':\n\t            read();\n\t            literal('ull');\n\t            return newToken('null', null)\n\n\t        case 't':\n\t            read();\n\t            literal('rue');\n\t            return newToken('boolean', true)\n\n\t        case 'f':\n\t            read();\n\t            literal('alse');\n\t            return newToken('boolean', false)\n\n\t        case '-':\n\t        case '+':\n\t            if (read() === '-') {\n\t                sign = -1;\n\t            }\n\n\t            lexState = 'sign';\n\t            return\n\n\t        case '.':\n\t            buffer = read();\n\t            lexState = 'decimalPointLeading';\n\t            return\n\n\t        case '0':\n\t            buffer = read();\n\t            lexState = 'zero';\n\t            return\n\n\t        case '1':\n\t        case '2':\n\t        case '3':\n\t        case '4':\n\t        case '5':\n\t        case '6':\n\t        case '7':\n\t        case '8':\n\t        case '9':\n\t            buffer = read();\n\t            lexState = 'decimalInteger';\n\t            return\n\n\t        case 'I':\n\t            read();\n\t            literal('nfinity');\n\t            return newToken('numeric', Infinity)\n\n\t        case 'N':\n\t            read();\n\t            literal('aN');\n\t            return newToken('numeric', NaN)\n\n\t        case '\"':\n\t        case \"'\":\n\t            doubleQuote = (read() === '\"');\n\t            buffer = '';\n\t            lexState = 'string';\n\t            return\n\t        }\n\n\t        throw invalidChar(read())\n\t    },\n\n\t    identifierNameStartEscape: function identifierNameStartEscape () {\n\t        if (c !== 'u') {\n\t            throw invalidChar(read())\n\t        }\n\n\t        read();\n\t        var u = unicodeEscape();\n\t        switch (u) {\n\t        case '$':\n\t        case '_':\n\t            break\n\n\t        default:\n\t            if (!util.isIdStartChar(u)) {\n\t                throw invalidIdentifier()\n\t            }\n\n\t            break\n\t        }\n\n\t        buffer += u;\n\t        lexState = 'identifierName';\n\t    },\n\n\t    identifierName: function identifierName () {\n\t        switch (c) {\n\t        case '$':\n\t        case '_':\n\t        case '\\u200C':\n\t        case '\\u200D':\n\t            buffer += read();\n\t            return\n\n\t        case '\\\\':\n\t            read();\n\t            lexState = 'identifierNameEscape';\n\t            return\n\t        }\n\n\t        if (util.isIdContinueChar(c)) {\n\t            buffer += read();\n\t            return\n\t        }\n\n\t        return newToken('identifier', buffer)\n\t    },\n\n\t    identifierNameEscape: function identifierNameEscape () {\n\t        if (c !== 'u') {\n\t            throw invalidChar(read())\n\t        }\n\n\t        read();\n\t        var u = unicodeEscape();\n\t        switch (u) {\n\t        case '$':\n\t        case '_':\n\t        case '\\u200C':\n\t        case '\\u200D':\n\t            break\n\n\t        default:\n\t            if (!util.isIdContinueChar(u)) {\n\t                throw invalidIdentifier()\n\t            }\n\n\t            break\n\t        }\n\n\t        buffer += u;\n\t        lexState = 'identifierName';\n\t    },\n\n\t    sign: function sign$1 () {\n\t        switch (c) {\n\t        case '.':\n\t            buffer = read();\n\t            lexState = 'decimalPointLeading';\n\t            return\n\n\t        case '0':\n\t            buffer = read();\n\t            lexState = 'zero';\n\t            return\n\n\t        case '1':\n\t        case '2':\n\t        case '3':\n\t        case '4':\n\t        case '5':\n\t        case '6':\n\t        case '7':\n\t        case '8':\n\t        case '9':\n\t            buffer = read();\n\t            lexState = 'decimalInteger';\n\t            return\n\n\t        case 'I':\n\t            read();\n\t            literal('nfinity');\n\t            return newToken('numeric', sign * Infinity)\n\n\t        case 'N':\n\t            read();\n\t            literal('aN');\n\t            return newToken('numeric', NaN)\n\t        }\n\n\t        throw invalidChar(read())\n\t    },\n\n\t    zero: function zero () {\n\t        switch (c) {\n\t        case '.':\n\t            buffer += read();\n\t            lexState = 'decimalPoint';\n\t            return\n\n\t        case 'e':\n\t        case 'E':\n\t            buffer += read();\n\t            lexState = 'decimalExponent';\n\t            return\n\n\t        case 'x':\n\t        case 'X':\n\t            buffer += read();\n\t            lexState = 'hexadecimal';\n\t            return\n\t        }\n\n\t        return newToken('numeric', sign * 0)\n\t    },\n\n\t    decimalInteger: function decimalInteger () {\n\t        switch (c) {\n\t        case '.':\n\t            buffer += read();\n\t            lexState = 'decimalPoint';\n\t            return\n\n\t        case 'e':\n\t        case 'E':\n\t            buffer += read();\n\t            lexState = 'decimalExponent';\n\t            return\n\t        }\n\n\t        if (util.isDigit(c)) {\n\t            buffer += read();\n\t            return\n\t        }\n\n\t        return newToken('numeric', sign * Number(buffer))\n\t    },\n\n\t    decimalPointLeading: function decimalPointLeading () {\n\t        if (util.isDigit(c)) {\n\t            buffer += read();\n\t            lexState = 'decimalFraction';\n\t            return\n\t        }\n\n\t        throw invalidChar(read())\n\t    },\n\n\t    decimalPoint: function decimalPoint () {\n\t        switch (c) {\n\t        case 'e':\n\t        case 'E':\n\t            buffer += read();\n\t            lexState = 'decimalExponent';\n\t            return\n\t        }\n\n\t        if (util.isDigit(c)) {\n\t            buffer += read();\n\t            lexState = 'decimalFraction';\n\t            return\n\t        }\n\n\t        return newToken('numeric', sign * Number(buffer))\n\t    },\n\n\t    decimalFraction: function decimalFraction () {\n\t        switch (c) {\n\t        case 'e':\n\t        case 'E':\n\t            buffer += read();\n\t            lexState = 'decimalExponent';\n\t            return\n\t        }\n\n\t        if (util.isDigit(c)) {\n\t            buffer += read();\n\t            return\n\t        }\n\n\t        return newToken('numeric', sign * Number(buffer))\n\t    },\n\n\t    decimalExponent: function decimalExponent () {\n\t        switch (c) {\n\t        case '+':\n\t        case '-':\n\t            buffer += read();\n\t            lexState = 'decimalExponentSign';\n\t            return\n\t        }\n\n\t        if (util.isDigit(c)) {\n\t            buffer += read();\n\t            lexState = 'decimalExponentInteger';\n\t            return\n\t        }\n\n\t        throw invalidChar(read())\n\t    },\n\n\t    decimalExponentSign: function decimalExponentSign () {\n\t        if (util.isDigit(c)) {\n\t            buffer += read();\n\t            lexState = 'decimalExponentInteger';\n\t            return\n\t        }\n\n\t        throw invalidChar(read())\n\t    },\n\n\t    decimalExponentInteger: function decimalExponentInteger () {\n\t        if (util.isDigit(c)) {\n\t            buffer += read();\n\t            return\n\t        }\n\n\t        return newToken('numeric', sign * Number(buffer))\n\t    },\n\n\t    hexadecimal: function hexadecimal () {\n\t        if (util.isHexDigit(c)) {\n\t            buffer += read();\n\t            lexState = 'hexadecimalInteger';\n\t            return\n\t        }\n\n\t        throw invalidChar(read())\n\t    },\n\n\t    hexadecimalInteger: function hexadecimalInteger () {\n\t        if (util.isHexDigit(c)) {\n\t            buffer += read();\n\t            return\n\t        }\n\n\t        return newToken('numeric', sign * Number(buffer))\n\t    },\n\n\t    string: function string () {\n\t        switch (c) {\n\t        case '\\\\':\n\t            read();\n\t            buffer += escape();\n\t            return\n\n\t        case '\"':\n\t            if (doubleQuote) {\n\t                read();\n\t                return newToken('string', buffer)\n\t            }\n\n\t            buffer += read();\n\t            return\n\n\t        case \"'\":\n\t            if (!doubleQuote) {\n\t                read();\n\t                return newToken('string', buffer)\n\t            }\n\n\t            buffer += read();\n\t            return\n\n\t        case '\\n':\n\t        case '\\r':\n\t            throw invalidChar(read())\n\n\t        case '\\u2028':\n\t        case '\\u2029':\n\t            separatorChar(c);\n\t            break\n\n\t        case undefined:\n\t            throw invalidChar(read())\n\t        }\n\n\t        buffer += read();\n\t    },\n\n\t    start: function start () {\n\t        switch (c) {\n\t        case '{':\n\t        case '[':\n\t            return newToken('punctuator', read())\n\n\t        // This code is unreachable since the default lexState handles eof.\n\t        // case undefined:\n\t        //     return newToken('eof')\n\t        }\n\n\t        lexState = 'value';\n\t    },\n\n\t    beforePropertyName: function beforePropertyName () {\n\t        switch (c) {\n\t        case '$':\n\t        case '_':\n\t            buffer = read();\n\t            lexState = 'identifierName';\n\t            return\n\n\t        case '\\\\':\n\t            read();\n\t            lexState = 'identifierNameStartEscape';\n\t            return\n\n\t        case '}':\n\t            return newToken('punctuator', read())\n\n\t        case '\"':\n\t        case \"'\":\n\t            doubleQuote = (read() === '\"');\n\t            lexState = 'string';\n\t            return\n\t        }\n\n\t        if (util.isIdStartChar(c)) {\n\t            buffer += read();\n\t            lexState = 'identifierName';\n\t            return\n\t        }\n\n\t        throw invalidChar(read())\n\t    },\n\n\t    afterPropertyName: function afterPropertyName () {\n\t        if (c === ':') {\n\t            return newToken('punctuator', read())\n\t        }\n\n\t        throw invalidChar(read())\n\t    },\n\n\t    beforePropertyValue: function beforePropertyValue () {\n\t        lexState = 'value';\n\t    },\n\n\t    afterPropertyValue: function afterPropertyValue () {\n\t        switch (c) {\n\t        case ',':\n\t        case '}':\n\t            return newToken('punctuator', read())\n\t        }\n\n\t        throw invalidChar(read())\n\t    },\n\n\t    beforeArrayValue: function beforeArrayValue () {\n\t        if (c === ']') {\n\t            return newToken('punctuator', read())\n\t        }\n\n\t        lexState = 'value';\n\t    },\n\n\t    afterArrayValue: function afterArrayValue () {\n\t        switch (c) {\n\t        case ',':\n\t        case ']':\n\t            return newToken('punctuator', read())\n\t        }\n\n\t        throw invalidChar(read())\n\t    },\n\n\t    end: function end () {\n\t        // This code is unreachable since it's handled by the default lexState.\n\t        // if (c === undefined) {\n\t        //     read()\n\t        //     return newToken('eof')\n\t        // }\n\n\t        throw invalidChar(read())\n\t    },\n\t};\n\n\tfunction newToken (type, value) {\n\t    return {\n\t        type: type,\n\t        value: value,\n\t        line: line,\n\t        column: column,\n\t    }\n\t}\n\n\tfunction literal (s) {\n\t    for (var i = 0, list = s; i < list.length; i += 1) {\n\t        var c = list[i];\n\n\t        var p = peek();\n\n\t        if (p !== c) {\n\t            throw invalidChar(read())\n\t        }\n\n\t        read();\n\t    }\n\t}\n\n\tfunction escape () {\n\t    var c = peek();\n\t    switch (c) {\n\t    case 'b':\n\t        read();\n\t        return '\\b'\n\n\t    case 'f':\n\t        read();\n\t        return '\\f'\n\n\t    case 'n':\n\t        read();\n\t        return '\\n'\n\n\t    case 'r':\n\t        read();\n\t        return '\\r'\n\n\t    case 't':\n\t        read();\n\t        return '\\t'\n\n\t    case 'v':\n\t        read();\n\t        return '\\v'\n\n\t    case '0':\n\t        read();\n\t        if (util.isDigit(peek())) {\n\t            throw invalidChar(read())\n\t        }\n\n\t        return '\\0'\n\n\t    case 'x':\n\t        read();\n\t        return hexEscape()\n\n\t    case 'u':\n\t        read();\n\t        return unicodeEscape()\n\n\t    case '\\n':\n\t    case '\\u2028':\n\t    case '\\u2029':\n\t        read();\n\t        return ''\n\n\t    case '\\r':\n\t        read();\n\t        if (peek() === '\\n') {\n\t            read();\n\t        }\n\n\t        return ''\n\n\t    case '1':\n\t    case '2':\n\t    case '3':\n\t    case '4':\n\t    case '5':\n\t    case '6':\n\t    case '7':\n\t    case '8':\n\t    case '9':\n\t        throw invalidChar(read())\n\n\t    case undefined:\n\t        throw invalidChar(read())\n\t    }\n\n\t    return read()\n\t}\n\n\tfunction hexEscape () {\n\t    var buffer = '';\n\t    var c = peek();\n\n\t    if (!util.isHexDigit(c)) {\n\t        throw invalidChar(read())\n\t    }\n\n\t    buffer += read();\n\n\t    c = peek();\n\t    if (!util.isHexDigit(c)) {\n\t        throw invalidChar(read())\n\t    }\n\n\t    buffer += read();\n\n\t    return String.fromCodePoint(parseInt(buffer, 16))\n\t}\n\n\tfunction unicodeEscape () {\n\t    var buffer = '';\n\t    var count = 4;\n\n\t    while (count-- > 0) {\n\t        var c = peek();\n\t        if (!util.isHexDigit(c)) {\n\t            throw invalidChar(read())\n\t        }\n\n\t        buffer += read();\n\t    }\n\n\t    return String.fromCodePoint(parseInt(buffer, 16))\n\t}\n\n\tvar parseStates = {\n\t    start: function start () {\n\t        if (token.type === 'eof') {\n\t            throw invalidEOF()\n\t        }\n\n\t        push();\n\t    },\n\n\t    beforePropertyName: function beforePropertyName () {\n\t        switch (token.type) {\n\t        case 'identifier':\n\t        case 'string':\n\t            key = token.value;\n\t            parseState = 'afterPropertyName';\n\t            return\n\n\t        case 'punctuator':\n\t            // This code is unreachable since it's handled by the lexState.\n\t            // if (token.value !== '}') {\n\t            //     throw invalidToken()\n\t            // }\n\n\t            pop();\n\t            return\n\n\t        case 'eof':\n\t            throw invalidEOF()\n\t        }\n\n\t        // This code is unreachable since it's handled by the lexState.\n\t        // throw invalidToken()\n\t    },\n\n\t    afterPropertyName: function afterPropertyName () {\n\t        // This code is unreachable since it's handled by the lexState.\n\t        // if (token.type !== 'punctuator' || token.value !== ':') {\n\t        //     throw invalidToken()\n\t        // }\n\n\t        if (token.type === 'eof') {\n\t            throw invalidEOF()\n\t        }\n\n\t        parseState = 'beforePropertyValue';\n\t    },\n\n\t    beforePropertyValue: function beforePropertyValue () {\n\t        if (token.type === 'eof') {\n\t            throw invalidEOF()\n\t        }\n\n\t        push();\n\t    },\n\n\t    beforeArrayValue: function beforeArrayValue () {\n\t        if (token.type === 'eof') {\n\t            throw invalidEOF()\n\t        }\n\n\t        if (token.type === 'punctuator' && token.value === ']') {\n\t            pop();\n\t            return\n\t        }\n\n\t        push();\n\t    },\n\n\t    afterPropertyValue: function afterPropertyValue () {\n\t        // This code is unreachable since it's handled by the lexState.\n\t        // if (token.type !== 'punctuator') {\n\t        //     throw invalidToken()\n\t        // }\n\n\t        if (token.type === 'eof') {\n\t            throw invalidEOF()\n\t        }\n\n\t        switch (token.value) {\n\t        case ',':\n\t            parseState = 'beforePropertyName';\n\t            return\n\n\t        case '}':\n\t            pop();\n\t        }\n\n\t        // This code is unreachable since it's handled by the lexState.\n\t        // throw invalidToken()\n\t    },\n\n\t    afterArrayValue: function afterArrayValue () {\n\t        // This code is unreachable since it's handled by the lexState.\n\t        // if (token.type !== 'punctuator') {\n\t        //     throw invalidToken()\n\t        // }\n\n\t        if (token.type === 'eof') {\n\t            throw invalidEOF()\n\t        }\n\n\t        switch (token.value) {\n\t        case ',':\n\t            parseState = 'beforeArrayValue';\n\t            return\n\n\t        case ']':\n\t            pop();\n\t        }\n\n\t        // This code is unreachable since it's handled by the lexState.\n\t        // throw invalidToken()\n\t    },\n\n\t    end: function end () {\n\t        // This code is unreachable since it's handled by the lexState.\n\t        // if (token.type !== 'eof') {\n\t        //     throw invalidToken()\n\t        // }\n\t    },\n\t};\n\n\tfunction push () {\n\t    var value;\n\n\t    switch (token.type) {\n\t    case 'punctuator':\n\t        switch (token.value) {\n\t        case '{':\n\t            value = {};\n\t            break\n\n\t        case '[':\n\t            value = [];\n\t            break\n\t        }\n\n\t        break\n\n\t    case 'null':\n\t    case 'boolean':\n\t    case 'numeric':\n\t    case 'string':\n\t        value = token.value;\n\t        break\n\n\t    // This code is unreachable.\n\t    // default:\n\t    //     throw invalidToken()\n\t    }\n\n\t    if (root === undefined) {\n\t        root = value;\n\t    } else {\n\t        var parent = stack[stack.length - 1];\n\t        if (Array.isArray(parent)) {\n\t            parent.push(value);\n\t        } else {\n\t            Object.defineProperty(parent, key, {\n\t                value: value,\n\t                writable: true,\n\t                enumerable: true,\n\t                configurable: true,\n\t            });\n\t        }\n\t    }\n\n\t    if (value !== null && typeof value === 'object') {\n\t        stack.push(value);\n\n\t        if (Array.isArray(value)) {\n\t            parseState = 'beforeArrayValue';\n\t        } else {\n\t            parseState = 'beforePropertyName';\n\t        }\n\t    } else {\n\t        var current = stack[stack.length - 1];\n\t        if (current == null) {\n\t            parseState = 'end';\n\t        } else if (Array.isArray(current)) {\n\t            parseState = 'afterArrayValue';\n\t        } else {\n\t            parseState = 'afterPropertyValue';\n\t        }\n\t    }\n\t}\n\n\tfunction pop () {\n\t    stack.pop();\n\n\t    var current = stack[stack.length - 1];\n\t    if (current == null) {\n\t        parseState = 'end';\n\t    } else if (Array.isArray(current)) {\n\t        parseState = 'afterArrayValue';\n\t    } else {\n\t        parseState = 'afterPropertyValue';\n\t    }\n\t}\n\n\t// This code is unreachable.\n\t// function invalidParseState () {\n\t//     return new Error(`JSON5: invalid parse state '${parseState}'`)\n\t// }\n\n\t// This code is unreachable.\n\t// function invalidLexState (state) {\n\t//     return new Error(`JSON5: invalid lex state '${state}'`)\n\t// }\n\n\tfunction invalidChar (c) {\n\t    if (c === undefined) {\n\t        return syntaxError((\"JSON5: invalid end of input at \" + line + \":\" + column))\n\t    }\n\n\t    return syntaxError((\"JSON5: invalid character '\" + (formatChar(c)) + \"' at \" + line + \":\" + column))\n\t}\n\n\tfunction invalidEOF () {\n\t    return syntaxError((\"JSON5: invalid end of input at \" + line + \":\" + column))\n\t}\n\n\t// This code is unreachable.\n\t// function invalidToken () {\n\t//     if (token.type === 'eof') {\n\t//         return syntaxError(`JSON5: invalid end of input at ${line}:${column}`)\n\t//     }\n\n\t//     const c = String.fromCodePoint(token.value.codePointAt(0))\n\t//     return syntaxError(`JSON5: invalid character '${formatChar(c)}' at ${line}:${column}`)\n\t// }\n\n\tfunction invalidIdentifier () {\n\t    column -= 5;\n\t    return syntaxError((\"JSON5: invalid identifier character at \" + line + \":\" + column))\n\t}\n\n\tfunction separatorChar (c) {\n\t    console.warn((\"JSON5: '\" + (formatChar(c)) + \"' in strings is not valid ECMAScript; consider escaping\"));\n\t}\n\n\tfunction formatChar (c) {\n\t    var replacements = {\n\t        \"'\": \"\\\\'\",\n\t        '\"': '\\\\\"',\n\t        '\\\\': '\\\\\\\\',\n\t        '\\b': '\\\\b',\n\t        '\\f': '\\\\f',\n\t        '\\n': '\\\\n',\n\t        '\\r': '\\\\r',\n\t        '\\t': '\\\\t',\n\t        '\\v': '\\\\v',\n\t        '\\0': '\\\\0',\n\t        '\\u2028': '\\\\u2028',\n\t        '\\u2029': '\\\\u2029',\n\t    };\n\n\t    if (replacements[c]) {\n\t        return replacements[c]\n\t    }\n\n\t    if (c < ' ') {\n\t        var hexString = c.charCodeAt(0).toString(16);\n\t        return '\\\\x' + ('00' + hexString).substring(hexString.length)\n\t    }\n\n\t    return c\n\t}\n\n\tfunction syntaxError (message) {\n\t    var err = new SyntaxError(message);\n\t    err.lineNumber = line;\n\t    err.columnNumber = column;\n\t    return err\n\t}\n\n\tvar stringify = function stringify (value, replacer, space) {\n\t    var stack = [];\n\t    var indent = '';\n\t    var propertyList;\n\t    var replacerFunc;\n\t    var gap = '';\n\t    var quote;\n\n\t    if (\n\t        replacer != null &&\n\t        typeof replacer === 'object' &&\n\t        !Array.isArray(replacer)\n\t    ) {\n\t        space = replacer.space;\n\t        quote = replacer.quote;\n\t        replacer = replacer.replacer;\n\t    }\n\n\t    if (typeof replacer === 'function') {\n\t        replacerFunc = replacer;\n\t    } else if (Array.isArray(replacer)) {\n\t        propertyList = [];\n\t        for (var i = 0, list = replacer; i < list.length; i += 1) {\n\t            var v = list[i];\n\n\t            var item = (void 0);\n\n\t            if (typeof v === 'string') {\n\t                item = v;\n\t            } else if (\n\t                typeof v === 'number' ||\n\t                v instanceof String ||\n\t                v instanceof Number\n\t            ) {\n\t                item = String(v);\n\t            }\n\n\t            if (item !== undefined && propertyList.indexOf(item) < 0) {\n\t                propertyList.push(item);\n\t            }\n\t        }\n\t    }\n\n\t    if (space instanceof Number) {\n\t        space = Number(space);\n\t    } else if (space instanceof String) {\n\t        space = String(space);\n\t    }\n\n\t    if (typeof space === 'number') {\n\t        if (space > 0) {\n\t            space = Math.min(10, Math.floor(space));\n\t            gap = '          '.substr(0, space);\n\t        }\n\t    } else if (typeof space === 'string') {\n\t        gap = space.substr(0, 10);\n\t    }\n\n\t    return serializeProperty('', {'': value})\n\n\t    function serializeProperty (key, holder) {\n\t        var value = holder[key];\n\t        if (value != null) {\n\t            if (typeof value.toJSON5 === 'function') {\n\t                value = value.toJSON5(key);\n\t            } else if (typeof value.toJSON === 'function') {\n\t                value = value.toJSON(key);\n\t            }\n\t        }\n\n\t        if (replacerFunc) {\n\t            value = replacerFunc.call(holder, key, value);\n\t        }\n\n\t        if (value instanceof Number) {\n\t            value = Number(value);\n\t        } else if (value instanceof String) {\n\t            value = String(value);\n\t        } else if (value instanceof Boolean) {\n\t            value = value.valueOf();\n\t        }\n\n\t        switch (value) {\n\t        case null: return 'null'\n\t        case true: return 'true'\n\t        case false: return 'false'\n\t        }\n\n\t        if (typeof value === 'string') {\n\t            return quoteString(value, false)\n\t        }\n\n\t        if (typeof value === 'number') {\n\t            return String(value)\n\t        }\n\n\t        if (typeof value === 'object') {\n\t            return Array.isArray(value) ? serializeArray(value) : serializeObject(value)\n\t        }\n\n\t        return undefined\n\t    }\n\n\t    function quoteString (value) {\n\t        var quotes = {\n\t            \"'\": 0.1,\n\t            '\"': 0.2,\n\t        };\n\n\t        var replacements = {\n\t            \"'\": \"\\\\'\",\n\t            '\"': '\\\\\"',\n\t            '\\\\': '\\\\\\\\',\n\t            '\\b': '\\\\b',\n\t            '\\f': '\\\\f',\n\t            '\\n': '\\\\n',\n\t            '\\r': '\\\\r',\n\t            '\\t': '\\\\t',\n\t            '\\v': '\\\\v',\n\t            '\\0': '\\\\0',\n\t            '\\u2028': '\\\\u2028',\n\t            '\\u2029': '\\\\u2029',\n\t        };\n\n\t        var product = '';\n\n\t        for (var i = 0; i < value.length; i++) {\n\t            var c = value[i];\n\t            switch (c) {\n\t            case \"'\":\n\t            case '\"':\n\t                quotes[c]++;\n\t                product += c;\n\t                continue\n\n\t            case '\\0':\n\t                if (util.isDigit(value[i + 1])) {\n\t                    product += '\\\\x00';\n\t                    continue\n\t                }\n\t            }\n\n\t            if (replacements[c]) {\n\t                product += replacements[c];\n\t                continue\n\t            }\n\n\t            if (c < ' ') {\n\t                var hexString = c.charCodeAt(0).toString(16);\n\t                product += '\\\\x' + ('00' + hexString).substring(hexString.length);\n\t                continue\n\t            }\n\n\t            product += c;\n\t        }\n\n\t        var quoteChar = quote || Object.keys(quotes).reduce(function (a, b) { return (quotes[a] < quotes[b]) ? a : b; });\n\n\t        product = product.replace(new RegExp(quoteChar, 'g'), replacements[quoteChar]);\n\n\t        return quoteChar + product + quoteChar\n\t    }\n\n\t    function serializeObject (value) {\n\t        if (stack.indexOf(value) >= 0) {\n\t            throw TypeError('Converting circular structure to JSON5')\n\t        }\n\n\t        stack.push(value);\n\n\t        var stepback = indent;\n\t        indent = indent + gap;\n\n\t        var keys = propertyList || Object.keys(value);\n\t        var partial = [];\n\t        for (var i = 0, list = keys; i < list.length; i += 1) {\n\t            var key = list[i];\n\n\t            var propertyString = serializeProperty(key, value);\n\t            if (propertyString !== undefined) {\n\t                var member = serializeKey(key) + ':';\n\t                if (gap !== '') {\n\t                    member += ' ';\n\t                }\n\t                member += propertyString;\n\t                partial.push(member);\n\t            }\n\t        }\n\n\t        var final;\n\t        if (partial.length === 0) {\n\t            final = '{}';\n\t        } else {\n\t            var properties;\n\t            if (gap === '') {\n\t                properties = partial.join(',');\n\t                final = '{' + properties + '}';\n\t            } else {\n\t                var separator = ',\\n' + indent;\n\t                properties = partial.join(separator);\n\t                final = '{\\n' + indent + properties + ',\\n' + stepback + '}';\n\t            }\n\t        }\n\n\t        stack.pop();\n\t        indent = stepback;\n\t        return final\n\t    }\n\n\t    function serializeKey (key) {\n\t        if (key.length === 0) {\n\t            return quoteString(key, true)\n\t        }\n\n\t        var firstChar = String.fromCodePoint(key.codePointAt(0));\n\t        if (!util.isIdStartChar(firstChar)) {\n\t            return quoteString(key, true)\n\t        }\n\n\t        for (var i = firstChar.length; i < key.length; i++) {\n\t            if (!util.isIdContinueChar(String.fromCodePoint(key.codePointAt(i)))) {\n\t                return quoteString(key, true)\n\t            }\n\t        }\n\n\t        return key\n\t    }\n\n\t    function serializeArray (value) {\n\t        if (stack.indexOf(value) >= 0) {\n\t            throw TypeError('Converting circular structure to JSON5')\n\t        }\n\n\t        stack.push(value);\n\n\t        var stepback = indent;\n\t        indent = indent + gap;\n\n\t        var partial = [];\n\t        for (var i = 0; i < value.length; i++) {\n\t            var propertyString = serializeProperty(String(i), value);\n\t            partial.push((propertyString !== undefined) ? propertyString : 'null');\n\t        }\n\n\t        var final;\n\t        if (partial.length === 0) {\n\t            final = '[]';\n\t        } else {\n\t            if (gap === '') {\n\t                var properties = partial.join(',');\n\t                final = '[' + properties + ']';\n\t            } else {\n\t                var separator = ',\\n' + indent;\n\t                var properties$1 = partial.join(separator);\n\t                final = '[\\n' + indent + properties$1 + ',\\n' + stepback + ']';\n\t            }\n\t        }\n\n\t        stack.pop();\n\t        indent = stepback;\n\t        return final\n\t    }\n\t};\n\n\tvar JSON5 = {\n\t    parse: parse,\n\t    stringify: stringify,\n\t};\n\n\tvar lib = JSON5;\n\n\tvar es5 = lib;\n\n\treturn es5;\n\n})));\n","import { round } from '@ixfx/numbers';\nimport { resolveEl as resolveElement } from './resolve-el.js';\nimport JSON5 from 'json5';\n\nexport type NumberFormattingOptions = Readonly<{\n  precision?: number\n  roundNumbers?: number\n  leftPadding?: number\n}>\n\nexport type FormattingOptions = Readonly<{\n  numbers: NumberFormattingOptions\n}>\n\nexport type DataTableOpts = FormattingOptions & {\n  readonly formatter?: DataFormatter\n  readonly objectsAsTables?: boolean\n  readonly idPrefix?: string\n};\n\nexport type DataTable<V> = {\n  update(data: V): void;\n  remove(): boolean;\n};\n\nconst padding = (v: string, options: NumberFormattingOptions): string => {\n  if (options.leftPadding) {\n    if (v.length < options.leftPadding) return '&nbsp;'.repeat(options.leftPadding - v.length) + v;\n  }\n  return v;\n}\n\nconst convertNumber = (v: number, o: NumberFormattingOptions): string => {\n  v = (o.roundNumbers !== undefined) ? round(o.roundNumbers, v) : v;\n  let asString = (o.precision !== undefined) ? v.toFixed(o.precision) : v.toString();\n  asString = padding(asString.toString(), o);\n  return asString;\n}\n\nconst toHtmlSimple = (v: any, options: FormattingOptions): string => {\n  if (v === null) return `(null)`;\n  if (v === undefined) return `(undefined)`;\n  if (typeof v === `boolean`) return v ? `true` : `false`;\n  if (typeof v === `string`) return `\"${ v }\"`;\n  if (typeof v === `number`) return convertNumber(v, options.numbers);\n  if (typeof v === `object`) return toTableSimple(v, options);\n  return JSON5.stringify(v);\n}\n\nconst toTableSimple = (v: object, options: FormattingOptions): string => {\n  let html = `<div style=\"display:grid; grid-template-columns: repeat(2, 1fr)\">`;\n  for (const entry of Object.entries(v)) {\n    const value = toHtmlSimple(entry[ 1 ], options);\n    html += `<div class=\"label\" style=\"display:table-cell\">${ entry[ 0 ] }</div>\n      <div class=\"data\" style=\"display:table-cell\">${ value }</div>`\n  }\n  html += `</div>`;\n  return html;\n}\n\n/**\n * Creates a table of data points for each object in the map\n * ```\n * const t = DataTable.fromList(parentEl, map);\n * t.update(newMap);\n * ```\n */\nexport const fromList = (\n  parentOrQuery: HTMLElement | string,\n  data: Map<string, object>\n): DataTable<Map<string, object>> => {\n  const parent = resolveElement(parentOrQuery);\n  let container: HTMLDivElement | undefined = document.createElement(\n    `DIV`\n  ) as HTMLDivElement;\n  parent.append(container);\n\n  const options: DataTableOpts = {\n    numbers: {},\n    objectsAsTables: true\n  }\n  const remove = () => {\n    if (!container) return false;\n    container.remove();\n    container = undefined;\n    return true;\n  };\n\n  const update = (data: ReadonlyMap<string, object>) => {\n    const seenTables = new Set();\n\n    for (const [ key, value ] of data) {\n      const tKey = `table-${ key }`;\n      seenTables.add(tKey);\n      let t: HTMLElement | null = parent.querySelector(`#${ tKey }`);\n      if (t === null) {\n        t = document.createElement(`table`);\n        if (!t) throw new Error(`Could not create table element`);\n        t.id = tKey;\n        parent.append(t);\n      }\n\n      updateElement(t as HTMLTableElement, value, options);\n    }\n\n    // Remove tables that aren't present in map\n\n    const tables = Array.from(parent.querySelectorAll(`table`));\n    for (const t of tables) {\n      if (!seenTables.has(t.id)) {\n        t.remove();\n      }\n    }\n  };\n\n  if (data) update(data);\n  return { update, remove };\n  // return (d: ReadonlyMap<string, object>) => {\n  //   update(d);\n  // };\n};\n\n/**\n * Format data. Return _undefined_ to signal that\n * data was not handled.\n */\nexport type DataFormatter = (data: object, path: string) => string | undefined;\n\n/**\n * Updates the given table element so each entry in the map is a\n * row in the table.\n *\n * Rows are keyed by the map key. Rows with keys not found in the map are deleted.\n * @param t Table\n * @param data Map of data\n * @param options Options\n * @returns\n */\nconst updateElement = (\n  t: HTMLTableElement,\n  data: object,\n  options: DataTableOpts\n) => {\n  const numberFormatting = options.numbers ?? {}\n  //const precision = options.precision ?? 2;\n  const idPrefix = options.idPrefix ?? ``;\n  const objectsAsTables = options.objectsAsTables ?? false;\n\n  if (data === undefined) {\n    t.innerHTML = ``;\n    return;\n  }\n  const seenRows = new Set();\n\n  for (const [ key, value ] of Object.entries(data)) {\n    const domKey = `${ idPrefix }-row-${ key }`;\n    // Keep track of keys currently in object\n    seenRows.add(domKey);\n\n    // Is there already a row for this key?\n    let rowEl = t.querySelector(`tr[data-key='${ domKey }']`);\n    if (rowEl === null) {\n      // No row, add it\n      rowEl = document.createElement(`tr`);\n      t.append(rowEl);\n      rowEl.setAttribute(`data-key`, domKey);\n\n      const keyEl = document.createElement(`td`);\n      keyEl.textContent = key;\n      keyEl.classList.add(`label`);\n      rowEl.append(keyEl);\n    }\n\n    // Is there already a cell for the value?\n    let valEl = rowEl.querySelector(`td[data-key='${ domKey }-val']`);\n\n    if (valEl === null) {\n      // No, create the cell\n      valEl = document.createElement(`td`);\n      valEl.classList.add(`data`);\n      valEl.setAttribute(`data-key`, `${ domKey }-val`);\n      rowEl.append(valEl);\n    }\n\n    // Format the value as HTML\n    let valueHTML: string | undefined;\n    if (options.formatter) {\n      valueHTML = options.formatter(value, key);\n    }\n    // If there's no formatter, or not handled...\n    if (valueHTML === undefined) {\n      if (typeof value === `object`) {\n        valueHTML = objectsAsTables ? toTableSimple(value, options) : JSON5.stringify(value);\n      } else if (typeof value === `number`) {\n        valueHTML = convertNumber(value, numberFormatting);\n        //let vv = (options.roundNumbers) ? round(options.roundNumbers, value) : value;\n        //let vvStr = vv.toFixed(precision);\n        //valueHTML = padding(vvStr, options);\n      } else if (typeof value === `boolean`) {\n        valueHTML = value ? `true` : `false`;\n      } else if (typeof value === `string`) {\n        valueHTML = `\"${ value }\"`;\n      } else {\n        valueHTML = JSON.stringify(value);\n      }\n    }\n\n    // Set the cell value\n    (valEl as HTMLElement).innerHTML = valueHTML;\n  }\n\n  // Remove rows that aren't present in data\n\n  const rows = Array.from(t.querySelectorAll(`tr`));\n  for (const r of rows) {\n    const key = r.getAttribute(`data-key`);\n    if (!seenRows.has(key)) {\n      r.remove();\n    }\n  }\n};\n\n/**\n * Creates a HTML table where each row is a key-value pair from `data`.\n * First column is the key, second column data.\n *\n * ```js\n * const dt = fromObject(`#hostDiv`);\n * ```\n *\n * `dt` is a function to call when you want to update data:\n *\n * ```js\n * dt({\n *  name: `Blerg`,\n *  height: 120\n * });\n * ```\n */\nexport const fromObject = (\n  parentOrQuery: HTMLElement | string,\n  data?: object,\n  opts: Partial<DataTableOpts> = {}\n): DataTable<object> => {\n\n  const parent = resolveElement(parentOrQuery);\n  const idPrefix = opts.idPrefix ?? Math.floor(Math.random() * 1000).toString();\n  const options: DataTableOpts = {\n    numbers: {},\n    objectsAsTables: true,\n    idPrefix: ``,\n    ...opts\n  }\n\n  let t: HTMLTableElement | undefined = document.createElement(`table`);\n  parent.append(t);\n\n  const remove = () => {\n    if (!t) return false;\n    t.remove();\n    t = undefined;\n    return true;\n  };\n\n  // Update already if there's initial data\n  if (data) updateElement(t, data, options);\n\n  const update = (d: object) => {\n    if (!t) throw new Error(`Table disposed`);\n    updateElement(t, d, { ...options, idPrefix });\n  };\n\n  return { remove, update };\n};\n","/**\n * Returns a point on cardinal direction, or 'center' for the middle.\n *\n * ```js\n * cardinal({x: 10, y:10, width:100, height: 20}, 'center');\n * ```\n * @param rect Rectangle\n * @param card Cardinal direction or 'center'\n * @returns Point\n */\nexport const cardinal = (rect, card) => {\n    const { x, y, width, height } = rect;\n    switch (card) {\n        case `nw`: {\n            return Object.freeze({ x, y });\n        }\n        case `n`: {\n            return Object.freeze({\n                x: x + width / 2,\n                y,\n            });\n        }\n        case `ne`: {\n            return Object.freeze({\n                x: x + width,\n                y,\n            });\n        }\n        case `sw`: {\n            return Object.freeze({ x, y: y + height });\n        }\n        case `s`: {\n            return Object.freeze({\n                x: x + width / 2,\n                y: y + height,\n            });\n        }\n        case `se`: {\n            return Object.freeze({\n                x: x + width,\n                y: y + height,\n            });\n        }\n        case `w`: {\n            return Object.freeze({ x, y: y + height / 2 });\n        }\n        case `e`: {\n            return Object.freeze({ x: x + width, y: y + height / 2 });\n        }\n        case `center`: {\n            return Object.freeze({\n                x: x + width / 2,\n                y: y + height / 2,\n            });\n        }\n        default: {\n            // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\n            throw new Error(`Unknown direction: ${card}`);\n        }\n    }\n};\n","\nimport type { Point } from '@ixfx/geometry/point';\nimport { resolveEl } from './resolve-el.js';\nimport type { RectPositioned } from '@ixfx/geometry/rect';\nimport { isPlaceholder as RectsIsPlaceholder } from '@ixfx/geometry/rect';\nimport { Placeholder as PointsPlaceholder, isPlaceholder as PointsIsPlaceholder, Empty as PointsEmpty } from '@ixfx/geometry/point';\nimport { PlaceholderPositioned as RectsPlaceholderPositioned } from '@ixfx/geometry/rect';\nimport { clamp } from '@ixfx/numbers';\n/**\n * State of drag\n */\nexport type DragState = Readonly<{\n  /**\n   * Optional data, if this was given during drag start\n   */\n  token?: object\n  /**\n   * Initial pointer position in viewport coordinates\n   */\n  initial: Point\n  /**\n   * Delta of movement from initial position\n   */\n  delta: Point\n  /**\n   * Viewport-relative current position\n   */\n  viewport: Point\n}>;\n\n/**\n * Return data for `start` function\n */\nexport type DragStart = Readonly<{\n  /**\n   * If _true_, drag start is allowed\n   */\n  allow: boolean,\n  /**\n   * Optional data to associate with drag\n   */\n  token?: object\n}>;\n\n/**\n * Return data for `progress` function\n */\nexport type DragProgress = Readonly<{\n  /**\n   * If true, aborts drag operation\n   */\n  abort?: boolean\n  /**\n   * If returned, this will be viewport coordinates\n   * to snap the drag to\n   */\n  viewport?: Point\n}>\n\nexport type DragListener = Readonly<{\n  start?: () => DragStart;\n  progress?: (state: DragState) => DragProgress;\n  abort?: (reason: string, state: DragState) => void;\n  success?: (state: DragState) => void;\n}>;\n\nexport type DragOptions = {\n  autoTranslate: boolean\n  /**\n   * If true, it's not necessary to select item first\n   */\n  quickDrag: boolean\n  fence: HTMLElement | string\n  fenceViewport: RectPositioned\n}\n\nexport const draggable = (elemOrQuery: SVGElement | HTMLElement | string, listener: DragListener, options: Partial<DragOptions> = {}) => {\n  const elem = resolveEl(elemOrQuery);\n\n  /**\n   * Viewport location at drag start\n   */\n  let initialPointerPosition = PointsPlaceholder;\n  let token: object | undefined;\n  const autoTranslate = options.autoTranslate ?? false;\n  const quickDrag = options.quickDrag ?? false;\n  const fence = options.fence ? resolveEl(options.fence) : undefined;\n  const fenceViewport = options.fenceViewport;\n  let fenceOffset = RectsPlaceholderPositioned;\n  const relativePosition = window.getComputedStyle(elem).position === `relative`;\n\n  // De-select if there's a click elsewhere\n  const onParentClick = () => {\n    const selected = elem.classList.contains(`drag-sel`);\n    if (selected) {\n      elem.classList.remove(`drag-sel`);\n    }\n  };\n\n  // Click to select\n  const onElementClick = (event: Event) => {\n    const selected = elem.classList.contains(`drag-sel`);\n    if (selected) {\n      elem.classList.remove(`drag-sel`);\n    } else {\n      elem.classList.add(`drag-sel`);\n    }\n    event.stopPropagation();\n  };\n\n  elem.ownerDocument.addEventListener(`click`, onParentClick);\n  elem.addEventListener(`click`, onElementClick);\n\n  // Remove event handlers\n  const dragCleanup = () => {\n    elem.classList.remove(`drag-progress`);\n\n    elem.ownerDocument.removeEventListener(`pointermove`, onPointerMove);\n    elem.ownerDocument.removeEventListener(`pointerup`, onPointerUp);\n    elem.ownerDocument.removeEventListener(`pointercancel`, onDragCancel);\n  };\n\n  const dispose = () => {\n    if (elem.classList.contains(`drag-progress`)) {\n      onDragCancel(undefined, `dispose`);\n    } else {\n      dragCleanup();\n    }\n    elem.ownerDocument.removeEventListener(`click`, onParentClick);\n    elem.removeEventListener(`click`, onElementClick);\n  };\n\n  const validateOffsetAndPoint = (offset: Point, x: number, y: number): [ offset: Point, viewport: Point ] => {\n    if (!RectsIsPlaceholder(fenceOffset)) {\n      offset = {\n        x: clamp(offset.x, fenceOffset.x, fenceOffset.width),\n        y: clamp(offset.y, fenceOffset.y, fenceOffset.height)\n      }\n      if (fenceViewport) {\n        x = clamp(x, fenceViewport.x, fenceViewport.x + fenceViewport.width);\n        y = clamp(y, fenceViewport.y, fenceViewport.y + fenceViewport.height);\n      }\n    }\n\n    return [ offset, { x, y } ];\n  }\n\n  // Dragging\n  let lastMoveOffset: Point = PointsEmpty;\n  const onPointerMove = (moveEvent: PointerEvent) => {\n    moveEvent.preventDefault();\n    moveEvent.stopPropagation();\n\n    const { x, y } = moveEvent;\n    let offset = PointsIsPlaceholder(initialPointerPosition)\n      ? { x: moveEvent.offsetX, y: moveEvent.offsetY }\n      : {\n        x: x - initialPointerPosition.x,\n        y: y - initialPointerPosition.y,\n      };\n\n    const r = validateOffsetAndPoint(offset, x, y);\n    offset = r[ 0 ];\n\n    const state: DragState = {\n      delta: offset,\n      initial: initialPointerPosition,\n      token,\n      viewport: r[ 1 ]\n    };\n\n    if (typeof listener.progress !== `undefined`) {\n      const p = listener.progress(state);\n      if (p.abort) { onDragCancel(undefined, `discontinued`); return; }\n      if (p.viewport) {\n        offset = {\n          x: p.viewport.x - initialPointerPosition.x,\n          y: p.viewport.y - initialPointerPosition.y\n        }\n      }\n    }\n    lastMoveOffset = offset;\n    if (autoTranslate) {\n      const offsetX = offset.x;\n      const offsetY = offset.y;\n\n      elem.style.translate = `${ offsetX }px ${ offsetY }px`;\n    }\n  };\n\n  // Done dragging\n  const onPointerUp = (upEvent: PointerEvent) => {\n    const bounds = elem.getBoundingClientRect();\n\n    dragCleanup();\n    const { x, y } = upEvent;\n    // let offset = {\n    //   x: upEvent.x - initialPointerPosition.x,\n    //   y: upEvent.y - initialPointerPosition.y,\n    // };\n\n    const r = validateOffsetAndPoint(lastMoveOffset, x, y);\n\n    const state: DragState = {\n      initial: initialPointerPosition,\n      token,\n      delta: r[ 0 ],\n      viewport: r[ 1 ]\n    };\n    if (autoTranslate) {\n      elem.style.translate = `none`;\n      if (relativePosition) {\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion, @typescript-eslint/no-non-null-asserted-optional-chain\n        const parent = elem.parentElement?.getBoundingClientRect()!;\n        elem.style.left = `${ bounds.x - parent.left }px`;\n        elem.style.top = `${ bounds.y - parent.top }px`;\n      } else {\n        elem.style.left = `${ bounds.x }px`;\n        elem.style.top = `${ bounds.y }px`;\n      }\n    }\n\n    if (typeof listener.success !== `undefined`) {\n      listener.success(state);\n    }\n  };\n\n  // Drag is cancelled\n  const onDragCancel = (\n    event: PointerEvent | MouseEvent | undefined,\n    reason = `pointercancel`\n  ) => {\n    dragCleanup();\n\n    let viewport = PointsPlaceholder;\n    if (event && `x` in event && `y` in event) {\n      viewport = { x: (event as MouseEvent).x, y: (event as MouseEvent).y }\n    }\n    const state: DragState = {\n      token,\n      initial: initialPointerPosition,\n      delta: { x: -1, y: -1 },\n      viewport\n    };\n    if (typeof listener.abort !== `undefined`) {\n      listener.abort(reason, state);\n    }\n  };\n\n  elem.addEventListener(`pointerdown`, (event) => {\n    const selected = elem.classList.contains(`drag-sel`);\n    if (!selected && !quickDrag) return;\n    const event_ = event as PointerEvent;\n    initialPointerPosition = { x: event_.x, y: event_.y };\n    const s =\n      typeof listener.start === `undefined`\n        ? { allow: true, token }\n        : listener.start();\n    if (!s.allow) return;\n\n    token = s.token;\n    if (fence) {\n      const fenceBounds = fence.getBoundingClientRect();\n      fenceOffset = {\n        x: fenceBounds.x - initialPointerPosition.x,\n        y: fenceBounds.y - initialPointerPosition.y,\n        width: fenceBounds.x + fenceBounds.width - initialPointerPosition.x,\n        height: fenceBounds.y + fenceBounds.height - initialPointerPosition.y,\n      }\n    } else if (fenceViewport) {\n      fenceOffset = {\n        x: fenceViewport.x - initialPointerPosition.x,\n        y: fenceViewport.y - initialPointerPosition.y,\n        width: (fenceViewport.width + fenceViewport.x) - initialPointerPosition.x,\n        height: (fenceViewport.height + fenceViewport.y) - initialPointerPosition.y\n      }\n    }\n    elem.classList.add(`drag-progress`);\n    elem.ownerDocument.addEventListener(`pointermove`, onPointerMove);\n    elem.ownerDocument.addEventListener(`pointerup`, onPointerUp);\n    elem.ownerDocument.addEventListener(`pointercancel`, onDragCancel);\n  });\n\n  return dispose;\n};\n","import { resolveEl } from './resolve-el.js';\n\n\n/**\n * Adds tab and shift+tab to TEXTAREA\n * @param el\n */\nexport const textAreaKeyboard = (el: HTMLTextAreaElement) => {\n  el.addEventListener(`keydown`, (event) => {\n    const elementValue = el.value;\n    const start = el.selectionStart;\n    const end = el.selectionEnd;\n\n    if (event.key === `Tab` && event.shiftKey) {\n\n      if (el.value.substring(start - 2, start) === `  `) {\n        el.value = elementValue.slice(0, Math.max(0, start - 2)) + elementValue.slice(Math.max(0, end));\n      }\n      el.selectionStart = el.selectionEnd = start - 2;\n      event.preventDefault();\n      return false;\n    } else if (event.key === `Tab`) {\n      el.value = elementValue.slice(0, Math.max(0, start)) + `  ` + elementValue.slice(Math.max(0, end));\n      el.selectionStart = el.selectionEnd = start + 2;\n      event.preventDefault();\n      return false;\n    }\n  });\n};\n\n/**\n * Quick access to <input type=\"checkbox\"> value.\n * Provide a checkbox by string id or object reference. If a callback is\n * supplied, it will be called when the checkbox changes value.\n *\n * ```\n * const opt = checkbox(`#chkMate`);\n * opt.checked; // Gets/sets\n *\n * const opt = checkbox(document.getElementById(`#chkMate`), newVal => {\n *  if (newVal) ...\n * });\n * ```\n * @param {(string | HTMLInputElement)} domIdOrEl\n * @param {(currentVal:boolean) => void} [onChanged]\n * @returns\n */\nexport const checkbox = (\n  domIdOrEl: string | HTMLInputElement,\n  onChanged?: (currentValue: boolean) => void\n) => {\n  const el = resolveEl<HTMLInputElement>(domIdOrEl);\n\n  if (onChanged) {\n    el.addEventListener(`change`, () => {\n      onChanged(el.checked);\n    });\n  }\n  return {\n    get checked(): boolean {\n      return el.checked;\n    },\n    set checked(value: boolean) {\n      el.checked = value;\n    },\n  };\n};\n\n/**\n * Numeric INPUT\n *\n * ```\n * const el = numeric(`#num`, (currentValue) => {\n *  // Called when input changes\n * })\n * ```\n *\n * Get/set value\n * ```\n * el.value = 10;\n * ```\n * @param domIdOrEl\n * @param onChanged\n * @param live If true, event handler fires based on `input` event, rather than `change`\n * @returns\n */\nexport const numeric = (\n  domIdOrEl: string | HTMLInputElement,\n  onChanged?: (currentValue: number) => void,\n  live?: boolean\n) => {\n  const el = resolveEl<HTMLInputElement>(domIdOrEl);\n  const eventName = live ? `change` : `input`;\n  if (onChanged) {\n    el.addEventListener(eventName, () => {\n      onChanged(Number.parseInt(el.value));\n    });\n  }\n  return {\n    get value(): number {\n      return Number.parseInt(el.value);\n    },\n    set value(value: number) {\n      el.value = value.toString();\n    },\n  };\n};\n\n/**\n * SELECT options\n */\nexport type SelectOpts = {\n  /**\n   * Placeholder item\n   */\n  readonly placeholderOpt?: string;\n  /**\n   * If true, a placeholder option 'Choose' is added to the list\n   */\n  readonly shouldAddChoosePlaceholder?: boolean;\n  /**\n   * Item to choose after a selection is made\n   */\n  readonly autoSelectAfterChoice?: number;\n};\n\n/**\n * Button\n *\n * ```\n * const b = button(`#myButton`, () => {\n *  console.log(`Button clicked`);\n * });\n * ```\n *\n * ```\n * b.click(); // Call the click handler\n * b.disabled = true / false;\n * ```\n * @param domQueryOrEl Query string or element instance\n * @param onClickHandler Callback when button is clicked\n * @returns\n */\nexport const button = (\n  domQueryOrEl: string | HTMLButtonElement,\n  onClickHandler?: () => void\n) => {\n  const el = resolveEl(domQueryOrEl);\n\n  const addEvent = () => {\n    if (onClickHandler) {\n      el.addEventListener(`click`, onClickHandler);\n    }\n  }\n\n  const removeEvent = () => {\n    if (onClickHandler) {\n      el.removeEventListener(`click`, onClickHandler)\n    }\n  }\n\n  addEvent();\n\n  return {\n    /**\n     * Gets text content of button\n     */\n    get title(): string | null {\n      return el.textContent;\n    },\n    /**\n     * Sets text content of button\n     */\n    set title(value: string) {\n      el.textContent = value;\n    },\n    /**\n     * Disposes the button.\n     * Removes event handler and optionally removes from document\n     * @param deleteElement \n     */\n    dispose(deleteElement = false) {\n      removeEvent();\n      if (deleteElement) el.remove();\n    },\n    /**\n     * Sets the click handler, overwriting existing.\n     * @param handler \n     */\n    onClick(handler?: () => void) {\n      removeEvent();\n      onClickHandler = handler;\n      addEvent();\n    },\n    /**\n     * Trigger onClick handler\n     */\n    click() {\n      if (onClickHandler) onClickHandler();\n    },\n    /**\n     * Sets disabled state of button\n     */\n    set disabled(value: boolean) {\n      el.disabled = value;\n    },\n    /**\n     * Gets the button element\n     */\n    get el(): HTMLButtonElement {\n      return el\n    }\n  };\n};\n\n/**\n * Creates a BUTTON element, wrapping it via {@link button} and returning it.\n * ```js\n * const b = buttonCreate(`Stop`, () => console.log(`Stop`));\n * someParent.addNode(b.el);\n * ```\n * @param title \n * @param onClick \n * @returns \n */\nexport const buttonCreate = (title: string, onClick?: () => void) => {\n  const el = document.createElement(`button`);\n  const w = button(el, onClick);\n  w.title = title;\n  return w;\n}\n\n/**\n * SELECT handler\n */\nexport type SelectHandler = {\n  /**\n   * Gets/Sets disabled\n   */\n  set disabled(value: boolean);\n\n  get disabled(): boolean;\n  /**\n   * Gets value\n   */\n  get value(): string;\n  /**\n   * Sets selected index\n   */\n  get index(): number;\n  /**\n   * _True_ if currently selected item is the placeholder\n   */\n  get isSelectedPlaceholder(): boolean;\n  /**\n   * Set options\n   * @param options Options\n   * @param preSelect Item to preselect\n   */\n  setOpts(options: readonly string[], preSelect?: string): void;\n  /**\n   * Select item by index\n   * @param index Index\n   * @param trigger If true, triggers change event\n   */\n  select(index?: number, trigger?: boolean): void;\n}\n\n/**\n * SELECT element.\n *\n * Handle changes in value:\n * ```\n * const mySelect = select(`#mySelect`, (newValue) => {\n *  console.log(`Value is now ${newValue}`);\n * });\n * ```\n *\n * Enable/disable:\n * ```\n * mySelect.disabled = true / false;\n * ```\n *\n * Get currently selected index or value:\n * ```\n * mySelect.value / mySelect.index\n * ```\n *\n * Is the currently selected value a placeholder?\n * ```\n * mySelect.isSelectedPlaceholder\n * ```\n *\n * Set list of options\n * ```\n * // Adds options, preselecting `opt2`.\n * mySelect.setOpts([`opt1`, `opt2 ...], `opt2`);\n * ```\n *\n * Select an element\n * ```\n * mySelect.select(1); // Select second item\n * mySelect.select(1, true); // If true is added, change handler fires as well\n * ```\n * @param domQueryOrEl Query (eg `#id`) or element\n * @param onChanged Callback when a selection is made\n * @param options Options\n * @return\n */\nexport const select = (\n  domQueryOrEl: string | HTMLSelectElement,\n  onChanged?: (currentValue: string) => void,\n  options: SelectOpts = {}\n): SelectHandler => {\n  const el = resolveEl(domQueryOrEl);\n  const {\n    placeholderOpt,\n    shouldAddChoosePlaceholder = false,\n    autoSelectAfterChoice = -1,\n  } = options;\n\n  const change = () => {\n    if (onChanged !== undefined) onChanged(el.value);\n    if (autoSelectAfterChoice >= 0) el.selectedIndex = autoSelectAfterChoice;\n  };\n\n  if (onChanged) {\n    el.addEventListener(`change`, (_event) => {\n      change();\n    });\n  }\n  return {\n    set disabled(value: boolean) {\n      el.disabled = value;\n    },\n    get value(): string {\n      return el.value;\n    },\n    get index(): number {\n      return el.selectedIndex;\n    },\n    get isSelectedPlaceholder(): boolean {\n      return (\n        (shouldAddChoosePlaceholder || options.placeholderOpt !== undefined) &&\n        el.selectedIndex === 0\n      );\n    },\n    setOpts(opts: string[], preSelect?: string): void {\n      el.options.length = 0;\n\n      if (shouldAddChoosePlaceholder) opts = [ `-- Choose --`, ...opts ];\n      else if (placeholderOpt !== undefined) opts = [ placeholderOpt, ...opts ];\n      let toSelect = 0;\n\n      for (const [ index, o ] of opts.entries()) {\n        const optEl = document.createElement(`option`);\n        optEl.value = o;\n        optEl.innerHTML = o;\n        if (preSelect !== undefined && o === preSelect) toSelect = index;\n        el.options.add(optEl);\n      }\n      el.selectedIndex = toSelect;\n    },\n    select(index = 0, trigger = false): void {\n      el.selectedIndex = index;\n      if (trigger && onChanged) {\n        change();\n      }\n    },\n  };\n};\n","/* eslint-disable unicorn/prevent-abbreviations */\nexport function isHtmlElement(o: any): o is HTMLElement {\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n  return (\n    typeof HTMLElement === \"object\" ? o instanceof HTMLElement : //DOM2\n      o && typeof o === \"object\" && o !== null && o.nodeType === 1 && typeof o.nodeName === \"string\"\n  );\n}","import * as Text from \"@ixfx/core/text\"\nimport { resolveEl } from \"./resolve-el.js\"\nimport { isHtmlElement } from \"./ts-util.js\";\n\n/**\n * CSS Variable\n */\nexport type CssVariable = {\n  /**\n   * CSS variable to read for the value. `--` prefix is not needed\n   */\n  variable: string\n  /**\n   * Attribute name, eg 'width' for a Canvas element.\n   */\n  attribute?: string\n  field?: string\n  /**\n   * Optional default value\n   */\n  defaultValue: string | undefined\n}\n\n/**\n * CSS Variable by id\n */\nexport type CssVariableByIdOption = CssVariable & {\n  id: string\n}\n\n/**\n * CSS variable by query\n */\nexport type CssVariableByQueryOption = CssVariable & {\n  query: string\n}\n\n/**\n * CSS variable by element reference\n */\nexport type CssVariableByObjectOption = CssVariable & {\n  object: object | object[]\n}\n\n/**\n * CSS variable option\n */\nexport type CssVariableOption = CssVariable & (CssVariableByObjectOption | CssVariableByIdOption | CssVariableByQueryOption);\n\n/**\n * Parses input in the form of: `['elementid-attribute', 'default-value']`.\n * Eg, `['indicator-fill', 'gray']` will yield:\n * ```\n * { variable: `indicator-fill`, attribute: `fill`, id: `indicator`, defaultValue: `gray` }\n * ```\n * \n * Once parsed, use {@link setFromCssVariables} to apply data.\n * \n * ```js\n * // Array of arrays is treated as a set of key-value pairs\n * const options = [ [`indicator-fill`, `gray`], [`backdrop-fill`, `whitesmoke`] ]\n * const attrs = parseCssVariablesAsAttributes(options);\n * Yields:\n * [\n *  { variable: `indicator-fill`, attribute: `fill`, id: `indicator`, defaultValue: `gray` }\n *  { variable: `backdrop-fill`, attribute: `fill`, id: `backdrop`, defaultValue: `whitesmoke` }\n * ]\n * \n * // Assign\n * setFromCssVariables(document.body, attrs);\n * ```\n * @param options \n * @returns \n */\nexport const parseCssVariablesAsAttributes = (options: (string | string[])[]): (CssVariable & CssVariableByIdOption)[] => {\n  return options.map(opt => {\n    let defaultValue;\n    // Nested array, treat second element as default value, name as first\n    if (Array.isArray(opt)) {\n      defaultValue = opt[ 1 ];\n      opt = opt[ 0 ];\n    }\n    const dash = opt.indexOf(`-`);\n    if (dash < 0) throw new Error(`Simple expression expects form of: 'elementid-attribute'`);\n    return {\n      variable: opt,\n      attribute: opt.slice(dash + 1),\n      id: opt.slice(0, dash),\n      defaultValue\n    }\n  })\n}\n\n/**\n * Reads the value of a CSS variable and assign it to HTML attributes or object field.\n * \n * ```js\n * const options = [\n *  // Set the 'width' attribute to the value of --some-css-variable to all elements with class 'blah'\n *  { query: `.blah`, variable: `some-css-variable`, attribute: `width` }\n * \n *  // Set #blah's 'size' attribute to the value of css variable '--size'\n *  { id: 'blah', variable: 'size', attribute: 'size' }\n * \n *  // Sets someEL.blah = css variable '--hue'\n *  { element: someEl, variable: `hue`, field: `blah` }\n * ]\n * \n * setFromCssVariables(document.body, ...options);\n * ```\n * \n * The first parameter is the context for which CSS variable values are fetched\n * as well as for resolving query selectors. This can usually be `document.body`.\n * @param context Context element which is needed for relative querying. Otherwise use document.body\n * @param options Details of what to do\n */\nexport const setFromCssVariables = (context: HTMLElement | string, ...options: CssVariableOption[]) => {\n  const contextEl = resolveEl(context);\n  const style = window.getComputedStyle(contextEl);\n\n  for (const opt of options) {\n    const variable = Text.afterMatch(opt.variable, `--`);\n    let v = style.getPropertyValue(`--${ variable }`);\n    if (v === null || v.length === 0) {\n      if (opt.defaultValue === undefined) { continue; }\n      else { v = opt.defaultValue; }\n    }\n\n    let query: string | undefined;\n    let els;//: SVGElement | HTMLElement | null | undefined;\n    if (`query` in opt && opt.query !== undefined) {\n      query = opt.query;\n    } else if (`id` in opt && opt.id !== undefined) {\n      query = `#${ opt.id }`;\n    } else if (`object` in opt && opt.object !== undefined) {\n      els = Array.isArray(opt.object) ? opt.object : [ opt.object ];\n    }\n    if (query === undefined) {\n      // No query\n      if (els === undefined) {\n        // If there's no query or objects, there's nothing to do\n        throw new Error(`Missing 'query', 'id' or 'object' fields`);\n      }\n    } else {\n      // Run query\n      els = [ ...contextEl.querySelectorAll(query) ] as Element[];// as SVGElement | HTMLElement | null | undefined;\n    }\n    if (els === null) continue;\n    if (els === undefined) continue;\n\n    if (opt.attribute) {\n      for (const el of els) {\n        if (isHtmlElement(el)) {\n          el.setAttribute(opt.attribute, v);\n        } else {\n          throw new Error(`Trying to set an attribute on something not a HTML element`, { cause: el });\n        }\n      }\n    } else if (opt.field) {\n      for (const el of els) {\n        if (typeof el === `object`) {\n          (el)[ opt.field ] = v;\n        } else {\n          throw new Error(`Trying to set field on something that is not an object (${ typeof el })`, { cause: el });\n        }\n      }\n    } else {\n      throw new Error(`Neither 'attribute' or 'field' to set is defined in option (${ JSON.stringify(opt) })`);\n    }\n  }\n}\n\n\n/**\n * Computes the styles for `elt` (or defaults to document.body) using `fallback`\n * as a set of default values.\n * \n * ```js\n * // Fetch styles\n * const styles = getCssVariablesWithFallback({\n *  my_var: `red` // reads CSS variable '--my-var' \n * }, element);\n * \n * // Access --my-var, or if it doesn't exist returns 'red'\n * styles.my_var;\n * ```\n * \n * Hyphen case (eg 'my-var') is a common way of delimiting words in CSS variables, but \n * can't be (elegantly) used in object properties. Instead, use '_' in the\n * object key, which is replaced with '-'.\n * \n * The leading '--' is not needed either.\n * @param fallback \n * @param elt \n * @returns \n */\nexport function getCssVariablesWithFallback<T extends Record<string, string | number>>(fallback: T, elt?: Element): T {\n  const styles = getComputedStyle(elt ?? document.body);\n  const entries = Object.entries(fallback);\n  const filledEntries = entries.map(entry => {\n    return [ entry[ 0 ], getCssVariablesFromStyles(styles, entry[ 0 ], entry[ 1 ]) ]\n  })\n  return Object.fromEntries(filledEntries) as T;\n}\n\n/**\n * Returns the value of a CSS variable. If it is no defined, returns `fallbackValue`;\n * ```js\n * // Returns the value of --fg, or 'white' otherwise\n * getCssVariable(`--fg`, `white`);\n * ```\n * \n * `--` prefix can be omitted:\n * ```js\n * getCssVariable(`fg`, `white`);\n * ```\n * @param cssVariable \n * @param fallbackValue \n * @returns \n */\nexport function getCssVariable(cssVariable: string, fallbackValue: string): string {\n  if (!cssVariable.startsWith(`--`)) cssVariable = `--${ cssVariable }`;\n  const fromCss = getComputedStyle(document.body).getPropertyValue(cssVariable).trim();\n  if (fromCss.length === 0) return fallbackValue;\n  return fromCss;\n}\n\n/**\n * Sets CSS variables using an object.\n * \n * ```js\n * const vars = {\n *  my_var: `red`,\n *  my_size: 10\n * }\n * \n * // Set to document.body\n * setCssVariables(vars);\n * \n * // Set to an element\n * setCssVariables(vars, elem);\n * \n * // Or to a CSSStyleDeclaration\n * setCssVariables(vars, styles);\n * ```\n * \n * @param variables \n * @param stylesOrEl \n */\n// eslint-disable-next-line @typescript-eslint/no-unnecessary-type-parameters\nexport function setCssVariables<T extends Record<string, string | number>>(variables: T, stylesOrEl?: CSSStyleDeclaration | HTMLElement) {\n  const styles = stylesOrEl === undefined ? document.body.style :\n    isHtmlElement(stylesOrEl) ? stylesOrEl.style : stylesOrEl;\n\n  for (const [ key, value ] of Object.entries(variables)) {\n    let variableName = key.replaceAll('_', '-');\n    if (!variableName.startsWith(`--`)) variableName = `--` + variableName;\n    styles.setProperty(variableName, value.toString());\n  }\n}\n\n/**\n * Returns a CSS variable from a CSS style declaration, or returning `fallback`.\n * ```js\n * // These will all access --my-var\n * getCssVariablesFromStyles(getComputedStyle(element), `--my-var`, `red`);\n * getCssVariablesFromStyles(getComputedStyle(element), `my-var`, `red`);\n * getCssVariablesFromStyles(getComputedStyle(element), `my_var`, `red`);\n * ```\n * @param styles \n * @param name \n * @param fallback \n * @returns \n */\nexport function getCssVariablesFromStyles<T extends string | number>(styles: CSSStyleDeclaration, name: string, fallback: T): T {\n  if (!name.startsWith(`--`)) name = `--` + name;\n  name = name.replaceAll(`_`, `-`);\n\n  const v = styles.getPropertyValue(name);\n  if (v.length === 0) {\n    return fallback;\n  }\n  if (typeof fallback === `number`) return parseFloat(v) as T;\n  if (typeof fallback === `boolean`) {\n    if (v === `true`) return (true as unknown as T);\n    else if (v === `false`) return (false as unknown as T);\n  }\n  return v as T;\n}\n","\nimport type { RectPositioned } from \"@ixfx/geometry/rect\";\nimport { resolveEl, resolveEls, type QueryOrElements } from \"./resolve-el.js\";\n\n// const tw = getComputedStyle(this.#el).borderTopWidth;\n// const bw = getComputedStyle(this.#el).borderBottomWidth;\n// const leftW = getComputedStyle(this.#el).borderLeftWidth;\n// const rightW = getComputedStyle(this.#el).borderRightWidth;\n\nexport type ComputedPixelsMap<T extends readonly (keyof CSSStyleDeclaration)[]> = Record<T[ number ], number>\n\n/**\n * Returns the value of `getBoundingClientRect` plus the width of all the borders\n * @param elOrQuery \n * @returns \n */\nexport const getBoundingClientRectWithBorder = (elOrQuery: SVGElement | HTMLElement | string): RectPositioned => {\n  let el = resolveEl(elOrQuery);\n  const size = el.getBoundingClientRect();\n  if (el instanceof SVGElement) {\n    el = el.parentElement!;\n  }\n  const border = getComputedPixels(el, `borderTopWidth`, `borderLeftWidth`, `borderRightWidth`, `borderBottomWidth`);\n\n  return {\n    x: size.x,\n    y: size.y,\n    width: size.width + border.borderLeftWidth + border.borderRightWidth,\n    height: size.height + border.borderTopWidth + border.borderBottomWidth\n  }\n}\n\n/**\n * Returns the computed measurements of CSS properties via [getComputedStyle](https://developer.mozilla.org/en-US/docs/Web/API/Window/getComputedStyle).\n * \n * ```js\n * const v = getComputedPixels(`#some-el`, `borderTopWidth`, `borderLeftWidth`);\n * v.borderTopWidth;  // number\n * b.borderLeftWidth; // number\n * ```\n * \n * Throws an error if value from `getComputedStyle` is not a string or does not end in 'px'.\n * @param elOrQuery \n * @param properties \n * @returns \n */\nexport const getComputedPixels = <T extends readonly (keyof CSSStyleDeclaration)[]>(elOrQuery: HTMLElement | string, ...properties: T): ComputedPixelsMap<T> => {\n  const s = getComputedStyle(resolveEl(elOrQuery));\n  const returnValue = {};\n  for (const property of properties) {\n    const v = s[ property ];\n    if (typeof v === `string`) {\n      if (v.endsWith(`px`)) {\n        (returnValue as any)[ property ] = Number.parseFloat(v.substring(0, v.length - 2));\n      } else {\n        throw new Error(`Property '${ String(property) }' does not end in 'px'. Value: ${ v }`);\n      }\n    } else {\n      throw new Error(`Property '${ String(property) }' is not type string. Got: ${ typeof v } Value: ${ v }`);\n    }\n  }\n  return returnValue as ComputedPixelsMap<T>;\n}\n\n\n/**\n * If `value` is _true_, the provided CSS class is added to element(s), otherwise it is removed.\n * \n * ```js\n * setClass(`#someId`, true, `activated`); // Add 'activated'\n * setClass(`#someId`, false, `activated`); // Removes 'activated'\n * ```\n * \n * @param selectors \n * @param value \n * @param cssClass \n * @returns \n */\nexport const setCssClass = (selectors: QueryOrElements, value: boolean, cssClass: string) => {\n  const elements = resolveEls(selectors);\n  if (elements.length === 0) return;\n\n  for (const element of elements) {\n    if (value) element.classList.add(cssClass);\n    else element.classList.remove(cssClass);\n  }\n};\n\n/**\n * Toggles a CSS class on all elements that match selector.\n * \n * ```js\n * setCssToggle(`span`, `activated`); // Toggles the 'activated' class on all SPAN elements\n * ```\n * \n * Uses `HTMLElement.classList.toggle`\n * @param selectors \n * @param cssClass \n * @returns \n */\nexport const setCssToggle = (selectors: QueryOrElements, cssClass: string) => {\n  const elements = resolveEls(selectors);\n  if (elements.length === 0) return;\n  for (const element of elements) {\n    element.classList.toggle(cssClass);\n  }\n}\n\n/**\n * Sets the CSS 'display' property\n * \n * ```js\n * setCssDisplay(`span`, `block`); // Sets display:block for all spans\n * ```\n * \n * @param selectors \n * @param value \n * @returns \n */\nexport const setCssDisplay = (selectors: QueryOrElements, value: string) => {\n  const elements = resolveEls(selectors);\n  if (elements.length === 0) return;\n  for (const element of elements) {\n    (element).style.display = value;\n  }\n};","import { fromObject, type FormattingOptions } from \"./data-table.js\";\n\nexport type DataDisplayOptions = FormattingOptions & {\n  theme?: `dark` | `light`\n\n}\n\n// TODO Visually show data which has changed since last update\n// TODO Click on a field to show a sparkline for it\n/**\n * Creates a simple display for data. Designed to show ixfx state data\n * \n * ```js\n * // Create once\n * const display = new DataDisplay();\n * \n * // Call .update to show state\n * display.update(state);\n * ```\n */\nexport class DataDisplay {\n\n  dataTable;\n\n  /**\n   * Constructor\n   * @param options Options\n   */\n  constructor(options: Partial<DataDisplayOptions> = {}) {\n    const theme = options.theme ?? `dark`;\n\n    const existing = document.querySelector(`#ixfx-data-display`);\n    if (existing !== null) throw new Error(`DataDisplay already loaded on this page`);\n\n    const container = document.createElement(`div`);\n    container.id = `ixfx-data-display`;\n    container.classList.add(`theme-${ theme }`);\n\n    const css = document.createElement(`style`);\n    css.textContent = `\n    #ixfx-data-display {\n      background: white;\n      color: black;\n      border: 2px solid hsl(0deg 0.61% 90%);\n      border-radius: 4px;\n      z-index: 1000;\n      opacity: 40%;\n      padding: 1em;\n      font-family: monospace;\n      position: fixed;\n      right: 1em;\n      top: 1em;\n    }\n    #ixfx-data-display.theme-dark {\n      background: black;\n      color: white;\n      border: 2px solid hsl(0deg 0.61% 10%);\n    }\n    #ixfx-data-display:hover {\n      opacity: 100%;\n    }\n    #ixfx-data-display table {\n      border-collapse: collapse;\n    }\n    #ixfx-data-display tr:not(:last-child) {\n      border-bottom: 2px solid hsl(0deg 0.61% 90%);\n    }\n    #ixfx-data-display.dark tr:not(:last-child) {\n      border-bottom: 2px solid hsl(0deg 0.61% 10%);\n    }\n    #ixfx-data-display td {\n      padding-bottom: 0.4em;\n      padding-top: 0.4em;\n    }\n    #ixfx-data-display .label {\n      color: hsl(0deg 0.61% 60%);\n      text-align: right;\n      padding-right: 0.5em;\n    }\n    #ixfx-data-display.theme-dark .label {\n      color: gray;\n    }\n    `\n\n    container.style.display = `inline-block`;\n    document.body.append(css);\n    document.body.append(container);\n\n    this.dataTable = fromObject(container, undefined, {\n      objectsAsTables: true,\n      ...options\n    });\n  }\n\n  update(data: object) {\n    this.dataTable.update(data);\n  }\n}","import { resolveEls, type QueryOrElements } from \"./resolve-el.js\";\n\nexport function setText(selectors: QueryOrElements): (value: any) => string;\nexport function setText(selectors: QueryOrElements, value?: any): string;\nexport function setText(selectors: QueryOrElements, value?: any): string | ((value: any) => string) {\n  return setProperty(`textContent`, selectors, value)\n};\n\nexport function setHtml(selectors: QueryOrElements): (value: any) => string;\nexport function setHtml(selectors: QueryOrElements, value?: any): string;\n\n/**\n * Sets the innerHTML of an element.\n * \n * ```js\n * setHtml(`#some-el`, `<b>hello</b>`);\n * ```\n * @param selectors \n * @param value \n * @returns \n */\nexport function setHtml(selectors: QueryOrElements, value?: any): string | ((value: any) => string) {\n  return setProperty(`innerHTML`, selectors, value)\n};\n\nexport function setProperty(property: string, selectors: QueryOrElements): (value: any) => string;\nexport function setProperty(property: string, selectors: QueryOrElements, value: any): string;\n\n/**\n * Sets some property on an element\n * \n * ```js\n * setProperty(`width`, `canvas`, 100); // Set the width property to 100\n * ```\n * \n * If `value` is an object, converts to JSON first.\n * @param property \n * @param selectors \n * @param value \n * @returns \n */\nexport function setProperty(property: string, selectors: QueryOrElements, value?: any): string | ((value: any) => string) {\n  let elements: HTMLElement[] = [];\n  const set = (v: any) => {\n    const typ = typeof v;\n    const vv = (typ === `string` || typ === `number` || typ === `boolean`) ? v as string :\n      JSON.stringify(v);\n\n    if (elements.length === 0) {\n      elements = resolveEls(selectors);\n    }\n    for (const element of elements) {\n      (element as any)[ property ] = vv;\n    }\n    return vv;\n  }\n  return value === undefined ? set : set(value);\n};","import { setCssClass, setCssDisplay, setCssToggle } from \"./css.js\";\nimport { resolveEl, resolveEls, type QueryOrElements } from \"./resolve-el.js\";\nimport { setHtml, setText } from \"./set-property.js\";\n\n/**\n * Wraps an element (or set of elements) with handy functions\n * for manipulation.\n */\nexport type WrappedElement = {\n  /**\n   * Sets inner text\n   * @param value\n   * @returns \n   */\n  text: (value: string | number) => string\n  /**\n   * Sets inner HTML\n   * @param value \n   * @returns \n   */\n  html: (value: string | number) => string\n  /**\n   * Sets the CSS 'display' property to `value`\n   * @param value\n   * @returns \n   */\n  cssDisplay: (value: string) => void\n  /**\n   * Adds/removes a CSS class depending on `value`\n   * @param value \n   * @param cssClass \n   * @returns \n   */\n  cssClass: (value: boolean, cssClass: string) => void\n  /**\n   * Toggles a CSS class\n   * @param cssClass \n   * @returns \n   */\n  cssToggle: (cssClass: string) => void\n  /**\n   * Gets the HTML element corresponding to original selector.\n   * If the selector returns multiple items, the first is yielded\n   * @returns \n   */\n  el: () => HTMLElement\n  /**\n   * Returns a set of HTML elements that match selector\n   * @returns \n   */\n  els: () => HTMLElement[]\n}\n\n/**\n * Returns an object with handy functions for working on/against the provided selector.\n * \n * ```js\n * const e = el(`#my-element`);\n * e.text(`hello`);           // Set the inner text of the elemenet\n * e.cssDisplay(`block`);    // Sets display:block\n * e.cssToggle(`activated`);  // Toggles the 'activated' CSS class\n * e.cssClass(true, `activated`); // Turns on the 'activated' CSS class\n * e.el();                    // Returns the HTML Element\n * ```\n * \n * The selector is only queried when created. Use {@link elRequery} to continually\n * re-query the selector before each operation. \n * \n * @param selectors \n * @returns \n */\nexport const el = (selectors: QueryOrElements): WrappedElement => {\n  const elements = resolveEls(selectors);\n  const text = setText(elements);\n  const html = setHtml(elements);\n  return {\n    text,\n    html,\n    cssDisplay: (value: string) => { setCssDisplay(elements, value); },\n    cssClass: (value: boolean, cssClass: string) => { setCssClass(elements, value, cssClass); },\n    cssToggle: (cssClass: string) => { setCssToggle(elements, cssClass); },\n    el: () => elements[ 0 ],\n    els: () => elements\n  }\n}\n\nexport const elRequery = (selectors: string): WrappedElement => ({\n  text: (value: string | number) => setText(selectors, value),\n  html: (value: string | number) => setHtml(selectors, value),\n  cssDisplay: (value: string) => { setCssDisplay(selectors, value); },\n  cssClass: (value: boolean, cssClass: string) => { setCssClass(selectors, value, cssClass); },\n  cssToggle: (cssClass: string) => { setCssToggle(selectors, cssClass); },\n  el: () => resolveEl(selectors) as HTMLElement,\n  els: () => resolveEls(selectors)\n});\n","import { intervalToMs, type Interval } from \"@ixfx/core\";\n\nexport const debounce = (\n  callback: () => void,\n  interval: Interval | undefined\n) => {\n  let timer;\n  const ms = intervalToMs(interval, 100);\n  return () => {\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n    if (timer) clearTimeout(timer);\n    timer = setTimeout(callback, ms);\n  }\n}","import { resolveEl } from \"./resolve-el.js\";\nimport { getComputedPixels } from \"./css.js\";\nimport { Rects } from \"@ixfx/geometry\";\nimport type { Rect } from \"@ixfx/geometry/rect\";\nimport { debounce } from \"./internal/debounce.js\";\nimport { intervalToMs, type Interval } from \"@ixfx/core\";\n\n/**\n * * width: use width of parent, set height based on original aspect ratio of element. Assumes parent has a determined width.\n * * height: use height of parent, set width based on original aspect ratio of element. Assumes parent has a determined height.\n * * both: use height & width of parent, so the element adopts the ratio of the parent. Be sure that parent has a width and height set.\n * * min: use the smallest dimension of parent\n * * max: use the largest dimension of parent\n */\nexport type ElementResizeLogic = `width` | `height` | `both` | `none` | `min` | `max`;\n\n/**\n * Options\n */\nexport type ElementSizerOptions<T extends HTMLElement | SVGElement> = {\n  /**\n   * @defaultValue 'none'\n   */\n  stretch?: ElementResizeLogic\n  naturalSize?: Rects.Rect\n  /**\n   * If not specified, the element's parent is used\n   */\n  containerEl?: HTMLElement | string\n  onSizeChanging: (size: Rects.Rect, el: T) => void\n  onSizeDone?: (size: Rects.Rect, el: T) => void\n\n  debounceTimeout?: Interval\n}\n\n/**\n * Consider using static methods:\n * \n * ```js\n * // Resize an <SVG> element to match viewport\n * Dom.ElementSizer.svgViewport(svg);\n * \n * // Resize canvas to match its parent\n * Dom.ElementSizer.canvasParent(canvas);\n * \n * // Resize canvas to match viewport\n * Dom.ElementSizer.canvasViewport(canvas);\n * ```\n */\nexport class ElementSizer<T extends HTMLElement | SVGElement> {\n  #stretch: ElementResizeLogic;\n  #size: Rects.Rect;\n  #naturalSize: Rects.Rect;\n  #naturalRatio: number;\n  #viewport: Rects.RectPositioned;\n  #onSizeChanging;\n  #el: T;\n  #containerEl: HTMLElement;\n  #disposed = false;\n  #resizeObservable: ResizeObserver | undefined;\n  #sizeDebounce: () => void = () => ({})\n\n  constructor(elOrQuery: T | string, options: ElementSizerOptions<T>) {\n    this.#el = resolveEl(elOrQuery);\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    this.#containerEl = options.containerEl ? resolveEl(options.containerEl) : this.#el.parentElement!;\n\n    this.#stretch = options.stretch ?? `none`;\n    this.#onSizeChanging = options.onSizeChanging;\n    this.#size = Rects.Empty;\n\n    const onSizeDone = options.onSizeDone;\n    if (typeof onSizeDone !== `undefined`) {\n      this.#sizeDebounce = debounce(() => {\n        onSizeDone(this.size, this.#el);\n      }, options.debounceTimeout);\n    }\n    let naturalSize = options.naturalSize;\n    naturalSize ??= this.#el.getBoundingClientRect();\n    this.#naturalRatio = 1;\n    this.#naturalSize = naturalSize;\n    this.setNaturalSize(naturalSize);\n    this.#viewport = Rects.EmptyPositioned;\n\n    if (this.#containerEl === document.body) {\n      this.#byViewport();\n    } else {\n      this.#byContainer();\n    }\n  }\n\n  dispose(reason?: string) {\n    if (this.#disposed) return;\n    this.#disposed = true;\n    if (this.#resizeObservable) {\n      this.#resizeObservable.disconnect();\n      this.#resizeObservable = undefined;\n    }\n  }\n\n  static canvasParent(canvasElementOrQuery: HTMLCanvasElement | string, options: ElementSizerOptions<HTMLCanvasElement>): ElementSizer<HTMLCanvasElement> {\n    const el = resolveEl<HTMLCanvasElement>(canvasElementOrQuery);\n    const er = new ElementSizer<HTMLCanvasElement>(el, {\n      ...options,\n      onSizeChanging(size, el) {\n        el.width = size.width;\n        el.height = size.height;\n        if (options.onSizeChanging) options.onSizeChanging(size, el);\n      },\n    });\n    return er;\n  }\n\n  static canvasViewport(canvasElementOrQuery: HTMLCanvasElement | string, options: { zIndex?: number } & ElementSizerOptions<HTMLCanvasElement>): ElementSizer<HTMLCanvasElement> {\n    const el = resolveEl<HTMLCanvasElement>(canvasElementOrQuery);\n    el.style.position = `absolute`;\n    el.style.zIndex = (options.zIndex ?? 0).toString();\n    el.style.left = `0px`;\n    el.style.top = `0px`;\n    const opts: ElementSizerOptions<HTMLCanvasElement> = { ...options, containerEl: document.body }\n    return this.canvasParent(canvasElementOrQuery, opts);\n  }\n\n  /**\n   * Size an SVG element to match viewport\n   * @param svg \n   * @returns \n   */\n  static svgViewport(svg: SVGElement, onSizeSet?: (size: Rects.Rect) => void): ElementSizer<SVGElement> {\n    const er = new ElementSizer<SVGElement>(svg, {\n      containerEl: document.body,\n      stretch: `both`,\n      onSizeChanging(size) {\n        svg.setAttribute(`width`, size.width.toString());\n        svg.setAttribute(`height`, size.height.toString());\n        if (onSizeSet) onSizeSet(size);\n      },\n    });\n    return er;\n  }\n\n\n  #byContainer() {\n    const c = this.#containerEl;\n    if (!c) throw new Error(`No container element`);\n\n    // Listen for resize\n    const r = new ResizeObserver((entries) => {\n      this.#onParentResize(entries);\n    });\n    r.observe(c);\n    // Get current value\n    const current = this.#computeSizeBasedOnParent(c.getBoundingClientRect());\n    this.size = current;\n\n    this.#resizeObservable = r;\n  }\n\n  #byViewport() {\n    const r = new ResizeObserver((entries) => {\n      this.#onViewportResize();\n    });\n    r.observe(document.documentElement);\n    this.#resizeObservable = r;\n    this.#onViewportResize();\n  }\n\n  #onViewportResize() {\n    this.size = { width: window.innerWidth, height: window.innerHeight };\n    this.#viewport = {\n      x: 0, y: 0,\n      ...this.size\n    };\n  }\n  /**\n   * Sets the 'natural' size of an element.\n   * This can also be specified when creating ElementSizer.\n   * @param size \n   */\n  setNaturalSize(size: Rect) {\n    this.#naturalSize = size;\n    this.#naturalRatio = size.width / size.height;\n  }\n\n  get naturalSize() {\n    return this.#naturalSize;\n  }\n\n  get viewport() {\n    return this.#viewport;\n  }\n\n  #computeSizeBasedOnParent(parentSize: Rects.Rect) {\n    let { width, height } = parentSize;\n\n    let stretch = this.#stretch;\n    if (stretch === `min`) {\n      stretch = width < height ? `width` : `height`;\n    } else if (stretch === `max`) {\n      stretch = width > height ? `width` : `height`;\n    }\n\n    if (stretch === `width`) {\n      height = width / this.#naturalRatio;\n    } else if (stretch === `height`) {\n      width = height * this.#naturalRatio;\n    }\n\n    // If we have a border, take that into account\n    if (this.#el instanceof HTMLElement) {\n      const b = getComputedPixels(this.#el, `borderTopWidth`, `borderLeftWidth`, `borderRightWidth`, `borderBottomWidth`);\n      width -= (b.borderLeftWidth + b.borderRightWidth);\n      height -= (b.borderTopWidth + b.borderBottomWidth);\n    }\n\n    return { width, height };\n  }\n\n  #onParentResize(args: ResizeObserverEntry[]) {\n    const box = args[ 0 ].contentBoxSize[ 0 ];\n    const parentSize = { width: box.inlineSize, height: box.blockSize };\n    this.size = this.#computeSizeBasedOnParent(parentSize);\n    this.#viewport = {\n      x: 0, y: 0,\n      width: parentSize.width,\n      height: parentSize.height\n    }\n  }\n\n  set size(size: Rects.Rect) {\n    Rects.guard(size, `size`);\n    this.#size = size;\n    this.#onSizeChanging(size, this.#el);\n    this.#sizeDebounce();\n  }\n\n  get size() {\n    return this.#size;\n  }\n}","import { getErrorMessage } from \"@ixfx/debug\";\n\n/**\n * Creates an error handler to show errors on-screen.\n * This is useful when testing on mobile devices that lack access to the console.\n *\n * ```js\n * const e = defaultErrorHandler();\n * ```\n *\n * Manual control:\n * ```js\n * const e = defaultErrorHandler();\n * e.show(someError);\n * e.hide();\n * ```\n * @returns\n */\nexport const defaultErrorHandler = () => {\n  let enabled = true;\n  const container = document.createElement(`div`);\n  container.style.color = `black`;\n  container.style.border = `2px solid red`;\n  container.style.backgroundColor = `hsl(0, 80%, 90%)`;\n  container.style.padding = `1em`;\n  container.style.display = `none`;\n  container.style.top = `1em`;\n  container.style.left = `1em`;\n  container.style.position = `absolute`;\n\n  container.style.fontFamily = `monospace`;\n\n  const messageElement = document.createElement(`div`);\n  messageElement.style.maxWidth = `50vw`;\n  messageElement.style.maxHeight = `50vh`;\n  messageElement.style.overflowY = `scroll`;\n\n  container.innerHTML = `<h1>Error</h1>`;\n  container.append(messageElement);\n\n  const styleButton = (b: HTMLButtonElement) => {\n    b.style.padding = `0.3em`;\n    b.style.marginTop = `1em`;\n  };\n\n  const buttonClose = document.createElement(`button`);\n  buttonClose.textContent = `Close`;\n  buttonClose.addEventListener(`click`, () => {\n    hide();\n  });\n\n  const buttonStop = document.createElement(`button`);\n  buttonStop.textContent = `Stop displaying errors`;\n  buttonStop.addEventListener(`click`, () => {\n    enabled = false;\n    hide();\n  });\n\n  styleButton(buttonClose);\n  styleButton(buttonStop);\n\n  container.append(buttonClose);\n  container.append(buttonStop);\n  document.body.append(container);\n\n  const show = (ex: Error | string | Event) => {\n    container.style.display = `inline`;\n    messageElement.innerHTML += (ex as any).stack ? `<pre>${ (ex as any).stack }</pre>` : `<p>${ getErrorMessage(ex) }</p>`;\n  };\n\n  const hide = () => {\n    container.style.display = `none`;\n  };\n\n\n  window.onerror = (message, url, lineNo, colNo, error) => {\n    if (enabled) {\n      if (error) {\n        console.log(error);\n        show(error);\n      } else {\n        console.log(message);\n        show(message);\n      }\n    }\n  };\n\n  window.addEventListener(`unhandledrejection`, (event) => {\n    console.log(event.reason);\n    if (enabled) {\n      show(event.reason);\n    }\n  });\n  return { show, hide };\n};\n","export const addShadowCss = (\n  parentEl: Readonly<HTMLElement>,\n  styles: string\n): ShadowRoot => {\n  const styleEl = document.createElement(`style`);\n\n  //eslint-disable-next-line functional/immutable-data\n  styleEl.textContent = styles;\n  //eslint-disable-next-line functional/no-let\n  let shadowRoot;\n  if (parentEl.shadowRoot) {\n    shadowRoot = parentEl.shadowRoot;\n    //eslint-disable-next-line functional/immutable-data\n    shadowRoot.innerHTML = ``;\n  } else {\n    shadowRoot = parentEl.attachShadow({ mode: `open` });\n  }\n  shadowRoot.append(styleEl);\n  return shadowRoot;\n};\n","import { resolveEl } from './resolve-el.js';\nimport { addShadowCss } from './shadow-dom.js';\n\nexport type LogOpts = {\n  readonly reverse?: boolean;\n  readonly capacity?: number;\n  readonly timestamp?: boolean;\n  readonly collapseDuplicates?: boolean;\n  readonly monospaced?: boolean;\n  readonly minIntervalMs?: number;\n  readonly css?: string;\n};\n\nexport type Log = {\n  clear(): void;\n  error(messageOrError: unknown): void;\n  log(message?: string | object | number): HTMLElement | undefined;\n  warn(message?: string | object | number): HTMLElement | undefined;\n  append(el: HTMLElement): void;\n  dispose(): void;\n  readonly isEmpty: boolean;\n};\n\n/**\n * Allows writing to a DOM element in console.log style. Element grows in size, so use\n * something like `overflow-y: scroll` on its parent\n *\n * ```\n * const l = log(`#dataStream`); // Assumes HTML element with id `dataStream` exists\n * l.log(`Hi`);\n * l.log(); // Displays a horizontal rule\n *\n * const l = log(document.getElementById(`dataStream`), {\n *  timestamp: true,\n *  truncateEntries: 20\n * });\n * l.log(`Hi`);\n * l.error(`Some error`); // Adds class `error` to line\n * ```\n *\n * For logging high-throughput streams:\n * ```\n * // Silently drop log if it was less than 5ms since the last\n * const l = log(`#dataStream`, { minIntervalMs: 5 });\n *\n * // Only the last 100 entries are kept\n * const l = log(`#dataStream`, { capacity: 100 });\n * ```\n *\n * @param domQueryOrElement Element or id of element\n * @param opts\n */\nexport const log = (\n  domQueryOrElement: HTMLElement | string,\n  opts: LogOpts = {}\n): Log => {\n  const {\n    capacity = 0,\n    monospaced = true,\n    timestamp = false,\n    collapseDuplicates = true,\n    css = ``\n  } = opts;\n\n  let added = 0;\n  let lastLog: string | undefined;\n  let lastLogRepeats = 0;\n\n  const parentElement = resolveEl<HTMLElement>(domQueryOrElement);\n  const fontFamily = monospaced\n    ? `Consolas, \"Andale Mono WT\", \"Andale Mono\", \"Lucida Console\", \"Lucida Sans Typewriter\", \"DejaVu Sans Mono\", \"Bitstream Vera Sans Mono\", \"Liberation Mono\", Monaco, \"Courier New\", Courier, monospace`\n    : `normal`;\n  const shadowRoot = addShadowCss(\n    parentElement,\n    `\n  .log {\n    font-family: ${ fontFamily };\n    background-color: var(--code-background-color);\n    padding: var(--padding1, 0.2em);\n    overflow-y: auto;\n    height:100%;\n  }\n  .timestamp {\n    margin-right: 0.5em;\n    opacity: 0.5;\n    font-size: 70%;\n    align-self: center;\n  }\n  .line {\n    display: flex;\n    padding-bottom: 0.1em;\n    padding-top: 0.1em;\n  }\n  .line:hover {\n  \n  }\n  .error {\n    color: red;\n  }\n  .badge {\n    border: 1px solid currentColor;\n    align-self: center;\n    font-size: 70%;\n    padding-left: 0.2em;\n    padding-right: 0.2em;\n    border-radius: 1em;\n    margin-left: 0.5em;\n    margin-right: 0.5em;\n  }\n  .msg {\n    flex: 1;\n    word-break: break-word;\n  }\n  ${ css }\n  `\n  );\n\n  const el = document.createElement(`div`);\n  el.className = `log`;\n  shadowRoot.append(el);\n\n  const error = (messageOrError: string | Error) => {\n    const line = document.createElement(`div`);\n\n    if (typeof messageOrError === `string`) {\n      line.innerHTML = messageOrError;\n    } else if (messageOrError instanceof Error) {\n      const stack = messageOrError.stack;\n      line.innerHTML = stack === undefined ? messageOrError.toString() : stack.toString();\n    } else {\n      line.innerHTML = messageOrError as string;\n    }\n    line.classList.add(`error`);\n    append(line);\n    lastLog = undefined;\n    lastLogRepeats = 0;\n  };\n\n  let lastLogTime = 0;\n\n  const warn = (whatToLog: unknown = ``): HTMLElement | undefined => {\n    const element = log(whatToLog);\n    if (!element) return element;\n    element.classList.add(`warning`);\n    return element;\n  }\n  const log = (whatToLog: unknown = ``): HTMLElement | undefined => {\n    let message: string | undefined;\n    const interval = window.performance.now() - lastLogTime;\n    if (opts.minIntervalMs && interval < opts.minIntervalMs) return;\n    lastLogTime = window.performance.now();\n\n    if (typeof whatToLog === `object`) {\n      message = JSON.stringify(whatToLog);\n    } else if (whatToLog === undefined) {\n      message = `(undefined)`;\n    } else if (whatToLog === null) {\n      message = `(null)`;\n    } else if (typeof whatToLog === `number`) {\n      if (Number.isNaN(message)) message = `(NaN)`;\n      message = whatToLog.toString();\n    } else {\n      message = whatToLog as string;\n    }\n\n    if (message.length === 0) {\n      const rule = document.createElement(`hr`);\n      lastLog = undefined;\n      append(rule);\n    } else if (message === lastLog && collapseDuplicates) {\n      const lastElement = el.firstElementChild as HTMLElement;\n      let lastBadge = lastElement.querySelector(`.badge`);\n      if (lastBadge === null) {\n        lastBadge = document.createElement(`div`);\n        lastBadge.className = `badge`;\n        lastElement.insertAdjacentElement(`beforeend`, lastBadge);\n      }\n      if (lastElement !== null) {\n        lastBadge.textContent = (++lastLogRepeats).toString();\n      }\n      return lastElement;\n    } else {\n      const line = document.createElement(`div`);\n      line.textContent = message;\n      append(line);\n      lastLog = message;\n      return line;\n    }\n  };\n\n  const append = (line: HTMLElement) => {\n    if (timestamp) {\n      const wrapper = document.createElement(`div`);\n      const timestamp = document.createElement(`div`);\n      timestamp.className = `timestamp`;\n      timestamp.textContent = new Date().toLocaleTimeString();\n      wrapper.append(timestamp, line);\n      line.classList.add(`msg`);\n      wrapper.classList.add(`line`);\n      line = wrapper;\n    } else {\n      line.classList.add(`line`, `msg`);\n    }\n\n    if (opts.reverse) {\n      el.append(line);\n    } else {\n      el.insertBefore(line, el.firstChild);\n    }\n\n    if (capacity > 0 && ++added > capacity * 2) {\n      while (added > capacity) {\n        el.lastChild?.remove();\n        added--;\n      }\n    }\n\n    if (opts.reverse) {\n      // Scroll to bottom\n      el.scrollTop = el.scrollHeight;\n    }\n    lastLogRepeats = 0;\n  };\n\n  const clear = () => {\n    el.innerHTML = ``;\n    lastLog = undefined;\n    lastLogRepeats = 0;\n    added = 0;\n  };\n\n  const dispose = () => {\n    el.remove();\n  };\n\n  return {\n    error,\n    log,\n    warn,\n    append,\n    clear,\n    dispose,\n    get isEmpty() {\n      return added === 0;\n    },\n  };\n};\n","import { getErrorMessage } from '@ixfx/debug';\nimport { log, type LogOpts } from './log.js';\nimport { resolveEl } from './resolve-el.js';\nimport { afterMatch } from '@ixfx/core/text';\n\nexport type InlineConsoleOptions = LogOpts & Partial<{\n  /**\n   * If true, styling is not applied\n   */\n  witholdCss: boolean,\n  /**\n   * If provided, entries are added to this element.\n   * By default a new element, #ixfx-log is created and added\n   * to the document.\n   */\n  insertIntoEl: string | HTMLElement\n}>;\n\n/**\n * Adds an inline console to the page. A DIV is added to display log messages.\n * \n * Captures all console.log, console.warn and console.error calls, as well as unhandled exceptions.\n * \n * ```js\n * // Adds the DIV and intercepts console logs\n * inlineConsole();\n * \n * console.log(`Hello`); // message is displayed in the inline console\n * ```\n * @param options \n */\nexport const inlineConsole = (options: InlineConsoleOptions = {}) => {\n  const original = {\n    log: console.log,\n    error: console.error,\n    warn: console.warn\n  };\n  const witholdCss = options.witholdCss ?? false;\n  const insertIntoEl = options.insertIntoEl;\n\n  let logElement: HTMLElement | undefined;\n  if (insertIntoEl) {\n    logElement = resolveEl(insertIntoEl);\n  } else {\n    logElement = document.createElement(`DIV`);\n    logElement.id = `ixfx-log`;\n    document.body.prepend(logElement);\n  }\n  if (!witholdCss) {\n    logElement.style.position = `fixed`;\n    logElement.style.left = `0px`;\n    logElement.style.top = `0px`;\n    logElement.style.pointerEvents = `none`;\n    logElement.style.display = `none`;\n  }\n\n  const logger = log(logElement, options);\n\n  const visibility = (show: boolean) => {\n    logElement.style.display = show ? `block` : `none`;\n  }\n\n  console.error = (message?: any, ...optionalParameters: any[]) => {\n    logger.error(message);\n    if (optionalParameters.length > 0) {\n      logger.error(optionalParameters);\n    }\n    original.error(message, ...optionalParameters);\n    visibility(true);\n  }\n\n  console.warn = (message?: any, ...optionalParameters: any[]) => {\n    logger.warn(message);\n    if (optionalParameters.length > 0) {\n      logger.warn(optionalParameters);\n    }\n    visibility(true);\n  }\n\n  console.log = (message?: any, ...optionalParameters: any[]) => {\n    logger.log(message);\n    if (optionalParameters.length > 0) {\n      logger.log(optionalParameters);\n    }\n    original.log(message, ...optionalParameters);\n    visibility(true);\n  }\n\n  window.onerror = (event, source, lineno, _colno, error) => {\n    const abbreviatedSource = source === undefined ? `` : afterMatch(source, `/`, { fromEnd: true });\n    const eventString = getErrorMessage(error);\n    logger.error(eventString + ` (${ abbreviatedSource }:${ lineno })`);\n    visibility(true);\n  };\n\n  window.addEventListener('unhandledrejection', function (e) {\n    logger.error(e.reason);\n    visibility(true);\n  })\n}","import { uniqueInstances } from \"@ixfx/core\";\nexport type ElementQueryOptions = {\n  /**\n   * If true, elements are only returned once, even if that match several queries\n   */\n  ensureUnique: boolean\n}\n\n/**\n * Async iterator over DOM query strings\n * ```js\n * query(`div`); // all DIVs\n * query([`.class`, `.and-other-class`]); // All things with these two classes\n * ```\n * @param queryOrElement \n * @returns \n */\nexport async function* query(queryOrElement: string | HTMLElement | (string | HTMLElement)[] | AsyncGenerator<string | HTMLElement>, options: Partial<ElementQueryOptions> = {}): AsyncGenerator<HTMLElement> {\n\n  if (typeof queryOrElement === `string`) {\n    return query([ queryOrElement ], options);\n  } else if (typeof queryOrElement === `object` && `nodeName` in queryOrElement) {\n    return query([ queryOrElement ], options);\n  }\n\n  const ensureUnique = options ?? false;\n  const isUnique = ensureUnique ? uniqueInstances<HTMLElement>() : (_: HTMLElement) => true;\n\n  if (Array.isArray(queryOrElement)) {\n    for (const item of queryOrElement) {\n      if (typeof item === `string`) {\n        for (const element of document.querySelectorAll(item)) {\n          const elementProper = element as HTMLElement;\n          if (isUnique(elementProper)) {\n            yield elementProper;\n          }\n        }\n      } else {\n        if (isUnique(item)) {\n          yield item;\n        }\n      }\n    }\n  } else {\n    for await (const item of queryOrElement) {\n      if (typeof item === `string`) {\n        for (const element of document.querySelectorAll(item)) {\n          if (isUnique(element as HTMLElement)) {\n            yield element as HTMLElement;\n          }\n        }\n      } else {\n        if (isUnique(item)) {\n          yield item;\n        }\n      }\n    }\n  }\n}","import { shortGuid } from \"@ixfx/random\"\nimport { resolveEl } from \"./resolve-el.js\"\n\nexport type Panel<TNotifyArgs> = {\n  mount: (parentEl: HTMLElement) => void\n  dismount: () => void\n  id: string\n  label: string\n  /**\n   * Panel gets a notification\n   * @param name \n   * @param args \n   * @returns \n   */\n  notify?: (name: string, args: TNotifyArgs) => void\n}\n\nexport const tabSet = <TNotifyArgs>(options: {\n  panels: Panel<TNotifyArgs>[],\n  parent: HTMLElement | string,\n  preselectId?: string,\n  onPanelChanging?: (priorPanel: Panel<TNotifyArgs> | undefined, newPanel: Panel<TNotifyArgs> | undefined) => boolean | void,\n  onPanelChange?: (priorPanel: Panel<TNotifyArgs> | undefined, newPanel: Panel<TNotifyArgs> | undefined) => void\n}) => {\n\n  const panels = options.panels;\n  const preselectId = options.preselectId ?? panels[ 0 ].id;\n  const guid = `tabset-${ shortGuid() }`;\n  const parentEl = resolveEl(options.parent);\n  const switcher = `\n  <div class=\"ixfx-tabset\" id=\"${ guid }\">\n    <fieldset class=\"ixfx-tabset-controls\">\n    ${ panels.map(p => {\n    const panelId = `${ guid }-${ p.id }-select`;\n    return `<input type=\"radio\" name=\"${ guid }-tabs\" id=\"${ panelId }\" data-tabset=\"${ p.id }\"><label for=\"${ panelId }\">${ p.label }</label>`\n  }).join(``) }\n    </fieldset>\n    <div class=\"ixfx-tabset-host\" id=\"${ guid }-host\"></div>\n  </div>\n  `\n  parentEl.innerHTML = switcher;\n\n  // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n  const hostEl = document.getElementById(`${ guid }-host`)!;\n  // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n  const tabSetEl = document.getElementById(guid)!;\n\n  tabSetEl.querySelector(`fieldset`)?.addEventListener(`change`, event => {\n    const el = event.target as HTMLInputElement;\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    select(el.getAttribute(`data-tabset`)!);\n  })\n\n  let currentPanel: Panel<any> | undefined;\n\n  const select = (id: string) => {\n    const newPanel = panels.find(p => p.id === id);\n    const priorPanel = currentPanel;\n\n    if (options.onPanelChanging) {\n      const allow = options.onPanelChanging(priorPanel, newPanel);\n      if (typeof allow === `boolean` && !allow) return; // Cancel panel change\n    }\n    if (priorPanel) {\n      priorPanel.dismount();\n    }\n    currentPanel = newPanel;\n    if (newPanel) {\n      newPanel.mount(hostEl);\n      const domId = `#${ guid }-${ id }-select`;\n      const inputEl = tabSetEl.querySelector(domId) as HTMLInputElement | undefined;\n      if (inputEl) {\n        inputEl.checked = true;\n      } else {\n        console.warn(`Could not find INPUT element for panel id: ${ id } (${ domId })`);\n      }\n    }\n    if (options.onPanelChange) options.onPanelChange(priorPanel, newPanel);\n  }\n\n  select(preselectId);\n  let warned = false;\n  const notify = (name: string, args: TNotifyArgs) => {\n    if (!currentPanel) return;\n    if (currentPanel.notify) {\n      currentPanel.notify(name, args);\n    } else if (!warned) {\n      warned = true;\n      console.warn(`TabbedPanel.notify dropping notification '${ name }'. Panel implementation is missing 'notify' function`);\n    }\n  }\n\n  return { select, panels, hostEl, tabSetEl, notify }\n}","import JSON5 from 'json5';\n\nimport { resolveEl } from './resolve-el.js';\nimport { getPointParameter, type Point } from '@ixfx/geometry/point';\nimport type { GridCardinalDirection } from '@ixfx/geometry/grid';\nimport { cardinal } from '@ixfx/geometry/rect';\nimport { Points } from '@ixfx/geometry';\n\nexport type PointSpaces = `viewport` | `screen` | `document`;\n\n/**\n * Convert an absolute point to relative, in different coordinate spaces.\n *\n * When calling the returned function, the input value must be in the same\n * scale as the intended output scale.\n *\n * Viewport-relative is used by default.\n *\n * @example Get relative position of click in screen coordinates\n * ```js\n * const f = pointScaler({ to: 'screen' });\n * document.addEventListener('click', evt => {\n *  const screenRelative = f(evt.screenX, evt.screenY);\n *  // Yields {x,y} on 0..1 scale\n * });\n * ```\n *\n * @example Get relative position of click in viewport coordinates\n * ```js\n * const f = pointScaler({ to: 'viewport' });\n * document.addEventListener('click', evt => {\n *  const viewportRelative = f(evt.clientX, evt.clientY);\n *  // Yields {x,y} on 0..1 scale\n * });\n * ```\n *\n * @example Get relative position of click in document coordinates\n * ```js\n * const f = pointScaler({ to: 'document' });\n * document.addEventListener('click', evt => {\n *  const documentRelative = f(evt.pageX, evt.pageY);\n *  // Yields {x,y} on 0..1 scale\n * });\n * ```\n *\n * @param reference\n * @returns\n */\nexport const pointScaler = (reference: PointSpaces = `viewport`) => {\n  switch (reference) {\n    case `viewport`: {\n      return (a: Readonly<Point | number | number[]>, b?: number) => {\n        const pt = getPointParameter(a, b);\n        return Object.freeze({\n          x: pt.x / window.innerWidth,\n          y: pt.y / window.innerHeight,\n        });\n      };\n    }\n    case `screen`: {\n      return (a: Readonly<Point | number | number[]>, b?: number) => {\n        const pt = getPointParameter(a, b);\n        return Object.freeze({\n          x: pt.x / screen.width,\n          y: pt.y / screen.height,\n        });\n      };\n    }\n    case `document`: {\n      return (a: Readonly<Point | number | number[]>, b?: number) => {\n        const pt = getPointParameter(a, b);\n        return Object.freeze({\n          x: pt.x / document.body.scrollWidth,\n          y: pt.y / document.body.scrollHeight,\n        });\n      };\n    }\n    default: {\n      throw new Error(\n        `Unknown 'reference' parameter: ${ JSON.stringify(reference) }`\n      );\n    }\n  }\n};\n\nexport type ElPositionOpts = {\n  readonly target?: PointSpaces;\n  readonly relative?: boolean;\n  readonly anchor?: GridCardinalDirection | `center`;\n};\n\n/**\n * Returns a function which yields element position in target coordinate space with optional scaling.\n * Live position is calculated when the function is invoked.\n * Use {@link positionRelative} to simply get relative position of element in given coordinate space.\n *\n * @example Absolute position of #blah in viewport coordinate space\n * ```js\n * const f = positionFn('#blah');\n * f(); // Yields: {x,y}\n * // Or:\n * positionFn('#blah')(); // Immediately invoke\n * ```\n *\n * @example Relative position of element in viewport-space\n * ```js\n * const f = positionFn(evt.target, { relative: true });\n * f(); // Yields: {x,y}\n * ```\n *\n * @example Relative position of #blah in screen-space\n * ```js\n * const f = positionFn('#blah', { target: 'screen', relative: true });\n * f(); // Yields: {x,y}\n * ```\n *\n * By default, top-left corner (north west) is used. Other cardinal points or 'center' can be specified:\n * ```js\n * // Relative position by center\n * positionFn('#blah', { relative: true, anchor: 'center' });\n *\n * // ...by bottom-right corner\n * positionFn('#blah', { relative: true, anchor: 'se' });\n * ```\n *\n * This function is useful if you have a stable DOM element and conversion target.\n * If the DOM element is changing continually, consider using {@link viewportToSpace} to\n * convert from viewport coordinates to target coordinates:\n *\n * ```js\n * // Eg.1 Absolute coords in screen space\n * const vpToScreen = viewportToSpace('screen');\n * vpToScreen(el.getBoundingClientRect());\n *\n * // Eg.2 Relative coords in viewport space\n * const vpRelative = pointScaler(); // Re-usable scaler. Default uses viewport\n * vpRelative(el.getBoundingClientRect()); // Yields: { x,y }\n *\n * // Eg.3 Relative coords in screen space\n * const vpToScreen = viewportToSpace('screen'); // Map viewport->screen\n * const screenRelative = pointScaler('screen'); // Scale screen units\n *\n * // Combine into a resuable function that takes an element\n * const mapAndScale = (el) => screenRelative(vpToScreen(el.getBoundingClientRect()));\n *\n * // Call\n * mapAndScale(document.getElementById('blah')); // Yields: { x,y }\n * ```\n * @param domQueryOrEl\n * @param options\n * @returns\n */\n// eslint-disable-next-line unicorn/prevent-abbreviations\nexport const positionFn = (\n  domQueryOrEl: Readonly<string | HTMLElement>,\n  options: ElPositionOpts = {}\n): (() => Point) => {\n  const targetSpace = options.target ?? `viewport`;\n  const relative = options.relative ?? false;\n  const anchor = options.anchor ?? `nw`;\n\n  const el = resolveEl(domQueryOrEl);\n  const vpToSpace = viewportToSpace(targetSpace);\n\n  if (relative) {\n    const s = pointScaler(targetSpace);\n    return () => s(vpToSpace(cardinal(el.getBoundingClientRect(), anchor)));\n  } else {\n    return () => vpToSpace(cardinal(el.getBoundingClientRect(), anchor));\n  }\n};\n\n/**\n * Returns a {x,y} Point on a cardinal position of element.\n * ```\n * // Top edge, middle horizontal position\n * const pos = cardinalPosition(`#blah`, `n`);\n * ```\n * @param domQueryOrEl \n * @param anchor \n * @returns \n */\nexport const cardinalPosition = (\n  domQueryOrEl: Readonly<string | HTMLElement>,\n  anchor: GridCardinalDirection | `center` = `nw`\n): Point => {\n  const el = resolveEl(domQueryOrEl);\n  return cardinal(el.getBoundingClientRect(), anchor);\n};\n/**\n * Returns relative position of element in target coordinate space, or viewport by default.\n * Relative means that { x:0.5, y: 0.5 } is the middle of the target space. Eg for viewport, that means its the middle of the browser window.\n * ```js\n * // These all yield { x, y }\n * elPositionRelative('#blah');\n * elPositionRelative(evt.target, 'screen');\n * ```\n * @param domQueryOrEl DOM query or element\n * @param target Target coordinate space, or viewport by default\n * @returns Point\n */\nexport const positionRelative = (\n  domQueryOrEl: Readonly<string | HTMLElement>,\n  target: PointSpaces = `viewport`\n): Point => {\n  const f = positionFn(domQueryOrEl, { relative: true, target });\n  return f();\n};\n\n/**\n * Returns a function that converts input viewport coordinate space\n * to an output coordinate space.\n *\n * ```js\n * // f() will convert from viewport to document coordinate space\n * const f = viewportToSpace('document');\n *\n * // {x:100,y:100} is viewport coordinate space\n * f(100,100); // Yields: { x, y } converted to document space\n * ```\n *\n * Or immediately invoke for one-off use:\n * ```js\n * viewportToSpace('document')(100,100); // Yields: { x, y }\n * ```\n * @param targetSpace\n * @returns\n */\nexport const viewportToSpace = (targetSpace: PointSpaces = `viewport`) => {\n  switch (targetSpace) {\n    case `screen`: {\n      return (a: Readonly<Point | number[] | number>, b?: number) => {\n        const pt = getPointParameter(a, b);\n        return Object.freeze({\n          x: pt.x + window.screenX,\n          y: pt.y + window.screenY,\n        });\n      };\n    }\n    case `document`: {\n      return (a: Readonly<Point | number[] | number>, b?: number) => {\n        const pt = getPointParameter(a, b);\n        return Object.freeze({\n          x: pt.x + window.scrollX,\n          y: pt.y + window.scrollY,\n        });\n      };\n    }\n    case `viewport`: {\n      return (a: Readonly<Point | number[] | number>, b?: number) => {\n        const pt = getPointParameter(a, b);\n        return Object.freeze({\n          x: pt.x,\n          y: pt.y,\n        });\n      };\n    }\n    default: {\n      throw new Error(\n\n        `Unexpected target coordinate space: ${ targetSpace }. Expected: viewport, document or screen`\n      );\n    }\n  }\n};\n\n/**\n * Position element by relative coordinate. Relative to window dimensions by default\n * @param relativePos Window-relative coordinate. 0.5/0.5 is middle of window.\n */\nexport const positionFromMiddle = (\n  domQueryOrEl: string | HTMLElement,\n  relativePos: Point,\n  relativeTo: `window` | `screen` = `window`\n) => {\n  if (!domQueryOrEl) throw new Error(`domQueryOrEl is null or undefined`);\n  const el = resolveEl<HTMLElement>(domQueryOrEl);\n\n  // Convert relative to absolute units\n  const absPosition = Points.multiply(\n    relativePos,\n    window.innerWidth,\n    window.innerHeight\n  );\n\n  const thingRect = el.getBoundingClientRect();\n  const offsetPos = Points.subtract(\n    absPosition,\n    thingRect.width / 2,\n    thingRect.height / 2\n  );\n\n  // Apply via CSS\n  el.style.transform = `translate(${ offsetPos.x }px, ${ offsetPos.y }px)`;\n};\n\n\n\n\n\n\n\n/**\n * Given an array of class class names, this will cycle between them each time\n * it is called.\n *\n * Eg, assume `list` is: [ `a`, `b`, `c` ]\n *\n * If `el` already has the class `a`, the first time it is called, class `a`\n * is removed, and `b` added. The next time `b` is swapped for `c`. Once again,\n * `c` will swap with `a` and so on.\n *\n * If `el` is undefined or null, function silently returns.\n * @param el Element\n * @param list List of class names\n * @returns\n */\nexport const cycleCssClass = (\n  el: Readonly<HTMLElement>,\n  list: readonly string[]\n) => {\n\n  if (el === null || !el) return;\n  if (!Array.isArray(list)) {\n    throw new TypeError(`List should be an array of strings`);\n  }\n\n  for (let index = 0; index < list.length; index++) {\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n    if (el.classList.contains(list[ index ])) {\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n      el.classList.remove(list[ index ]);\n      if (index + 1 < list.length) {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n        el.classList.add(list[ index + 1 ]);\n      } else {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n        el.classList.add(list[ 0 ]);\n      }\n      return;\n    }\n  }\n  el.classList.add(list[ 0 ] as string);\n};\n\n/**\n * Source: https://zellwk.com/blog/translate-in-javascript\n * @param domQueryOrEl\n */\nexport const getTranslation = (\n  domQueryOrEl: Readonly<string | HTMLElement>\n): Points.Point3d => {\n  // Source:\n  // https://raw.githubusercontent.com/zellwk/javascript/master/src/browser/dom/translate-values.js\n\n  const el = resolveEl<HTMLElement>(domQueryOrEl);\n  const style = window.getComputedStyle(el);\n  const matrix = style.transform;\n\n  // No transform property. Simply return 0 values.\n  if (matrix === `none` || typeof matrix === `undefined`) {\n    return {\n      x: 0,\n      y: 0,\n      z: 0,\n    };\n  }\n\n  // Can either be 2d or 3d transform\n  const matrixType = matrix.includes(`3d`) ? `3d` : `2d`;\n  // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n  // @ts-expect-error\n  const matrixValues = (/matrix.*\\((.+)\\)/.exec(matrix))[ 1 ].split(`, `);\n\n  // 2d Matrixes have 6 values\n  // Last 2 values are X and Y.\n  // 2d Matrixes does not have Z value.\n  if (matrixType === `2d`) {\n    return {\n      x: Number.parseFloat(matrixValues[ 4 ]),\n      y: Number.parseFloat(matrixValues[ 5 ]),\n      z: 0,\n    };\n  }\n\n  // 3d Matrixes have 16 values\n  // The 13th, 14th, and 15th values are X, Y, and Z\n\n  if (matrixType === `3d`) {\n    return {\n      x: Number.parseFloat(matrixValues[ 12 ]),\n      y: Number.parseFloat(matrixValues[ 13 ]),\n      z: Number.parseFloat(matrixValues[ 14 ]),\n    };\n  }\n\n  return { x: 0, y: 0, z: 0 };\n};\n\n\n/**\n * Creates an element after `sibling`\n * ```\n * const el = createAfter(siblingEl, `DIV`);\n * ```\n * @param sibling Element\n * @param tagName Element to create\n * @returns New element\n */\nexport const createAfter = (\n  sibling: Readonly<HTMLElement>,\n  tagName: string\n): HTMLElement => {\n  const el = document.createElement(tagName);\n  sibling.parentElement?.insertBefore(el, sibling.nextSibling);\n  return el;\n};\n\n/**\n * Creates an element inside of `parent`\n * ```\n * const newEl = createIn(parentEl, `DIV`);\n * ```\n * @param parent Parent element\n * @param tagName Tag to create\n * @returns New element\n */\nexport const createIn = (\n  parent: Readonly<HTMLElement>,\n  tagName: string\n): HTMLElement => {\n  const el = document.createElement(tagName);\n  parent.append(el);\n  return el;\n};\n\n/**\n * Remove all child nodes from `parent`\n * @param parent\n */\nexport const clear = (parent: Readonly<HTMLElement>) => {\n  let c = parent.lastElementChild;\n\n  while (c) {\n    c.remove();\n    c = parent.lastElementChild;\n  }\n};\n\n\n/**\n * Copies string representation of object to clipboard\n * @param object\n * @returns Promise\n */\nexport const copyToClipboard = (object: object) => {\n  const p = new Promise((resolve, reject) => {\n    //const json = JSON.stringify(obj, null, 2);\n\n    const string_ = JSON5.stringify(object);\n    navigator.clipboard.writeText(JSON.stringify(string_)).then(\n      () => {\n        resolve(true);\n      },\n      (error) => {\n        console.warn(`Could not copy to clipboard`);\n        console.log(string_);\n        reject(new Error(error));\n      }\n    );\n  });\n  return p;\n};\n\n/**\n * Inserts `element` into `parent` sorted according to its HTML attribute `data-sort`.\n * \n * Assumes:\n * * Every child of `parent` and `element`, has a `data-sort` attribute. This is the basis for sorting.\n * * `parent` starts off empty or pre-sorted.\n * * Order of `parent`'s children is not changed (ie it always remains sorted)\n * @param parent Parent to insert into\n * @param element Element to insert\n */\nexport const insertSorted = (parent: HTMLElement, element: HTMLElement) => {\n  const elSort = element.getAttribute(`data-sort`) ?? ``;\n  let elAfter: HTMLElement | undefined;\n  let elBefore: HTMLElement | undefined;\n  for (const c of parent.children) {\n    const sort = c.getAttribute(`data-sort`) ?? ``;\n    if (elSort >= sort) elAfter = c as HTMLElement;\n    if (elSort <= sort) elBefore = c as HTMLElement;\n    if (elAfter !== undefined && elBefore !== undefined) break;\n  }\n  if (elAfter !== undefined) {\n    elAfter.insertAdjacentElement(`afterend`, element);\n  } else if (elBefore === undefined) {\n    parent.append(element);\n  } else {\n    elBefore.insertAdjacentElement(`beforebegin`, element);\n  }\n}\n\n/**\n * Creates or updates an element based on an input value.\n * This function should not add the element to the DOM.\n */\nexport type CreateUpdateElement<V> = (\n  /**\n   * Value to create/update for\n   */\n  item: V,\n  /**\n   * Element to update, or null if it needs to be created\n   */\n  el: HTMLElement | null\n) => HTMLElement;\n\n/**\n * Creates a DOM tree, based on provided data.\n * \n * This will create new DOM elements if needed, update\n * existing ones or remove them if the value is no longer present.\n * \n * \n * @param parentEl \n * @param list Values to create elements for\n * @param createUpdate Function to create/update elements based on a value\n */\nexport const reconcileChildren = <V>(\n  parentEl: HTMLElement,\n  list: Map<string, V>,\n  createUpdate: CreateUpdateElement<V>\n) => {\n  if (typeof parentEl === `undefined`) throw new Error(`Param 'parentEl' is undefined`);\n\n  if (parentEl === null) throw new Error(`Param 'parentEl' is null`);\n\n  const seen = new Set<string>();\n\n  for (const [ key, value ] of list) {\n    const id = `c-${ key }`;\n\n    const el = parentEl.querySelector(`#${ id }`);\n    const finalEl = createUpdate(value, el as HTMLElement);\n    if (el !== finalEl) {\n      finalEl.id = id;\n      parentEl.append(finalEl);\n    }\n    seen.add(id);\n  }\n\n  const prune: HTMLElement[] = [];\n  for (const child of parentEl.children) {\n    if (!seen.has(child.id)) {\n      prune.push(child as HTMLElement);\n    }\n  }\n\n  // for (let index = 0; index < parentEl.children.length; index++) {\n  //   const c = parentEl.children[ index ] as HTMLElement;\n  //   if (!seen.has(c.id)) {\n  //     prune.push(c);\n  //   }\n  // }\n\n  for (const p of prune) p.remove();\n};\n\n/**\n * Gets a HTML element by id, throwing an error if not found\n * @param id \n * @returns \n */\n// eslint-disable-next-line @typescript-eslint/no-unnecessary-type-parameters\nexport const byId = <T extends HTMLElement>(id: string): T => {\n  const element = document.getElementById(id);\n  if (element === null) throw new Error(`HTML element with id '${ id }' not found`);\n  return element as T;\n}"],"x_google_ignoreList":[1],"mappings":"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"}