import{i as e,s as t,u as n}from"./numeric-arrays-CRg0aU_z.js";import{t as r}from"./tracker-base-B9GTo4Nh.js";var i=class extends r{values;timestamps;constructor(e){super(e),this.values=[],this.timestamps=[]}trimStore(e){return e>=this.values.length?this.values.length:(this.values=this.values.slice(-e),this.timestamps=this.timestamps.slice(-e),this.values.length)}onTrimmed(e){}get last(){return this.values.at(-1)}get initial(){return this.values.at(0)}get size(){return this.values.length}get elapsed(){if(this.values.length<0)throw Error(`No values seen yet`);return Date.now()-this.timestamps[0]}get timespan(){let e=this.timestamps.at(0),t=this.timestamps.at(-1);return e===void 0||t===void 0?NaN:t-e}onReset(){this.values=[],this.timestamps=[]}filterData(e){let t={value:e.at(-1),at:performance.now()},n=e.map(e=>({at:performance.now(),value:e}));if(this.storeIntermediate)this.values.push(...e),this.timestamps.push(...n.map(e=>e.at));else switch(this.values.length){case 0:this.values.push(t.value),this.timestamps.push(t.at);break;case 2:this.values[1]=t.value,this.timestamps[1]=t.at;break;case 1:this.values.push(t.value),this.timestamps.push(t.at);break}return n}},a=class extends i{#e=0;#t=2**53-1;#n=-(2**53-1);difference(){if(this.last!==void 0&&this.initial!==void 0)return this.last-this.initial}relativeDifference(){if(this.last!==void 0&&this.initial!==void 0)return this.last/this.initial}onReset(){this.#t=2**53-1,this.#n=-(2**53-1),this.#e=0,super.onReset()}onTrimmed(r){this.#t=t(this.values),this.#n=e(this.values),this.#e=n(this.values)}computeResults(e){if(e.some(e=>Number.isNaN(e)))throw Error(`Cannot add NaN`);let t=e.map(e=>e.value);return this.#e=t.reduce((e,t)=>e+t,this.#e),this.#t=Math.min(...t,this.#t),this.#n=Math.max(...t,this.#n),{max:this.#n,min:this.#t,total:this.#e,avg:this.avg}}getMinMaxAvg(){return{min:this.#t,max:this.#n,avg:this.avg}}get max(){return this.#n}get total(){return this.#e}get min(){return this.#t}get avg(){return this.#e/this.seenCount}};const o=(e={})=>new a(e);export{o as n,i as r,a as t};