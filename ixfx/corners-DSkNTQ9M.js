import{n as e}from"./chunk-CVLEGGlw.js";import{a as t,y as n}from"./numbers-BlBexQl9.js";import{n as r}from"./clamp-dSm2UU4N.js";import{A as i,F as a,I as o,M as s}from"./angles-DwQpnVfp.js";import{ct as c}from"./conversions-CmWd4trl.js";import{P as l,j as u}from"./point-BnPODnGO.js";const d=(e,t)=>!(t.x<0||t.y<0||t.x>=e.cols||t.y>=e.rows),f=e=>e===void 0?!1:`x`in e&&`y`in e,p=(e,t=`Param`,n)=>{if(e===void 0)throw Error(t+` is undefined. Expecting {x,y}`);if(e.x===void 0)throw Error(t+`.x is undefined`);if(e.y===void 0)throw Error(t+`.y is undefined`);if(Number.isNaN(e.x))throw Error(t+`.x is NaN`);if(Number.isNaN(e.y))throw Error(t+`.y is NaN`);if(!Number.isInteger(e.x))throw TypeError(t+`.x is non-integer`);if(!Number.isInteger(e.y))throw TypeError(t+`.y is non-integer`);if(n!==void 0&&!d(n,e))throw Error(`${t} is outside of grid. Cell: ${e.x},${e.y} Grid: ${n.cols}, ${n.rows}`)},m=(e,t=`Param`)=>{if(e===void 0)throw Error(`${t} is undefined. Expecting grid.`);if(!(`rows`in e))throw Error(`${t}.rows is undefined`);if(!(`cols`in e))throw Error(`${t}.cols is undefined`);if(!Number.isInteger(e.rows))throw TypeError(`${t}.rows is not an integer`);if(!Number.isInteger(e.cols))throw TypeError(`${t}.cols is not an integer`)},h=function(e,t,n=`undefined`){m(e,`grid`),p(t,`cell`);let i=t.x,a=t.y;switch(n){case`wrap`:i%=e.cols,a%=e.rows,i<0?i=e.cols+i:i>=e.cols&&(i-=e.cols),a<0?a=e.rows+a:a>=e.rows&&(a-=e.rows),i=Math.abs(i),a=Math.abs(a);break;case`stop`:i=r(i,e.cols),a=r(a,e.rows);break;case`undefined`:if(i<0||a<0||i>=e.cols||a>=e.rows)return;break;case`unbounded`:break;default:throw Error(`Unknown BoundsLogic '${n}'. Expected: wrap, stop, undefined or unbounded`)}return Object.freeze({x:i,y:a})};function*g(e,t){for(let n of t)Array.isArray(n)?yield n.map(t=>e.get(t,`undefined`)):yield e.get(n,`undefined`)}function*_(e,t,n=!0){t||={x:0,y:0},m(e,`grid`),p(t,`start`,e);let{x:r,y:i}=t,a=!0;do yield{x:r,y:i},r++,r===e.cols&&(i++,r=0),i===e.rows&&(n?(i=0,r=0):a=!1),r===t.x&&i===t.y&&(a=!1);while(a)}function*v(e,t,n=!0){yield*g(e,_(e,t,n))}function*y(e,t,n=!0){for(let r of _(e,t,n))yield{cell:r,value:e.get(r)}}var b=e({columns:()=>S,rows:()=>x});const x=function*(e,t){t||={x:0,y:0};let n=t.y,r=[];for(let i of _(e,t))i.y===n?r.push(i):(yield r,r=[i],n=i.y);r.length>0&&(yield r)};function*S(e,t){t||={x:0,y:0};for(let n=t.x;n<e.cols;n++){let r=[];for(let i=t.y;i<e.rows;i++)r.push({x:n,y:i});yield r}}const C=function(e,t,n,r=`undefined`){return h(e,{x:t.x+n.x,y:t.y+n.y},r)},w=(e,t,n)=>{if(m(e,`grid`),t.x<0)switch(n){case`stop`:t={...t,x:0};break;case`unbounded`:throw Error(`unbounded not supported`);case`undefined`:return;case`wrap`:t=C(e,{x:0,y:t.y},{x:t.x,y:0},`wrap`);break}if(t.y<0)switch(n){case`stop`:t={...t,y:0};break;case`unbounded`:throw Error(`unbounded not supported`);case`undefined`:return;case`wrap`:t={...t,y:e.rows+t.y};break}if(t.x>=e.cols)switch(n){case`stop`:t={...t,x:e.cols-1};break;case`unbounded`:throw Error(`unbounded not supported`);case`undefined`:return;case`wrap`:t={...t,x:t.x%e.cols};break}if(t.y>=e.rows)switch(n){case`stop`:t={...t,y:e.rows-1};break;case`unbounded`:throw Error(`unbounded not supported`);case`undefined`:return;case`wrap`:t={...t,y:t.y%e.rows};break}return t.y*e.cols+t.x},T=(e,r)=>{let i=0;return i=typeof e==`number`?e:e.cols,n(t(i,`aboveZero`,`colsOrGrid`)),{x:r%i,y:Math.floor(r/i)}},E=(e,t=`t`)=>{if(e===void 0)throw Error(`{$name} undefined`);i(e.a,t+`.a`),i(e.b,t+`.b`),i(e.c,t+`.c`)},D=e=>{if(e===void 0)return!1;let t=e;return!(!o(t.a)||!o(t.b)||!o(t.c))},O=e=>s(e.a)&&s(e.b)&&s(e.c),k=e=>a(e.a)&&a(e.b)&&a(e.c),A=(e,t)=>u(e.a,t.a)&&u(e.b,t.b)&&u(e.c,t.c),j=(e=`both`,t)=>{let n=t??l,r=1,i=1,a={x:1,y:1},s=()=>{switch(e){case`height`:return{x:i,y:i};case`width`:return{x:r,y:r};case`min`:return{x:Math.min(r,i),y:Math.min(r,i)};case`max`:return{x:Math.max(r,i),y:Math.max(r,i)};default:return{x:r,y:i}}},u=(e,t,r,i)=>{let a=NaN,s=NaN,l=n.width,u=n.height;if(typeof e==`number`)if(a=e,typeof t==`number`){if(s=t,r===void 0)return[a,s,l,u];if(c(r))l=r.width,u=r.height;else if(typeof r==`number`)if(l=r,typeof i==`number`)u=i;else throw TypeError(`Missing final height value`);else throw Error(`Missing valid output range`)}else if(c(t))l=t.width,u=t.height;else throw Error(`Expected input y or output Rect to follow first number parameter`);else if(o(e)){if(a=e.x,s=e.y,t===void 0)return[a,s,l,u];if(c(t))l=t.width,u=t.height;else if(typeof t==`number`)if(l=t,typeof r==`number`)u=r;else throw TypeError(`Expected height as third parameter after Point and output width`);else throw TypeError(`Expected Rect or width as second parameter when first parameter is a Point`)}else throw Error(`Expected input Point or x value as first parameter`);return[a,s,l,u]},d=(e,t,n,r)=>p(!0,...u(e,t,n,r)),f=(e,t,n,r)=>p(!1,...u(e,t,n,r)),p=(e,t,n,o,c)=>{if(Number.isNaN(o))throw Error(`Output width range missing`);if(Number.isNaN(c))throw Error(`Output height range missing`);return(o!==r||c!==i)&&(r=o,i=c,a=s()),e?{x:t*a.x,y:n*a.y}:{x:t/a.x,y:n/a.y}};return{computeScale:s,rel:f,abs:d,width:n.width,height:n.height}},M=e=>(E(e),[e.a,e.b,e.c]);export{h as _,A as a,f as b,T as c,b as d,x as f,g,y as h,O as i,w as l,_ as m,j as n,k as o,v as p,E as r,D as s,M as t,C as u,p as v,d as x,m as y};