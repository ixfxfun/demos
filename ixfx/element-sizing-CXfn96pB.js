import{h as e}from"./src-DdJCbM4z.js";import{r as t,t as n}from"./resolve-el-BDflOSOS.js";import{nt as r}from"./conversions-CmWd4trl.js";import{M as i,N as a}from"./point-BnPODnGO.js";const o=e=>{let t=n(e),r=t.getBoundingClientRect();t instanceof SVGElement&&(t=t.parentElement);let i=s(t,`borderTopWidth`,`borderLeftWidth`,`borderRightWidth`,`borderBottomWidth`);return{x:r.x,y:r.y,width:r.width+i.borderLeftWidth+i.borderRightWidth,height:r.height+i.borderTopWidth+i.borderBottomWidth}},s=(e,...t)=>{let r=getComputedStyle(n(e)),i={};for(let e of t){let t=r[e];if(typeof t==`string`)if(t.endsWith(`px`))i[e]=Number.parseFloat(t.substring(0,t.length-2));else throw Error(`Property '${String(e)}' does not end in 'px'. Value: ${t}`);else throw Error(`Property '${String(e)}' is not type string. Got: ${typeof t} Value: ${t}`)}return i},c=(e,n,r)=>{let i=t(e);if(i.length!==0)for(let e of i)n?e.classList.add(r):e.classList.remove(r)},l=(e,n)=>{let r=t(e);if(r.length!==0)for(let e of r)e.classList.toggle(n)},u=(e,n)=>{let r=t(e);if(r.length!==0)for(let e of r)e.style.display=n},d=(t,n)=>{let r,i=e(n,100);return()=>{r&&clearTimeout(r),r=setTimeout(t,i)}};var f=class e{#e;#t;#n;#r;#i;#a=(e,t)=>{};#o;#s;#c=!1;#l;#u=()=>({});constructor(e,t){this.#o=n(e);let r=t.containerEl;if(r==null){let e=this.#o.parentElement;if(e!==null)this.#s=e;else{let e=this.#o.parentNode;e!==null&&(this.#s=e)}}else (typeof r==`string`||typeof r==`object`)&&(this.#s=n(r));this.#e=t.stretch??`none`,this.#a=t.onSizeChanging,this.#t=i;let o=t.onSizeDone;o!==void 0&&(this.#u=d(()=>{o(this.size,this.#o)},t.debounceTimeout));let s=t.naturalSize;s??=this.#o.getBoundingClientRect(),this.#r=1,this.#n=s,this.setNaturalSize(s),this.#i=a,this.#s===document.body?this.#f():this.#d()}dispose(e){this.#c||(this.#c=!0,this.#l&&=(this.#l.disconnect(),void 0))}static canvasParent(t,r){return new e(n(t),{...r,onSizeChanging(e,t){t.width=e.width,t.height=e.height,r.onSizeChanging&&r.onSizeChanging(e,t)}})}static canvasViewport(e,t){let r=n(e);r.style.position=`absolute`,r.style.zIndex=(t.zIndex??0).toString(),r.style.left=`0px`,r.style.top=`0px`;let i={...t,containerEl:document.body};return this.canvasParent(e,i)}static svgViewport(t,n){return new e(t,{containerEl:document.body,stretch:`both`,onSizeChanging(e){t.setAttribute(`width`,e.width.toString()),t.setAttribute(`height`,e.height.toString()),n&&n(e)}})}#d(){let e=this.#s;if(!e)throw Error(`No container element`);let t=new ResizeObserver(e=>{this.#h(e)});t.observe(e),this.size=this.#m(e.getBoundingClientRect()),this.#l=t}#f(){let e=new ResizeObserver(e=>{this.#p()});e.observe(document.documentElement),this.#l=e,this.#p()}#p(){this.size={width:window.innerWidth,height:window.innerHeight},this.#i={x:0,y:0,...this.size}}setNaturalSize(e){this.#n=e,this.#r=e.width/e.height}get naturalSize(){return this.#n}get viewport(){return this.#i}#m(e){let{width:t,height:n}=e,r=this.#e;if(r===`min`?r=t<n?`width`:`height`:r===`max`&&(r=t>n?`width`:`height`),r===`width`?n=t/this.#r:r===`height`&&(t=n*this.#r),this.#o instanceof HTMLElement){let e=s(this.#o,`borderTopWidth`,`borderLeftWidth`,`borderRightWidth`,`borderBottomWidth`);t-=e.borderLeftWidth+e.borderRightWidth,n-=e.borderTopWidth+e.borderBottomWidth}return{width:t,height:n}}#h(e){let t=e[0].contentBoxSize[0],n={width:t.inlineSize,height:t.blockSize};this.size=this.#m(n),this.#i={x:0,y:0,width:n.width,height:n.height}}set size(e){r(e,`size`),this.#t=e,this.#a&&this.#a(e,this.#o),this.#u()}get size(){return this.#t}};export{u as a,c as i,o as n,l as o,s as r,f as t};