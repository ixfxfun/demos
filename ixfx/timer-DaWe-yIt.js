import{h as e,n as t,o as n,s as r}from"./src-DdJCbM4z.js";import{t as i}from"./clamp-dSm2UU4N.js";async function*a(r,i){let a=i.signal??void 0,o=i.delayWhen??`before`,s=i.count??void 0,c=i.allowUndefined??!1,l=i.delayMinimum?e(i.delayMinimum):void 0,u=i.while,d=!1,f=e(i.delay,e(i.delayMinimum,0)),p=performance.now(),m=async()=>{let e=performance.now()-p;if(l!==void 0&&(f=Math.max(0,l-e)),f&&await t({millis:f,signal:a}),p=performance.now(),a?.aborted)throw Error(`Signal aborted ${a.reason}`)};Array.isArray(r)&&(r=r.values()),i.onStart&&i.onStart();let h=!0,g=0;try{for(;!d;){g++,(o===`before`||o===`both`)&&await m();let e=await n(r);e===void 0&&!c?d=!0:(yield e,(o===`after`||o===`both`)&&await m(),s!==void 0&&g>=s&&(d=!0)),u&&(u(g)||(d=!0))}h=!1}finally{d=!0,i.onComplete&&i.onComplete(h)}}function*o(e,t){let n=t.signal??void 0,i=t.count??void 0,a=t.allowUndefined??!1,o=!1;Array.isArray(e)&&(e=e.values()),t.onStart&&t.onStart();let s=!0,c=0;try{for(;!o;){c++;let t=r(e);t===void 0&&!a?o=!0:(yield t,i!==void 0&&c>=i&&(o=!0),n?.aborted&&(o=!0))}s=!1}finally{o=!0,t.onComplete&&t.onComplete(s)}}function s(t){let n=f(e(t,0),{timer:m(),clampValue:!0});return()=>n.isDone}function c(t,n={}){let r=e(t);if(!r)throw Error(`Param 'duration' not valid`);let i={...n,timer:m()},a;return()=>(a??=f(r,i),a.elapsed)}function l(e,t={}){let n={...t,timer:h()},r;return()=>(r??=f(e,n),r.elapsed)}const u=()=>({elapsed:1,isDone:!0,reset(){},mod(e){}}),d=()=>({elapsed:0,isDone:!1,reset(){},mod(){}}),f=(e,t={})=>{if(!Number.isFinite(e))return u();if(Number.isNaN(e))return d();let n=t.clampValue??!1,r=t.wrapValue??!1;if(n&&r)throw Error(`clampValue and wrapValue cannot both be enabled`);let a=1,o=t.timer??m(),s=0,c=t=>{s=t;let o=t/(e*a);return n?o=i(o):r&&o>=1&&(o%=1),o};return{mod(e){a=e},get isDone(){return c(s)>=1},get elapsed(){return c(o.elapsed)},reset:()=>{o.reset()}}},p=(e,t={})=>{let n=t.timer??m(),r=e/1e3,i=1,a=()=>{let e=n.elapsed*(r*i),t=e-Math.floor(e);if(t<0)throw Error(`Unexpected cycle fraction less than 0. Elapsed: ${e} f: ${t}`);if(t>1)throw Error(`Unexpected cycle fraction more than 1. Elapsed: ${e} f: ${t}`);return t};return{mod:e=>{i=e},reset:()=>{n.reset()},get isDone(){return a()>=1},get elapsed(){return a()}}},m=()=>{let e=performance.now();return{reset:()=>{e=performance.now()},get elapsed(){return performance.now()-e}}},h=()=>{let e=0;return{reset:()=>{e=0},get peek(){return e},get elapsed(){return++e}}},g=(e,t)=>{if(typeof e!=`function`)throw Error(`Param 'fn' should be a function. Got: ${typeof e}`);let n=1;return{get elapsed(){return t.elapsed},get isDone(){return t.isDone},get runState(){return t.isDone?`idle`:`scheduled`},get startCount(){return n},get startCountTotal(){return n},compute:()=>{let n=t.elapsed;return e(n)},reset:()=>{t.reset(),n++}}};export{c as a,u as c,a as d,o as f,s as i,d as l,h as n,l as o,p as r,f as s,m as t,g as u};