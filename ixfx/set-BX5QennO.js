import{n as e}from"./chunk-CVLEGGlw.js";import{Ft as t,I as n}from"./src-DdJCbM4z.js";import{t as r}from"./simple-event-emitter-DdjYDCSw.js";const i=e=>new a(e);var a=class extends r{store=new Map;keyString;constructor(e){super(),this.keyString=e??n}get size(){return this.store.size}add(...e){let t=!1;for(let n of e){let e=this.has(n);this.store.set(this.keyString(n),n),super.fireEvent(`add`,{value:n,updated:e}),e||(t=!0)}return t}values(){return this.store.values()}clear(){this.store.clear(),super.fireEvent(`clear`,!0)}delete(e){let t=this.store.delete(this.keyString(e));return t&&super.fireEvent(`delete`,e),t}has(e){return this.store.has(this.keyString(e))}toArray(){return[...this.store.values()]}},o=class e{store;keyString;constructor(e,t){this.store=t??new Map,this.keyString=e??n}get size(){return this.store.size}add(...t){let n=new Map(this.store);for(let e of t){let t=this.keyString(e);n.set(t,e)}return new e(this.keyString,n)}delete(t){let n=new Map(this.store),r=this.keyString(t);return n.delete(r)?new e(this.keyString,n):this}has(e){let t=this.keyString(e);return this.store.has(t)}toArray(){return[...this.store.values()]}*values(){yield*this.store.values()}};const s=(e=t)=>new o(e);var c=class e{#e;#t;children=new Map;values=[];constructor(e=1,t=0){this.#e=t,this.#t=e}sizeLocal(){return this.values.length}sizeChildren(){return[...this.children.values()].length}sizeChildrenDeep(){let e=this.sizeChildren();for(let t of this.children.values())e+=t.sizeChildrenDeep();return e}size(){let e=this.values.length;for(let t of this.children.values())e+=t.size();return e}add(e){if(typeof e!=`string`)throw Error(`Param 'value' must be a string. Got: ${typeof e}`);if(e.length===0)throw Error(`Param 'value' is empty`);let t=this.#r(e,!0);if(t===this){this.hasLocal(e)||this.values.push(e);return}if(!t)throw Error(`Could not create child set for: ${e}`);t.add(e)}remove(e){if(typeof e!=`string`)throw Error(`Param 'value' must be a string. Got: ${typeof e}`);if(e.length===0)throw Error(`Param 'value' is empty`);let t=this.#r(e,!1);return t===void 0?!1:t===this?this.hasLocal(e)?(this.values=this.values.filter(t=>t!==e),!0):!1:t.remove(e)}debugDump(){let e=this.#n();for(let t of e)console.log(t)}#n(e=0){let t=[];t.push(`Depth: ${this.#e} Max: ${this.#t}`);for(let[n,r]of this.children.entries()){let i=r.#n(e+1);t.push(` key: ${n}`);for(let n of i)t.push(` `.repeat(e+1)+n)}t.push(`Values: (${this.values.length})`);for(let e of this.values)t.push(` ${e}`);return t.map(t=>` `.repeat(e)+t)}#r(t,n){if(t===void 0)throw Error(`Param 'value' undefined`);if(this.#e===this.#t||t.length<=this.#e)return this;let r=t[this.#e];if(r===void 0)throw Error(`Logic error. Depth: ${this.#e} Len: ${t.length}`);let i=this.children.get(r);return i===void 0&&n&&(i=new e(this.#t,this.#e+1),this.children.set(r,i)),i}hasLocal(e){for(let t of this.values)if(t===e)return!0;return!1}has(e){if(typeof e!=`string`)return!1;let t=this.#r(e,!1);return t===void 0?!1:t===this?this.hasLocal(e):t.has(e)}},l=e({MassiveSet:()=>c,SetStringImmutable:()=>o,SetStringMutable:()=>a,immutable:()=>s,mutable:()=>i});export{i,o as n,a as r,l as t};